var q0=t=>{throw TypeError(t)};var Ff=(t,e,n)=>e.has(t)||q0("Cannot "+n);var T=(t,e,n)=>(Ff(t,e,"read from private field"),n?n.call(t):e.get(t)),ee=(t,e,n)=>e.has(t)?q0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),H=(t,e,n,r)=>(Ff(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),pe=(t,e,n)=>(Ff(t,e,"access private method"),n);var au=(t,e,n,r)=>({set _(s){H(t,e,s,n)},get _(){return T(t,e,r)}});function pA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function uS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dS={exports:{}},Vh={},hS={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=Symbol.for("react.element"),mA=Symbol.for("react.portal"),gA=Symbol.for("react.fragment"),yA=Symbol.for("react.strict_mode"),vA=Symbol.for("react.profiler"),wA=Symbol.for("react.provider"),bA=Symbol.for("react.context"),xA=Symbol.for("react.forward_ref"),SA=Symbol.for("react.suspense"),kA=Symbol.for("react.memo"),EA=Symbol.for("react.lazy"),K0=Symbol.iterator;function CA(t){return t===null||typeof t!="object"?null:(t=K0&&t[K0]||t["@@iterator"],typeof t=="function"?t:null)}var fS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pS=Object.assign,mS={};function qa(t,e,n){this.props=t,this.context=e,this.refs=mS,this.updater=n||fS}qa.prototype.isReactComponent={};qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gS(){}gS.prototype=qa.prototype;function Ey(t,e,n){this.props=t,this.context=e,this.refs=mS,this.updater=n||fS}var Cy=Ey.prototype=new gS;Cy.constructor=Ey;pS(Cy,qa.prototype);Cy.isPureReactComponent=!0;var G0=Array.isArray,yS=Object.prototype.hasOwnProperty,Ty={current:null},vS={key:!0,ref:!0,__self:!0,__source:!0};function wS(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)yS.call(e,r)&&!vS.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:qc,type:t,key:i,ref:o,props:s,_owner:Ty.current}}function TA(t,e){return{$$typeof:qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _y(t){return typeof t=="object"&&t!==null&&t.$$typeof===qc}function _A(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var J0=/\/+/g;function Uf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_A(""+t.key):e.toString(36)}function Yu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qc:case mA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Uf(o,0):r,G0(s)?(n="",t!=null&&(n=t.replace(J0,"$&/")+"/"),Yu(s,e,n,"",function(c){return c})):s!=null&&(_y(s)&&(s=TA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(J0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",G0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Uf(i,a);o+=Yu(i,e,n,l,s)}else if(l=CA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Uf(i,a++),o+=Yu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lu(t,e,n){if(t==null)return t;var r=[],s=0;return Yu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function NA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Xu={transition:null},OA={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Xu,ReactCurrentOwner:Ty};function bS(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:lu,forEach:function(t,e,n){lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lu(t,function(){e++}),e},toArray:function(t){return lu(t,function(e){return e})||[]},only:function(t){if(!_y(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=qa;fe.Fragment=gA;fe.Profiler=vA;fe.PureComponent=Ey;fe.StrictMode=yA;fe.Suspense=SA;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OA;fe.act=bS;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pS({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ty.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yS.call(e,l)&&!vS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qc,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:bA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wA,_context:t},t.Consumer=t};fe.createElement=wS;fe.createFactory=function(t){var e=wS.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:xA,render:t}};fe.isValidElement=_y;fe.lazy=function(t){return{$$typeof:EA,_payload:{_status:-1,_result:t},_init:NA}};fe.memo=function(t,e){return{$$typeof:kA,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Xu.transition;Xu.transition={};try{t()}finally{Xu.transition=e}};fe.unstable_act=bS;fe.useCallback=function(t,e){return Jt.current.useCallback(t,e)};fe.useContext=function(t){return Jt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Jt.current.useEffect(t,e)};fe.useId=function(){return Jt.current.useId()};fe.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Jt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};fe.useRef=function(t){return Jt.current.useRef(t)};fe.useState=function(t){return Jt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Jt.current.useTransition()};fe.version="18.3.1";hS.exports=fe;var x=hS.exports;const I=uS(x),Ny=pA({__proto__:null,default:I},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA=x,RA=Symbol.for("react.element"),PA=Symbol.for("react.fragment"),MA=Object.prototype.hasOwnProperty,IA=AA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jA={key:!0,ref:!0,__self:!0,__source:!0};function xS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)MA.call(e,r)&&!jA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:RA,type:t,key:i,ref:o,props:s,_owner:IA.current}}Vh.Fragment=PA;Vh.jsx=xS;Vh.jsxs=xS;dS.exports=Vh;var g=dS.exports,SS={exports:{}},bn={},kS={exports:{}},ES={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,R){var P=O.length;O.push(R);e:for(;0<P;){var K=P-1>>>1,J=O[K];if(0<s(J,R))O[K]=R,O[P]=J,P=K;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var R=O[0],P=O.pop();if(P!==R){O[0]=P;e:for(var K=0,J=O.length,ie=J>>>1;K<ie;){var $=2*(K+1)-1,ae=O[$],xe=$+1,B=O[xe];if(0>s(ae,P))xe<J&&0>s(B,ae)?(O[K]=B,O[xe]=P,K=xe):(O[K]=ae,O[$]=P,K=$);else if(xe<J&&0>s(B,P))O[K]=B,O[xe]=P,K=xe;else break e}}return R}function s(O,R){var P=O.sortIndex-R.sortIndex;return P!==0?P:O.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=O)r(c),R.sortIndex=R.expirationTime,e(l,R);else break;R=n(c)}}function S(O){if(m=!1,b(O),!p)if(n(l)!==null)p=!0,W(k);else{var R=n(c);R!==null&&G(S,R.startTime-O)}}function k(O,R){p=!1,m&&(m=!1,v(_),_=-1),h=!0;var P=f;try{for(b(R),d=n(l);d!==null&&(!(d.expirationTime>R)||O&&!z());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var J=K(d.expirationTime<=R);R=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&r(l),b(R)}else r(l);d=n(l)}if(d!==null)var ie=!0;else{var $=n(c);$!==null&&G(S,$.startTime-R),ie=!1}return ie}finally{d=null,f=P,h=!1}}var C=!1,E=null,_=-1,A=5,N=-1;function z(){return!(t.unstable_now()-N<A)}function L(){if(E!==null){var O=t.unstable_now();N=O;var R=!0;try{R=E(!0,O)}finally{R?q():(C=!1,E=null)}}else C=!1}var q;if(typeof w=="function")q=function(){w(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Z=F.port2;F.port1.onmessage=L,q=function(){Z.postMessage(null)}}else q=function(){y(L,0)};function W(O){E=O,C||(C=!0,q())}function G(O,R){_=y(function(){O(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,W(k))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var P=f;f=R;try{return O()}finally{f=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,R){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var P=f;f=O;try{return R()}finally{f=P}},t.unstable_scheduleCallback=function(O,R,P){var K=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?K+P:K):P=K,O){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=P+J,O={id:u++,callback:R,priorityLevel:O,startTime:P,expirationTime:J,sortIndex:-1},P>K?(O.sortIndex=P,e(c,O),n(l)===null&&O===n(c)&&(m?(v(_),_=-1):m=!0,G(S,P-K))):(O.sortIndex=J,e(l,O),p||h||(p=!0,W(k))),O},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(O){var R=f;return function(){var P=f;f=R;try{return O.apply(this,arguments)}finally{f=P}}}})(ES);kS.exports=ES;var DA=kS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=x,wn=DA;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CS=new Set,Xl={};function mo(t,e){Oa(t,e),Oa(t+"Capture",e)}function Oa(t,e){for(Xl[t]=e,t=0;t<e.length;t++)CS.add(e[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=Object.prototype.hasOwnProperty,$A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q0={},Y0={};function zA(t){return um.call(Y0,t)?!0:um.call(Q0,t)?!1:$A.test(t)?Y0[t]=!0:(Q0[t]=!0,!1)}function BA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FA(t,e,n,r){if(e===null||typeof e>"u"||BA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oy=/[\-:]([a-z])/g;function Ay(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oy,Ay);Rt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oy,Ay);Rt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oy,Ay);Rt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ry(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FA(e,n,s,r)&&(n=null),r||s===null?zA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=LA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cu=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),qo=Symbol.for("react.fragment"),Py=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),TS=Symbol.for("react.provider"),_S=Symbol.for("react.context"),My=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),Iy=Symbol.for("react.memo"),fs=Symbol.for("react.lazy"),NS=Symbol.for("react.offscreen"),X0=Symbol.iterator;function ol(t){return t===null||typeof t!="object"?null:(t=X0&&t[X0]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Hf;function wl(t){if(Hf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hf=e&&e[1]||""}return`
`+Hf+t}var Vf=!1;function Wf(t,e){if(!t||Vf)return"";Vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wl(t):""}function UA(t){switch(t.tag){case 5:return wl(t.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return t=Wf(t.type,!1),t;case 11:return t=Wf(t.type.render,!1),t;case 1:return t=Wf(t.type,!0),t;default:return""}}function pm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qo:return"Fragment";case Wo:return"Portal";case dm:return"Profiler";case Py:return"StrictMode";case hm:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _S:return(t.displayName||"Context")+".Consumer";case TS:return(t._context.displayName||"Context")+".Provider";case My:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Iy:return e=t.displayName||null,e!==null?e:pm(t.type)||"Memo";case fs:e=t._payload,t=t._init;try{return pm(t(e))}catch{}}return null}function HA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pm(e);case 8:return e===Py?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VA(t){var e=OS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uu(t){t._valueTracker||(t._valueTracker=VA(t))}function AS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=OS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mm(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Z0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RS(t,e){e=e.checked,e!=null&&Ry(t,"checked",e,!1)}function gm(t,e){RS(t,e);var n=Zs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&ym(t,e.type,Zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ew(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ym(t,e,n){(e!=="number"||yd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bl=Array.isArray;function ia(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(bl(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zs(n)}}function PS(t,e){var n=Zs(e.value),r=Zs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var du,IS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(du=du||document.createElement("div"),du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WA=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(t){WA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rl[e]=Rl[t]})});function jS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Rl.hasOwnProperty(t)&&Rl[t]?(""+e).trim():e+"px"}function DS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qA=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(t,e){if(e){if(qA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function xm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sm=null;function jy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var km=null,oa=null,aa=null;function rw(t){if(t=Jc(t)){if(typeof km!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Jh(e),km(t.stateNode,t.type,e))}}function LS(t){oa?aa?aa.push(t):aa=[t]:oa=t}function $S(){if(oa){var t=oa,e=aa;if(aa=oa=null,rw(t),e)for(t=0;t<e.length;t++)rw(e[t])}}function zS(t,e){return t(e)}function BS(){}var qf=!1;function FS(t,e,n){if(qf)return t(e,n);qf=!0;try{return zS(t,e,n)}finally{qf=!1,(oa!==null||aa!==null)&&(BS(),$S())}}function ec(t,e){var n=t.stateNode;if(n===null)return null;var r=Jh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Em=!1;if(Hr)try{var al={};Object.defineProperty(al,"passive",{get:function(){Em=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Em=!1}function KA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Pl=!1,vd=null,wd=!1,Cm=null,GA={onError:function(t){Pl=!0,vd=t}};function JA(t,e,n,r,s,i,o,a,l){Pl=!1,vd=null,KA.apply(GA,arguments)}function QA(t,e,n,r,s,i,o,a,l){if(JA.apply(this,arguments),Pl){if(Pl){var c=vd;Pl=!1,vd=null}else throw Error(D(198));wd||(wd=!0,Cm=c)}}function go(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function US(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sw(t){if(go(t)!==t)throw Error(D(188))}function YA(t){var e=t.alternate;if(!e){if(e=go(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sw(s),t;if(i===r)return sw(s),e;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function HS(t){return t=YA(t),t!==null?VS(t):null}function VS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VS(t);if(e!==null)return e;t=t.sibling}return null}var WS=wn.unstable_scheduleCallback,iw=wn.unstable_cancelCallback,XA=wn.unstable_shouldYield,ZA=wn.unstable_requestPaint,et=wn.unstable_now,eR=wn.unstable_getCurrentPriorityLevel,Dy=wn.unstable_ImmediatePriority,qS=wn.unstable_UserBlockingPriority,bd=wn.unstable_NormalPriority,tR=wn.unstable_LowPriority,KS=wn.unstable_IdlePriority,Wh=null,vr=null;function nR(t){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(Wh,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:iR,rR=Math.log,sR=Math.LN2;function iR(t){return t>>>=0,t===0?32:31-(rR(t)/sR|0)|0}var hu=64,fu=4194304;function xl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xl(a):(i&=o,i!==0&&(r=xl(i)))}else o=n&~s,o!==0?r=xl(o):i!==0&&(r=xl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),s=1<<n,r|=t[n],e&=~s;return r}function oR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=oR(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function GS(){var t=hu;return hu<<=1,!(hu&4194240)&&(hu=64),t}function Kf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function lR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ly(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ee=0;function JS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QS,$y,YS,XS,ZS,_m=!1,pu=[],$s=null,zs=null,Bs=null,tc=new Map,nc=new Map,ws=[],cR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ow(t,e){switch(t){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":tc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(e.pointerId)}}function ll(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Jc(e),e!==null&&$y(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function uR(t,e,n,r,s){switch(e){case"focusin":return $s=ll($s,t,e,n,r,s),!0;case"dragenter":return zs=ll(zs,t,e,n,r,s),!0;case"mouseover":return Bs=ll(Bs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return tc.set(i,ll(tc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,nc.set(i,ll(nc.get(i)||null,t,e,n,r,s)),!0}return!1}function ek(t){var e=Ni(t.target);if(e!==null){var n=go(e);if(n!==null){if(e=n.tag,e===13){if(e=US(n),e!==null){t.blockedOn=e,ZS(t.priority,function(){YS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sm=r,n.target.dispatchEvent(r),Sm=null}else return e=Jc(n),e!==null&&$y(e),t.blockedOn=n,!1;e.shift()}return!0}function aw(t,e,n){Zu(t)&&n.delete(e)}function dR(){_m=!1,$s!==null&&Zu($s)&&($s=null),zs!==null&&Zu(zs)&&(zs=null),Bs!==null&&Zu(Bs)&&(Bs=null),tc.forEach(aw),nc.forEach(aw)}function cl(t,e){t.blockedOn===e&&(t.blockedOn=null,_m||(_m=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,dR)))}function rc(t){function e(s){return cl(s,t)}if(0<pu.length){cl(pu[0],t);for(var n=1;n<pu.length;n++){var r=pu[n];r.blockedOn===t&&(r.blockedOn=null)}}for($s!==null&&cl($s,t),zs!==null&&cl(zs,t),Bs!==null&&cl(Bs,t),tc.forEach(e),nc.forEach(e),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)ek(n),n.blockedOn===null&&ws.shift()}var la=Qr.ReactCurrentBatchConfig,Sd=!0;function hR(t,e,n,r){var s=Ee,i=la.transition;la.transition=null;try{Ee=1,zy(t,e,n,r)}finally{Ee=s,la.transition=i}}function fR(t,e,n,r){var s=Ee,i=la.transition;la.transition=null;try{Ee=4,zy(t,e,n,r)}finally{Ee=s,la.transition=i}}function zy(t,e,n,r){if(Sd){var s=Nm(t,e,n,r);if(s===null)rp(t,e,r,kd,n),ow(t,r);else if(uR(s,t,e,n,r))r.stopPropagation();else if(ow(t,r),e&4&&-1<cR.indexOf(t)){for(;s!==null;){var i=Jc(s);if(i!==null&&QS(i),i=Nm(t,e,n,r),i===null&&rp(t,e,r,kd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else rp(t,e,r,null,n)}}var kd=null;function Nm(t,e,n,r){if(kd=null,t=jy(r),t=Ni(t),t!==null)if(e=go(t),e===null)t=null;else if(n=e.tag,n===13){if(t=US(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kd=t,null}function tk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eR()){case Dy:return 1;case qS:return 4;case bd:case tR:return 16;case KS:return 536870912;default:return 16}default:return 16}}var Ps=null,By=null,ed=null;function nk(){if(ed)return ed;var t,e=By,n=e.length,r,s="value"in Ps?Ps.value:Ps.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ed=s.slice(t,1<r?1-r:void 0)}function td(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mu(){return!0}function lw(){return!1}function xn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mu:lw,this.isPropagationStopped=lw,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mu)},persist:function(){},isPersistent:mu}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fy=xn(Ka),Gc=Ue({},Ka,{view:0,detail:0}),pR=xn(Gc),Gf,Jf,ul,qh=Ue({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(Gf=t.screenX-ul.screenX,Jf=t.screenY-ul.screenY):Jf=Gf=0,ul=t),Gf)},movementY:function(t){return"movementY"in t?t.movementY:Jf}}),cw=xn(qh),mR=Ue({},qh,{dataTransfer:0}),gR=xn(mR),yR=Ue({},Gc,{relatedTarget:0}),Qf=xn(yR),vR=Ue({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),wR=xn(vR),bR=Ue({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xR=xn(bR),SR=Ue({},Ka,{data:0}),uw=xn(SR),kR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ER={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CR[t])?!!e[t]:!1}function Uy(){return TR}var _R=Ue({},Gc,{key:function(t){if(t.key){var e=kR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=td(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ER[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uy,charCode:function(t){return t.type==="keypress"?td(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?td(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NR=xn(_R),OR=Ue({},qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dw=xn(OR),AR=Ue({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uy}),RR=xn(AR),PR=Ue({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),MR=xn(PR),IR=Ue({},qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jR=xn(IR),DR=[9,13,27,32],Hy=Hr&&"CompositionEvent"in window,Ml=null;Hr&&"documentMode"in document&&(Ml=document.documentMode);var LR=Hr&&"TextEvent"in window&&!Ml,rk=Hr&&(!Hy||Ml&&8<Ml&&11>=Ml),hw=" ",fw=!1;function sk(t,e){switch(t){case"keyup":return DR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ik(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function $R(t,e){switch(t){case"compositionend":return ik(e);case"keypress":return e.which!==32?null:(fw=!0,hw);case"textInput":return t=e.data,t===hw&&fw?null:t;default:return null}}function zR(t,e){if(Ko)return t==="compositionend"||!Hy&&sk(t,e)?(t=nk(),ed=By=Ps=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rk&&e.locale!=="ko"?null:e.data;default:return null}}var BR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BR[t.type]:e==="textarea"}function ok(t,e,n,r){LS(r),e=Ed(e,"onChange"),0<e.length&&(n=new Fy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Il=null,sc=null;function FR(t){yk(t,0)}function Kh(t){var e=Qo(t);if(AS(e))return t}function UR(t,e){if(t==="change")return e}var ak=!1;if(Hr){var Yf;if(Hr){var Xf="oninput"in document;if(!Xf){var mw=document.createElement("div");mw.setAttribute("oninput","return;"),Xf=typeof mw.oninput=="function"}Yf=Xf}else Yf=!1;ak=Yf&&(!document.documentMode||9<document.documentMode)}function gw(){Il&&(Il.detachEvent("onpropertychange",lk),sc=Il=null)}function lk(t){if(t.propertyName==="value"&&Kh(sc)){var e=[];ok(e,sc,t,jy(t)),FS(FR,e)}}function HR(t,e,n){t==="focusin"?(gw(),Il=e,sc=n,Il.attachEvent("onpropertychange",lk)):t==="focusout"&&gw()}function VR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kh(sc)}function WR(t,e){if(t==="click")return Kh(e)}function qR(t,e){if(t==="input"||t==="change")return Kh(e)}function KR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:KR;function ic(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!um.call(e,s)||!rr(t[s],e[s]))return!1}return!0}function yw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vw(t,e){var n=yw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yw(n)}}function ck(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ck(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uk(){for(var t=window,e=yd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yd(t.document)}return e}function Vy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GR(t){var e=uk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ck(n.ownerDocument.documentElement,n)){if(r!==null&&Vy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vw(n,i);var o=vw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JR=Hr&&"documentMode"in document&&11>=document.documentMode,Go=null,Om=null,jl=null,Am=!1;function ww(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Am||Go==null||Go!==yd(r)||(r=Go,"selectionStart"in r&&Vy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jl&&ic(jl,r)||(jl=r,r=Ed(Om,"onSelect"),0<r.length&&(e=new Fy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Go)))}function gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jo={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},Zf={},dk={};Hr&&(dk=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Gh(t){if(Zf[t])return Zf[t];if(!Jo[t])return t;var e=Jo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dk)return Zf[t]=e[n];return t}var hk=Gh("animationend"),fk=Gh("animationiteration"),pk=Gh("animationstart"),mk=Gh("transitionend"),gk=new Map,bw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(t,e){gk.set(t,e),mo(e,[t])}for(var ep=0;ep<bw.length;ep++){var tp=bw[ep],QR=tp.toLowerCase(),YR=tp[0].toUpperCase()+tp.slice(1);ii(QR,"on"+YR)}ii(hk,"onAnimationEnd");ii(fk,"onAnimationIteration");ii(pk,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(mk,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function xw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QA(r,e,void 0,t),t.currentTarget=null}function yk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;xw(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;xw(s,a,c),i=l}}}if(wd)throw t=Cm,wd=!1,Cm=null,t}function Pe(t,e){var n=e[jm];n===void 0&&(n=e[jm]=new Set);var r=t+"__bubble";n.has(r)||(vk(e,t,2,!1),n.add(r))}function np(t,e,n){var r=0;e&&(r|=4),vk(n,t,r,e)}var yu="_reactListening"+Math.random().toString(36).slice(2);function oc(t){if(!t[yu]){t[yu]=!0,CS.forEach(function(n){n!=="selectionchange"&&(XR.has(n)||np(n,!1,t),np(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yu]||(e[yu]=!0,np("selectionchange",!1,e))}}function vk(t,e,n,r){switch(tk(e)){case 1:var s=hR;break;case 4:s=fR;break;default:s=zy}n=s.bind(null,e,n,t),s=void 0,!Em||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function rp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ni(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}FS(function(){var c=i,u=jy(n),d=[];e:{var f=gk.get(t);if(f!==void 0){var h=Fy,p=t;switch(t){case"keypress":if(td(n)===0)break e;case"keydown":case"keyup":h=NR;break;case"focusin":p="focus",h=Qf;break;case"focusout":p="blur",h=Qf;break;case"beforeblur":case"afterblur":h=Qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=cw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=gR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=RR;break;case hk:case fk:case pk:h=wR;break;case mk:h=MR;break;case"scroll":h=pR;break;case"wheel":h=jR;break;case"copy":case"cut":case"paste":h=xR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=dw}var m=(e&4)!==0,y=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var w=c,b;w!==null;){b=w;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=ec(w,v),S!=null&&m.push(ac(w,S,b)))),y)break;w=w.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Sm&&(p=n.relatedTarget||n.fromElement)&&(Ni(p)||p[Vr]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Ni(p):null,p!==null&&(y=go(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=cw,S="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=dw,S="onPointerLeave",v="onPointerEnter",w="pointer"),y=h==null?f:Qo(h),b=p==null?f:Qo(p),f=new m(S,w+"leave",h,n,u),f.target=y,f.relatedTarget=b,S=null,Ni(u)===c&&(m=new m(v,w+"enter",p,n,u),m.target=b,m.relatedTarget=y,S=m),y=S,h&&p)t:{for(m=h,v=p,w=0,b=m;b;b=To(b))w++;for(b=0,S=v;S;S=To(S))b++;for(;0<w-b;)m=To(m),w--;for(;0<b-w;)v=To(v),b--;for(;w--;){if(m===v||v!==null&&m===v.alternate)break t;m=To(m),v=To(v)}m=null}else m=null;h!==null&&Sw(d,f,h,m,!1),p!==null&&y!==null&&Sw(d,y,p,m,!0)}}e:{if(f=c?Qo(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=UR;else if(pw(f))if(ak)k=qR;else{k=VR;var C=HR}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=WR);if(k&&(k=k(t,c))){ok(d,k,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&ym(f,"number",f.value)}switch(C=c?Qo(c):window,t){case"focusin":(pw(C)||C.contentEditable==="true")&&(Go=C,Om=c,jl=null);break;case"focusout":jl=Om=Go=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,ww(d,n,u);break;case"selectionchange":if(JR)break;case"keydown":case"keyup":ww(d,n,u)}var E;if(Hy)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ko?sk(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(rk&&n.locale!=="ko"&&(Ko||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ko&&(E=nk()):(Ps=u,By="value"in Ps?Ps.value:Ps.textContent,Ko=!0)),C=Ed(c,_),0<C.length&&(_=new uw(_,t,null,n,u),d.push({event:_,listeners:C}),E?_.data=E:(E=ik(n),E!==null&&(_.data=E)))),(E=LR?$R(t,n):zR(t,n))&&(c=Ed(c,"onBeforeInput"),0<c.length&&(u=new uw("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}yk(d,e)})}function ac(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ed(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ec(t,n),i!=null&&r.unshift(ac(t,i,s)),i=ec(t,e),i!=null&&r.push(ac(t,i,s))),t=t.return}return r}function To(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ec(n,i),l!=null&&o.unshift(ac(n,l,a))):s||(l=ec(n,i),l!=null&&o.push(ac(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ZR=/\r\n?/g,eP=/\u0000|\uFFFD/g;function kw(t){return(typeof t=="string"?t:""+t).replace(ZR,`
`).replace(eP,"")}function vu(t,e,n){if(e=kw(e),kw(t)!==e&&n)throw Error(D(425))}function Cd(){}var Rm=null,Pm=null;function Mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Im=typeof setTimeout=="function"?setTimeout:void 0,tP=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,nP=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(t){return Ew.resolve(null).then(t).catch(rP)}:Im;function rP(t){setTimeout(function(){throw t})}function sp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),rc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);rc(e)}function Fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),pr="__reactFiber$"+Ga,lc="__reactProps$"+Ga,Vr="__reactContainer$"+Ga,jm="__reactEvents$"+Ga,sP="__reactListeners$"+Ga,iP="__reactHandles$"+Ga;function Ni(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vr]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cw(t);t!==null;){if(n=t[pr])return n;t=Cw(t)}return e}t=n,n=t.parentNode}return null}function Jc(t){return t=t[pr]||t[Vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Jh(t){return t[lc]||null}var Dm=[],Yo=-1;function oi(t){return{current:t}}function Ie(t){0>Yo||(t.current=Dm[Yo],Dm[Yo]=null,Yo--)}function Oe(t,e){Yo++,Dm[Yo]=t.current,t.current=e}var ei={},Lt=oi(ei),rn=oi(!1),Zi=ei;function Aa(t,e){var n=t.type.contextTypes;if(!n)return ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function sn(t){return t=t.childContextTypes,t!=null}function Td(){Ie(rn),Ie(Lt)}function Tw(t,e,n){if(Lt.current!==ei)throw Error(D(168));Oe(Lt,e),Oe(rn,n)}function wk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(D(108,HA(t)||"Unknown",s));return Ue({},n,r)}function _d(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ei,Zi=Lt.current,Oe(Lt,t),Oe(rn,rn.current),!0}function _w(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=wk(t,e,Zi),r.__reactInternalMemoizedMergedChildContext=t,Ie(rn),Ie(Lt),Oe(Lt,t)):Ie(rn),Oe(rn,n)}var Ir=null,Qh=!1,ip=!1;function bk(t){Ir===null?Ir=[t]:Ir.push(t)}function oP(t){Qh=!0,bk(t)}function ai(){if(!ip&&Ir!==null){ip=!0;var t=0,e=Ee;try{var n=Ir;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,Qh=!1}catch(s){throw Ir!==null&&(Ir=Ir.slice(t+1)),WS(Dy,ai),s}finally{Ee=e,ip=!1}}return null}var Xo=[],Zo=0,Nd=null,Od=0,On=[],An=0,eo=null,Lr=1,$r="";function xi(t,e){Xo[Zo++]=Od,Xo[Zo++]=Nd,Nd=t,Od=e}function xk(t,e,n){On[An++]=Lr,On[An++]=$r,On[An++]=eo,eo=t;var r=Lr;t=$r;var s=32-tr(r)-1;r&=~(1<<s),n+=1;var i=32-tr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lr=1<<32-tr(e)+s|n<<s|r,$r=i+t}else Lr=1<<i|n<<s|r,$r=t}function Wy(t){t.return!==null&&(xi(t,1),xk(t,1,0))}function qy(t){for(;t===Nd;)Nd=Xo[--Zo],Xo[Zo]=null,Od=Xo[--Zo],Xo[Zo]=null;for(;t===eo;)eo=On[--An],On[An]=null,$r=On[--An],On[An]=null,Lr=On[--An],On[An]=null}var gn=null,mn=null,Le=!1,Xn=null;function Sk(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gn=t,mn=Fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eo!==null?{id:Lr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gn=t,mn=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $m(t){if(Le){var e=mn;if(e){var n=e;if(!Nw(t,e)){if(Lm(t))throw Error(D(418));e=Fs(n.nextSibling);var r=gn;e&&Nw(t,e)?Sk(r,n):(t.flags=t.flags&-4097|2,Le=!1,gn=t)}}else{if(Lm(t))throw Error(D(418));t.flags=t.flags&-4097|2,Le=!1,gn=t}}}function Ow(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gn=t}function wu(t){if(t!==gn)return!1;if(!Le)return Ow(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mm(t.type,t.memoizedProps)),e&&(e=mn)){if(Lm(t))throw kk(),Error(D(418));for(;e;)Sk(t,e),e=Fs(e.nextSibling)}if(Ow(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=Fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=gn?Fs(t.stateNode.nextSibling):null;return!0}function kk(){for(var t=mn;t;)t=Fs(t.nextSibling)}function Ra(){mn=gn=null,Le=!1}function Ky(t){Xn===null?Xn=[t]:Xn.push(t)}var aP=Qr.ReactCurrentBatchConfig;function dl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function bu(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Aw(t){var e=t._init;return e(t._payload)}function Ek(t){function e(v,w){if(t){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Ws(v,w),v.index=0,v.sibling=null,v}function i(v,w,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,b,S){return w===null||w.tag!==6?(w=hp(b,v.mode,S),w.return=v,w):(w=s(w,b),w.return=v,w)}function l(v,w,b,S){var k=b.type;return k===qo?u(v,w,b.props.children,S,b.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===fs&&Aw(k)===w.type)?(S=s(w,b.props),S.ref=dl(v,w,b),S.return=v,S):(S=ld(b.type,b.key,b.props,null,v.mode,S),S.ref=dl(v,w,b),S.return=v,S)}function c(v,w,b,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=fp(b,v.mode,S),w.return=v,w):(w=s(w,b.children||[]),w.return=v,w)}function u(v,w,b,S,k){return w===null||w.tag!==7?(w=Ki(b,v.mode,S,k),w.return=v,w):(w=s(w,b),w.return=v,w)}function d(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=hp(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case cu:return b=ld(w.type,w.key,w.props,null,v.mode,b),b.ref=dl(v,null,w),b.return=v,b;case Wo:return w=fp(w,v.mode,b),w.return=v,w;case fs:var S=w._init;return d(v,S(w._payload),b)}if(bl(w)||ol(w))return w=Ki(w,v.mode,b,null),w.return=v,w;bu(v,w)}return null}function f(v,w,b,S){var k=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(v,w,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cu:return b.key===k?l(v,w,b,S):null;case Wo:return b.key===k?c(v,w,b,S):null;case fs:return k=b._init,f(v,w,k(b._payload),S)}if(bl(b)||ol(b))return k!==null?null:u(v,w,b,S,null);bu(v,b)}return null}function h(v,w,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,a(w,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cu:return v=v.get(S.key===null?b:S.key)||null,l(w,v,S,k);case Wo:return v=v.get(S.key===null?b:S.key)||null,c(w,v,S,k);case fs:var C=S._init;return h(v,w,b,C(S._payload),k)}if(bl(S)||ol(S))return v=v.get(b)||null,u(w,v,S,k,null);bu(w,S)}return null}function p(v,w,b,S){for(var k=null,C=null,E=w,_=w=0,A=null;E!==null&&_<b.length;_++){E.index>_?(A=E,E=null):A=E.sibling;var N=f(v,E,b[_],S);if(N===null){E===null&&(E=A);break}t&&E&&N.alternate===null&&e(v,E),w=i(N,w,_),C===null?k=N:C.sibling=N,C=N,E=A}if(_===b.length)return n(v,E),Le&&xi(v,_),k;if(E===null){for(;_<b.length;_++)E=d(v,b[_],S),E!==null&&(w=i(E,w,_),C===null?k=E:C.sibling=E,C=E);return Le&&xi(v,_),k}for(E=r(v,E);_<b.length;_++)A=h(E,v,_,b[_],S),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?_:A.key),w=i(A,w,_),C===null?k=A:C.sibling=A,C=A);return t&&E.forEach(function(z){return e(v,z)}),Le&&xi(v,_),k}function m(v,w,b,S){var k=ol(b);if(typeof k!="function")throw Error(D(150));if(b=k.call(b),b==null)throw Error(D(151));for(var C=k=null,E=w,_=w=0,A=null,N=b.next();E!==null&&!N.done;_++,N=b.next()){E.index>_?(A=E,E=null):A=E.sibling;var z=f(v,E,N.value,S);if(z===null){E===null&&(E=A);break}t&&E&&z.alternate===null&&e(v,E),w=i(z,w,_),C===null?k=z:C.sibling=z,C=z,E=A}if(N.done)return n(v,E),Le&&xi(v,_),k;if(E===null){for(;!N.done;_++,N=b.next())N=d(v,N.value,S),N!==null&&(w=i(N,w,_),C===null?k=N:C.sibling=N,C=N);return Le&&xi(v,_),k}for(E=r(v,E);!N.done;_++,N=b.next())N=h(E,v,_,N.value,S),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?_:N.key),w=i(N,w,_),C===null?k=N:C.sibling=N,C=N);return t&&E.forEach(function(L){return e(v,L)}),Le&&xi(v,_),k}function y(v,w,b,S){if(typeof b=="object"&&b!==null&&b.type===qo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case cu:e:{for(var k=b.key,C=w;C!==null;){if(C.key===k){if(k=b.type,k===qo){if(C.tag===7){n(v,C.sibling),w=s(C,b.props.children),w.return=v,v=w;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===fs&&Aw(k)===C.type){n(v,C.sibling),w=s(C,b.props),w.ref=dl(v,C,b),w.return=v,v=w;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===qo?(w=Ki(b.props.children,v.mode,S,b.key),w.return=v,v=w):(S=ld(b.type,b.key,b.props,null,v.mode,S),S.ref=dl(v,w,b),S.return=v,v=S)}return o(v);case Wo:e:{for(C=b.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(v,w.sibling),w=s(w,b.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=fp(b,v.mode,S),w.return=v,v=w}return o(v);case fs:return C=b._init,y(v,w,C(b._payload),S)}if(bl(b))return p(v,w,b,S);if(ol(b))return m(v,w,b,S);bu(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(v,w.sibling),w=s(w,b),w.return=v,v=w):(n(v,w),w=hp(b,v.mode,S),w.return=v,v=w),o(v)):n(v,w)}return y}var Pa=Ek(!0),Ck=Ek(!1),Ad=oi(null),Rd=null,ea=null,Gy=null;function Jy(){Gy=ea=Rd=null}function Qy(t){var e=Ad.current;Ie(Ad),t._currentValue=e}function zm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ca(t,e){Rd=t,Gy=ea=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(Gy!==t)if(t={context:t,memoizedValue:e,next:null},ea===null){if(Rd===null)throw Error(D(308));ea=t,Rd.dependencies={lanes:0,firstContext:t}}else ea=ea.next=t;return e}var Oi=null;function Yy(t){Oi===null?Oi=[t]:Oi.push(t)}function Tk(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wr(t,r)}function Wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ps=!1;function Xy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _k(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wr(t,n)}return s=r.interleaved,s===null?(e.next=e,Yy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wr(t,n)}function nd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ly(t,n)}}function Rw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pd(t,e,n,r){var s=t.updateQueue;ps=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ue({},d,f);break e;case 2:ps=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);no|=o,t.lanes=o,t.memoizedState=d}}function Pw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Qc={},wr=oi(Qc),cc=oi(Qc),uc=oi(Qc);function Ai(t){if(t===Qc)throw Error(D(174));return t}function Zy(t,e){switch(Oe(uc,e),Oe(cc,t),Oe(wr,Qc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wm(e,t)}Ie(wr),Oe(wr,e)}function Ma(){Ie(wr),Ie(cc),Ie(uc)}function Nk(t){Ai(uc.current);var e=Ai(wr.current),n=wm(e,t.type);e!==n&&(Oe(cc,t),Oe(wr,n))}function ev(t){cc.current===t&&(Ie(wr),Ie(cc))}var ze=oi(0);function Md(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var op=[];function tv(){for(var t=0;t<op.length;t++)op[t]._workInProgressVersionPrimary=null;op.length=0}var rd=Qr.ReactCurrentDispatcher,ap=Qr.ReactCurrentBatchConfig,to=0,Fe=null,dt=null,mt=null,Id=!1,Dl=!1,dc=0,lP=0;function Mt(){throw Error(D(321))}function nv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function rv(t,e,n,r,s,i){if(to=i,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rd.current=t===null||t.memoizedState===null?hP:fP,t=n(r,s),Dl){i=0;do{if(Dl=!1,dc=0,25<=i)throw Error(D(301));i+=1,mt=dt=null,e.updateQueue=null,rd.current=pP,t=n(r,s)}while(Dl)}if(rd.current=jd,e=dt!==null&&dt.next!==null,to=0,mt=dt=Fe=null,Id=!1,e)throw Error(D(300));return t}function sv(){var t=dc!==0;return dc=0,t}function lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Fe.memoizedState=mt=t:mt=mt.next=t,mt}function $n(){if(dt===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=mt===null?Fe.memoizedState:mt.next;if(e!==null)mt=e,dt=t;else{if(t===null)throw Error(D(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?Fe.memoizedState=mt=t:mt=mt.next=t}return mt}function hc(t,e){return typeof e=="function"?e(t):e}function lp(t){var e=$n(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((to&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Fe.lanes|=u,no|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,rr(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Fe.lanes|=i,no|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cp(t){var e=$n(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);rr(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ok(){}function Ak(t,e){var n=Fe,r=$n(),s=e(),i=!rr(r.memoizedState,s);if(i&&(r.memoizedState=s,nn=!0),r=r.queue,iv(Mk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,fc(9,Pk.bind(null,n,r,s,e),void 0,null),bt===null)throw Error(D(349));to&30||Rk(n,e,s)}return s}function Rk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pk(t,e,n,r){e.value=n,e.getSnapshot=r,Ik(e)&&jk(t)}function Mk(t,e,n){return n(function(){Ik(e)&&jk(t)})}function Ik(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function jk(t){var e=Wr(t,1);e!==null&&nr(e,t,1,-1)}function Mw(t){var e=lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:t},e.queue=t,t=t.dispatch=dP.bind(null,Fe,t),[e.memoizedState,t]}function fc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dk(){return $n().memoizedState}function sd(t,e,n,r){var s=lr();Fe.flags|=t,s.memoizedState=fc(1|e,n,void 0,r===void 0?null:r)}function Yh(t,e,n,r){var s=$n();r=r===void 0?null:r;var i=void 0;if(dt!==null){var o=dt.memoizedState;if(i=o.destroy,r!==null&&nv(r,o.deps)){s.memoizedState=fc(e,n,i,r);return}}Fe.flags|=t,s.memoizedState=fc(1|e,n,i,r)}function Iw(t,e){return sd(8390656,8,t,e)}function iv(t,e){return Yh(2048,8,t,e)}function Lk(t,e){return Yh(4,2,t,e)}function $k(t,e){return Yh(4,4,t,e)}function zk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bk(t,e,n){return n=n!=null?n.concat([t]):null,Yh(4,4,zk.bind(null,e,t),n)}function ov(){}function Fk(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uk(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hk(t,e,n){return to&21?(rr(n,e)||(n=GS(),Fe.lanes|=n,no|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function cP(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=ap.transition;ap.transition={};try{t(!1),e()}finally{Ee=n,ap.transition=r}}function Vk(){return $n().memoizedState}function uP(t,e,n){var r=Vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wk(t))qk(e,n);else if(n=Tk(t,e,n,r),n!==null){var s=qt();nr(n,t,r,s),Kk(n,e,r)}}function dP(t,e,n){var r=Vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wk(t))qk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,rr(a,o)){var l=e.interleaved;l===null?(s.next=s,Yy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Tk(t,e,s,r),n!==null&&(s=qt(),nr(n,t,r,s),Kk(n,e,r))}}function Wk(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function qk(t,e){Dl=Id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ly(t,n)}}var jd={readContext:Ln,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},hP={readContext:Ln,useCallback:function(t,e){return lr().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:Iw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sd(4194308,4,zk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return sd(4,2,t,e)},useMemo:function(t,e){var n=lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uP.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=lr();return t={current:t},e.memoizedState=t},useState:Mw,useDebugValue:ov,useDeferredValue:function(t){return lr().memoizedState=t},useTransition:function(){var t=Mw(!1),e=t[0];return t=cP.bind(null,t[1]),lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,s=lr();if(Le){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),bt===null)throw Error(D(349));to&30||Rk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Iw(Mk.bind(null,r,i,t),[t]),r.flags|=2048,fc(9,Pk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=lr(),e=bt.identifierPrefix;if(Le){var n=$r,r=Lr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fP={readContext:Ln,useCallback:Fk,useContext:Ln,useEffect:iv,useImperativeHandle:Bk,useInsertionEffect:Lk,useLayoutEffect:$k,useMemo:Uk,useReducer:lp,useRef:Dk,useState:function(){return lp(hc)},useDebugValue:ov,useDeferredValue:function(t){var e=$n();return Hk(e,dt.memoizedState,t)},useTransition:function(){var t=lp(hc)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Ok,useSyncExternalStore:Ak,useId:Vk,unstable_isNewReconciler:!1},pP={readContext:Ln,useCallback:Fk,useContext:Ln,useEffect:iv,useImperativeHandle:Bk,useInsertionEffect:Lk,useLayoutEffect:$k,useMemo:Uk,useReducer:cp,useRef:Dk,useState:function(){return cp(hc)},useDebugValue:ov,useDeferredValue:function(t){var e=$n();return dt===null?e.memoizedState=t:Hk(e,dt.memoizedState,t)},useTransition:function(){var t=cp(hc)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Ok,useSyncExternalStore:Ak,useId:Vk,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xh={isMounted:function(t){return(t=t._reactInternals)?go(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),s=Vs(t),i=Br(r,s);i.payload=e,n!=null&&(i.callback=n),e=Us(t,i,s),e!==null&&(nr(e,t,s,r),nd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),s=Vs(t),i=Br(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Us(t,i,s),e!==null&&(nr(e,t,s,r),nd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=Vs(t),s=Br(n,r);s.tag=2,e!=null&&(s.callback=e),e=Us(t,s,r),e!==null&&(nr(e,t,r,n),nd(e,t,r))}};function jw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ic(n,r)||!ic(s,i):!0}function Gk(t,e,n){var r=!1,s=ei,i=e.contextType;return typeof i=="object"&&i!==null?i=Ln(i):(s=sn(e)?Zi:Lt.current,r=e.contextTypes,i=(r=r!=null)?Aa(t,s):ei),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xh.enqueueReplaceState(e,e.state,null)}function Fm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ln(i):(i=sn(e)?Zi:Lt.current,s.context=Aa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xh.enqueueReplaceState(s,s.state,null),Pd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ia(t,e){try{var n="",r=e;do n+=UA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function up(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Um(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mP=typeof WeakMap=="function"?WeakMap:Map;function Jk(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ld||(Ld=!0,Xm=r),Um(t,e)},n}function Qk(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Um(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Um(t,e),typeof r!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OP.bind(null,t,e,n),e.then(t,t))}function $w(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Us(n,e,1))),n.lanes|=1),t)}var gP=Qr.ReactCurrentOwner,nn=!1;function Ht(t,e,n,r){e.child=t===null?Ck(e,null,n,r):Pa(e,t.child,n,r)}function Bw(t,e,n,r,s){n=n.render;var i=e.ref;return ca(e,s),r=rv(t,e,n,r,i,s),n=sv(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qr(t,e,s)):(Le&&n&&Wy(e),e.flags|=1,Ht(t,e,r,s),e.child)}function Fw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Yk(t,e,i,r,s)):(t=ld(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ic,n(o,r)&&t.ref===e.ref)return qr(t,e,s)}return e.flags|=1,t=Ws(i,r),t.ref=e.ref,t.return=e,e.child=t}function Yk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ic(i,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,qr(t,e,s)}return Hm(t,e,n,r,s)}function Xk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(na,un),un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(na,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Oe(na,un),un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Oe(na,un),un|=r;return Ht(t,e,s,n),e.child}function Zk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hm(t,e,n,r,s){var i=sn(n)?Zi:Lt.current;return i=Aa(e,i),ca(e,s),n=rv(t,e,n,r,i,s),r=sv(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qr(t,e,s)):(Le&&r&&Wy(e),e.flags|=1,Ht(t,e,n,s),e.child)}function Uw(t,e,n,r,s){if(sn(n)){var i=!0;_d(e)}else i=!1;if(ca(e,s),e.stateNode===null)id(t,e),Gk(e,n,r),Fm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=sn(n)?Zi:Lt.current,c=Aa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Dw(e,o,r,c),ps=!1;var f=e.memoizedState;o.state=f,Pd(e,r,o,s),l=e.memoizedState,a!==r||f!==l||rn.current||ps?(typeof u=="function"&&(Bm(e,n,u,r),l=e.memoizedState),(a=ps||jw(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_k(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:qn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ln(l):(l=sn(n)?Zi:Lt.current,l=Aa(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Dw(e,o,r,l),ps=!1,f=e.memoizedState,o.state=f,Pd(e,r,o,s);var p=e.memoizedState;a!==d||f!==p||rn.current||ps?(typeof h=="function"&&(Bm(e,n,h,r),p=e.memoizedState),(c=ps||jw(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Vm(t,e,n,r,i,s)}function Vm(t,e,n,r,s,i){Zk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&_w(e,n,!1),qr(t,e,i);r=e.stateNode,gP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pa(e,t.child,null,i),e.child=Pa(e,null,a,i)):Ht(t,e,a,i),e.memoizedState=r.state,s&&_w(e,n,!0),e.child}function eE(t){var e=t.stateNode;e.pendingContext?Tw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tw(t,e.context,!1),Zy(t,e.containerInfo)}function Hw(t,e,n,r,s){return Ra(),Ky(s),e.flags|=256,Ht(t,e,n,r),e.child}var Wm={dehydrated:null,treeContext:null,retryLane:0};function qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function tE(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Oe(ze,s&1),t===null)return $m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tf(o,r,0,null),t=Ki(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qm(n),e.memoizedState=Wm,t):av(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return yP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ws(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ws(a,i):(i=Ki(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Wm,r}return i=t.child,t=i.sibling,r=Ws(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function av(t,e){return e=tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xu(t,e,n,r){return r!==null&&Ky(r),Pa(e,t.child,null,n),t=av(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=up(Error(D(422))),xu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tf({mode:"visible",children:r.children},s,0,null),i=Ki(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pa(e,t.child,null,o),e.child.memoizedState=qm(o),e.memoizedState=Wm,i);if(!(e.mode&1))return xu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=up(i,r,void 0),xu(t,e,o,r)}if(a=(o&t.childLanes)!==0,nn||a){if(r=bt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wr(t,s),nr(r,t,s,-1))}return fv(),r=up(Error(D(421))),xu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=AP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,mn=Fs(s.nextSibling),gn=e,Le=!0,Xn=null,t!==null&&(On[An++]=Lr,On[An++]=$r,On[An++]=eo,Lr=t.id,$r=t.overflow,eo=e),e=av(e,r.children),e.flags|=4096,e)}function Vw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zm(t.return,e,n)}function dp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function nE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ht(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vw(t,n,e);else if(t.tag===19)Vw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Md(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),dp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Md(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}dp(e,!0,n,null,i);break;case"together":dp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Ws(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ws(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vP(t,e,n){switch(e.tag){case 3:eE(e),Ra();break;case 5:Nk(e);break;case 1:sn(e.type)&&_d(e);break;case 4:Zy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Oe(Ad,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?tE(t,e,n):(Oe(ze,ze.current&1),t=qr(t,e,n),t!==null?t.sibling:null);Oe(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,Xk(t,e,n)}return qr(t,e,n)}var rE,Km,sE,iE;rE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Km=function(){};sE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ai(wr.current);var i=null;switch(n){case"input":s=mm(t,s),r=mm(t,r),i=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),i=[];break;case"textarea":s=vm(t,s),r=vm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cd)}bm(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};iE=function(t,e,n,r){n!==r&&(e.flags|=4)};function hl(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wP(t,e,n){var r=e.pendingProps;switch(qy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return sn(e.type)&&Td(),It(e),null;case 3:return r=e.stateNode,Ma(),Ie(rn),Ie(Lt),tv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(tg(Xn),Xn=null))),Km(t,e),It(e),null;case 5:ev(e);var s=Ai(uc.current);if(n=e.type,t!==null&&e.stateNode!=null)sE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return It(e),null}if(t=Ai(wr.current),wu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pr]=e,r[lc]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Sl.length;s++)Pe(Sl[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Z0(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":tw(r,i),Pe("invalid",r)}bm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&vu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&vu(r.textContent,a,t),s=["children",""+a]):Xl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":uu(r),ew(r,i,!0);break;case"textarea":uu(r),nw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pr]=e,t[lc]=r,rE(t,e,!1,!1),e.stateNode=t;e:{switch(o=xm(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sl.length;s++)Pe(Sl[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":Z0(t,r),s=mm(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":tw(t,r),s=vm(t,r),Pe("invalid",t);break;default:s=r}bm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?DS(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IS(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zl(t,l):typeof l=="number"&&Zl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pe("scroll",t):l!=null&&Ry(t,i,l,o))}switch(n){case"input":uu(t),ew(t,r,!1);break;case"textarea":uu(t),nw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ia(t,!!r.multiple,i,!1):r.defaultValue!=null&&ia(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return It(e),null;case 6:if(t&&e.stateNode!=null)iE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Ai(uc.current),Ai(wr.current),wu(e)){if(r=e.stateNode,n=e.memoizedProps,r[pr]=e,(i=r.nodeValue!==n)&&(t=gn,t!==null))switch(t.tag){case 3:vu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pr]=e,e.stateNode=r}return It(e),null;case 13:if(Ie(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&mn!==null&&e.mode&1&&!(e.flags&128))kk(),Ra(),e.flags|=98560,i=!1;else if(i=wu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[pr]=e}else Ra(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),i=!1}else Xn!==null&&(tg(Xn),Xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?ht===0&&(ht=3):fv())),e.updateQueue!==null&&(e.flags|=4),It(e),null);case 4:return Ma(),Km(t,e),t===null&&oc(e.stateNode.containerInfo),It(e),null;case 10:return Qy(e.type._context),It(e),null;case 17:return sn(e.type)&&Td(),It(e),null;case 19:if(Ie(ze),i=e.memoizedState,i===null)return It(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)hl(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Md(t),o!==null){for(e.flags|=128,hl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&et()>ja&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Md(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return It(e),null}else 2*et()-i.renderingStartTime>ja&&n!==1073741824&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=et(),e.sibling=null,n=ze.current,Oe(ze,r?n&1|2:n&1),e):(It(e),null);case 22:case 23:return hv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function bP(t,e){switch(qy(e),e.tag){case 1:return sn(e.type)&&Td(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),Ie(rn),Ie(Lt),tv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ev(e),null;case 13:if(Ie(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Ra()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(ze),null;case 4:return Ma(),null;case 10:return Qy(e.type._context),null;case 22:case 23:return hv(),null;case 24:return null;default:return null}}var Su=!1,Dt=!1,xP=typeof WeakSet=="function"?WeakSet:Set,V=null;function ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Gm(t,e,n){try{n()}catch(r){Je(t,e,r)}}var Ww=!1;function SP(t,e){if(Rm=Sd,t=uk(),Vy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pm={focusedElem:t,selectionRange:n},Sd=!1,V=e;V!==null;)if(e=V,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,V=t;else for(;V!==null;){e=V;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:qn(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){Je(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}return p=Ww,Ww=!1,p}function Ll(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Gm(e,n,i)}s=s.next}while(s!==r)}}function Zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oE(t){var e=t.alternate;e!==null&&(t.alternate=null,oE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[lc],delete e[jm],delete e[sP],delete e[iP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aE(t){return t.tag===5||t.tag===3||t.tag===4}function qw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cd));else if(r!==4&&(t=t.child,t!==null))for(Qm(t,e,n),t=t.sibling;t!==null;)Qm(t,e,n),t=t.sibling}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}var Ct=null,Qn=!1;function ss(t,e,n){for(n=n.child;n!==null;)lE(t,e,n),n=n.sibling}function lE(t,e,n){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(Wh,n)}catch{}switch(n.tag){case 5:Dt||ta(n,e);case 6:var r=Ct,s=Qn;Ct=null,ss(t,e,n),Ct=r,Qn=s,Ct!==null&&(Qn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Qn?(t=Ct,n=n.stateNode,t.nodeType===8?sp(t.parentNode,n):t.nodeType===1&&sp(t,n),rc(t)):sp(Ct,n.stateNode));break;case 4:r=Ct,s=Qn,Ct=n.stateNode.containerInfo,Qn=!0,ss(t,e,n),Ct=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Gm(n,e,o),s=s.next}while(s!==r)}ss(t,e,n);break;case 1:if(!Dt&&(ta(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}ss(t,e,n);break;case 21:ss(t,e,n);break;case 22:n.mode&1?(Dt=(r=Dt)||n.memoizedState!==null,ss(t,e,n),Dt=r):ss(t,e,n);break;default:ss(t,e,n)}}function Kw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xP),e.forEach(function(r){var s=RP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Qn=!1;break e;case 3:Ct=a.stateNode.containerInfo,Qn=!0;break e;case 4:Ct=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(Ct===null)throw Error(D(160));lE(i,o,s),Ct=null,Qn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Je(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cE(e,t),e=e.sibling}function cE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),or(t),r&4){try{Ll(3,t,t.return),Zh(3,t)}catch(m){Je(t,t.return,m)}try{Ll(5,t,t.return)}catch(m){Je(t,t.return,m)}}break;case 1:Un(e,t),or(t),r&512&&n!==null&&ta(n,n.return);break;case 5:if(Un(e,t),or(t),r&512&&n!==null&&ta(n,n.return),t.flags&32){var s=t.stateNode;try{Zl(s,"")}catch(m){Je(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&RS(s,i),xm(a,o);var c=xm(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?DS(s,d):u==="dangerouslySetInnerHTML"?IS(s,d):u==="children"?Zl(s,d):Ry(s,u,d,c)}switch(a){case"input":gm(s,i);break;case"textarea":PS(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?ia(s,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?ia(s,!!i.multiple,i.defaultValue,!0):ia(s,!!i.multiple,i.multiple?[]:"",!1))}s[lc]=i}catch(m){Je(t,t.return,m)}}break;case 6:if(Un(e,t),or(t),r&4){if(t.stateNode===null)throw Error(D(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){Je(t,t.return,m)}}break;case 3:if(Un(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rc(e.containerInfo)}catch(m){Je(t,t.return,m)}break;case 4:Un(e,t),or(t);break;case 13:Un(e,t),or(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(uv=et())),r&4&&Kw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(c=Dt)||u,Un(e,t),Dt=c):Un(e,t),or(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(V=t,u=t.child;u!==null;){for(d=V=u;V!==null;){switch(f=V,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ll(4,f,f.return);break;case 1:ta(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Je(r,n,m)}}break;case 5:ta(f,f.return);break;case 22:if(f.memoizedState!==null){Jw(d);continue}}h!==null?(h.return=f,V=h):Jw(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jS("display",o))}catch(m){Je(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Je(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Un(e,t),or(t),r&4&&Kw(t);break;case 21:break;default:Un(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aE(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Zl(s,""),r.flags&=-33);var i=qw(t);Ym(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qw(t);Qm(t,a,o);break;default:throw Error(D(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kP(t,e,n){V=t,uE(t)}function uE(t,e,n){for(var r=(t.mode&1)!==0;V!==null;){var s=V,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Su;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Dt;a=Su;var c=Dt;if(Su=o,(Dt=l)&&!c)for(V=s;V!==null;)o=V,l=o.child,o.tag===22&&o.memoizedState!==null?Qw(s):l!==null?(l.return=o,V=l):Qw(s);for(;i!==null;)V=i,uE(i),i=i.sibling;V=s,Su=a,Dt=c}Gw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,V=i):Gw(t)}}function Gw(t){for(;V!==null;){var e=V;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Zh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&rc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Dt||e.flags&512&&Jm(e)}catch(f){Je(e,e.return,f)}}if(e===t){V=null;break}if(n=e.sibling,n!==null){n.return=e.return,V=n;break}V=e.return}}function Jw(t){for(;V!==null;){var e=V;if(e===t){V=null;break}var n=e.sibling;if(n!==null){n.return=e.return,V=n;break}V=e.return}}function Qw(t){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zh(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Je(e,s,l)}}var i=e.return;try{Jm(e)}catch(l){Je(e,i,l)}break;case 5:var o=e.return;try{Jm(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){V=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V=a;break}V=e.return}}var EP=Math.ceil,Dd=Qr.ReactCurrentDispatcher,lv=Qr.ReactCurrentOwner,In=Qr.ReactCurrentBatchConfig,ye=0,bt=null,it=null,At=0,un=0,na=oi(0),ht=0,pc=null,no=0,ef=0,cv=0,$l=null,en=null,uv=0,ja=1/0,Rr=null,Ld=!1,Xm=null,Hs=null,ku=!1,Ms=null,$d=0,zl=0,Zm=null,od=-1,ad=0;function qt(){return ye&6?et():od!==-1?od:od=et()}function Vs(t){return t.mode&1?ye&2&&At!==0?At&-At:aP.transition!==null?(ad===0&&(ad=GS()),ad):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:tk(t.type)),t):1}function nr(t,e,n,r){if(50<zl)throw zl=0,Zm=null,Error(D(185));Kc(t,n,r),(!(ye&2)||t!==bt)&&(t===bt&&(!(ye&2)&&(ef|=n),ht===4&&bs(t,At)),on(t,r),n===1&&ye===0&&!(e.mode&1)&&(ja=et()+500,Qh&&ai()))}function on(t,e){var n=t.callbackNode;aR(t,e);var r=xd(t,t===bt?At:0);if(r===0)n!==null&&iw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iw(n),e===1)t.tag===0?oP(Yw.bind(null,t)):bk(Yw.bind(null,t)),nP(function(){!(ye&6)&&ai()}),n=null;else{switch(JS(r)){case 1:n=Dy;break;case 4:n=qS;break;case 16:n=bd;break;case 536870912:n=KS;break;default:n=bd}n=vE(n,dE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dE(t,e){if(od=-1,ad=0,ye&6)throw Error(D(327));var n=t.callbackNode;if(ua()&&t.callbackNode!==n)return null;var r=xd(t,t===bt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zd(t,r);else{e=r;var s=ye;ye|=2;var i=fE();(bt!==t||At!==e)&&(Rr=null,ja=et()+500,qi(t,e));do try{_P();break}catch(a){hE(t,a)}while(!0);Jy(),Dd.current=i,ye=s,it!==null?e=0:(bt=null,At=0,e=ht)}if(e!==0){if(e===2&&(s=Tm(t),s!==0&&(r=s,e=eg(t,s))),e===1)throw n=pc,qi(t,0),bs(t,r),on(t,et()),n;if(e===6)bs(t,r);else{if(s=t.current.alternate,!(r&30)&&!CP(s)&&(e=zd(t,r),e===2&&(i=Tm(t),i!==0&&(r=i,e=eg(t,i))),e===1))throw n=pc,qi(t,0),bs(t,r),on(t,et()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Si(t,en,Rr);break;case 3:if(bs(t,r),(r&130023424)===r&&(e=uv+500-et(),10<e)){if(xd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Im(Si.bind(null,t,en,Rr),e);break}Si(t,en,Rr);break;case 4:if(bs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EP(r/1960))-r,10<r){t.timeoutHandle=Im(Si.bind(null,t,en,Rr),r);break}Si(t,en,Rr);break;case 5:Si(t,en,Rr);break;default:throw Error(D(329))}}}return on(t,et()),t.callbackNode===n?dE.bind(null,t):null}function eg(t,e){var n=$l;return t.current.memoizedState.isDehydrated&&(qi(t,e).flags|=256),t=zd(t,e),t!==2&&(e=en,en=n,e!==null&&tg(e)),t}function tg(t){en===null?en=t:en.push.apply(en,t)}function CP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~cv,e&=~ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function Yw(t){if(ye&6)throw Error(D(327));ua();var e=xd(t,0);if(!(e&1))return on(t,et()),null;var n=zd(t,e);if(t.tag!==0&&n===2){var r=Tm(t);r!==0&&(e=r,n=eg(t,r))}if(n===1)throw n=pc,qi(t,0),bs(t,e),on(t,et()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Si(t,en,Rr),on(t,et()),null}function dv(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(ja=et()+500,Qh&&ai())}}function ro(t){Ms!==null&&Ms.tag===0&&!(ye&6)&&ua();var e=ye;ye|=1;var n=In.transition,r=Ee;try{if(In.transition=null,Ee=1,t)return t()}finally{Ee=r,In.transition=n,ye=e,!(ye&6)&&ai()}}function hv(){un=na.current,Ie(na)}function qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tP(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(qy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Td();break;case 3:Ma(),Ie(rn),Ie(Lt),tv();break;case 5:ev(r);break;case 4:Ma();break;case 13:Ie(ze);break;case 19:Ie(ze);break;case 10:Qy(r.type._context);break;case 22:case 23:hv()}n=n.return}if(bt=t,it=t=Ws(t.current,null),At=un=e,ht=0,pc=null,cv=ef=no=0,en=$l=null,Oi!==null){for(e=0;e<Oi.length;e++)if(n=Oi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Oi=null}return t}function hE(t,e){do{var n=it;try{if(Jy(),rd.current=jd,Id){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Id=!1}if(to=0,mt=dt=Fe=null,Dl=!1,dc=0,lv.current=null,n===null||n.return===null){ht=1,pc=e,it=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=$w(o);if(h!==null){h.flags&=-257,zw(h,o,a,i,e),h.mode&1&&Lw(i,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Lw(i,c,e),fv();break e}l=Error(D(426))}}else if(Le&&a.mode&1){var y=$w(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),zw(y,o,a,i,e),Ky(Ia(l,a));break e}}i=l=Ia(l,a),ht!==4&&(ht=2),$l===null?$l=[i]:$l.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Jk(i,l,e);Rw(i,v);break e;case 1:a=l;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Hs===null||!Hs.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Qk(i,a,e);Rw(i,S);break e}}i=i.return}while(i!==null)}mE(n)}catch(k){e=k,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function fE(){var t=Dd.current;return Dd.current=jd,t===null?jd:t}function fv(){(ht===0||ht===3||ht===2)&&(ht=4),bt===null||!(no&268435455)&&!(ef&268435455)||bs(bt,At)}function zd(t,e){var n=ye;ye|=2;var r=fE();(bt!==t||At!==e)&&(Rr=null,qi(t,e));do try{TP();break}catch(s){hE(t,s)}while(!0);if(Jy(),ye=n,Dd.current=r,it!==null)throw Error(D(261));return bt=null,At=0,ht}function TP(){for(;it!==null;)pE(it)}function _P(){for(;it!==null&&!XA();)pE(it)}function pE(t){var e=yE(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?mE(t):it=e,lv.current=null}function mE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bP(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,it=null;return}}else if(n=wP(n,e,un),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ht===0&&(ht=5)}function Si(t,e,n){var r=Ee,s=In.transition;try{In.transition=null,Ee=1,NP(t,e,n,r)}finally{In.transition=s,Ee=r}return null}function NP(t,e,n,r){do ua();while(Ms!==null);if(ye&6)throw Error(D(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lR(t,i),t===bt&&(it=bt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ku||(ku=!0,vE(bd,function(){return ua(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=In.transition,In.transition=null;var o=Ee;Ee=1;var a=ye;ye|=4,lv.current=null,SP(t,n),cE(n,t),GR(Pm),Sd=!!Rm,Pm=Rm=null,t.current=n,kP(n),ZA(),ye=a,Ee=o,In.transition=i}else t.current=n;if(ku&&(ku=!1,Ms=t,$d=s),i=t.pendingLanes,i===0&&(Hs=null),nR(n.stateNode),on(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ld)throw Ld=!1,t=Xm,Xm=null,t;return $d&1&&t.tag!==0&&ua(),i=t.pendingLanes,i&1?t===Zm?zl++:(zl=0,Zm=t):zl=0,ai(),null}function ua(){if(Ms!==null){var t=JS($d),e=In.transition,n=Ee;try{if(In.transition=null,Ee=16>t?16:t,Ms===null)var r=!1;else{if(t=Ms,Ms=null,$d=0,ye&6)throw Error(D(331));var s=ye;for(ye|=4,V=t.current;V!==null;){var i=V,o=i.child;if(V.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(V=c;V!==null;){var u=V;switch(u.tag){case 0:case 11:case 15:Ll(8,u,i)}var d=u.child;if(d!==null)d.return=u,V=d;else for(;V!==null;){u=V;var f=u.sibling,h=u.return;if(oE(u),u===c){V=null;break}if(f!==null){f.return=h,V=f;break}V=h}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}V=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,V=o;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ll(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,V=v;break e}V=i.return}}var w=t.current;for(V=w;V!==null;){o=V;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,V=b;else e:for(o=w;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zh(9,a)}}catch(k){Je(a,a.return,k)}if(a===o){V=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,V=S;break e}V=a.return}}if(ye=s,ai(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(Wh,t)}catch{}r=!0}return r}finally{Ee=n,In.transition=e}}return!1}function Xw(t,e,n){e=Ia(n,e),e=Jk(t,e,1),t=Us(t,e,1),e=qt(),t!==null&&(Kc(t,1,e),on(t,e))}function Je(t,e,n){if(t.tag===3)Xw(t,t,n);else for(;e!==null;){if(e.tag===3){Xw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hs===null||!Hs.has(r))){t=Ia(n,t),t=Qk(e,t,1),e=Us(e,t,1),t=qt(),e!==null&&(Kc(e,1,t),on(e,t));break}}e=e.return}}function OP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(At&n)===n&&(ht===4||ht===3&&(At&130023424)===At&&500>et()-uv?qi(t,0):cv|=n),on(t,e)}function gE(t,e){e===0&&(t.mode&1?(e=fu,fu<<=1,!(fu&130023424)&&(fu=4194304)):e=1);var n=qt();t=Wr(t,e),t!==null&&(Kc(t,e,n),on(t,n))}function AP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gE(t,n)}function RP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),gE(t,n)}var yE;yE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,vP(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Le&&e.flags&1048576&&xk(e,Od,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;id(t,e),t=e.pendingProps;var s=Aa(e,Lt.current);ca(e,n),s=rv(null,e,r,t,s,n);var i=sv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(i=!0,_d(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xy(e),s.updater=Xh,e.stateNode=s,s._reactInternals=e,Fm(e,r,t,n),e=Vm(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Wy(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(id(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=MP(r),t=qn(r,t),s){case 0:e=Hm(null,e,r,t,n);break e;case 1:e=Uw(null,e,r,t,n);break e;case 11:e=Bw(null,e,r,t,n);break e;case 14:e=Fw(null,e,r,qn(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Hm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Uw(t,e,r,s,n);case 3:e:{if(eE(e),t===null)throw Error(D(387));r=e.pendingProps,i=e.memoizedState,s=i.element,_k(t,e),Pd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ia(Error(D(423)),e),e=Hw(t,e,r,n,s);break e}else if(r!==s){s=Ia(Error(D(424)),e),e=Hw(t,e,r,n,s);break e}else for(mn=Fs(e.stateNode.containerInfo.firstChild),gn=e,Le=!0,Xn=null,n=Ck(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ra(),r===s){e=qr(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return Nk(e),t===null&&$m(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Mm(r,s)?o=null:i!==null&&Mm(r,i)&&(e.flags|=32),Zk(t,e),Ht(t,e,o,n),e.child;case 6:return t===null&&$m(e),null;case 13:return tE(t,e,n);case 4:return Zy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pa(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Bw(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Oe(Ad,r._currentValue),r._currentValue=o,i!==null)if(rr(i.value,o)){if(i.children===s.children&&!rn.current){e=qr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Br(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),zm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ca(e,n),s=Ln(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=qn(r,e.pendingProps),s=qn(r.type,s),Fw(t,e,r,s,n);case 15:return Yk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),id(t,e),e.tag=1,sn(r)?(t=!0,_d(e)):t=!1,ca(e,n),Gk(e,r,s),Fm(e,r,s,n),Vm(null,e,r,!0,t,n);case 19:return nE(t,e,n);case 22:return Xk(t,e,n)}throw Error(D(156,e.tag))};function vE(t,e){return WS(t,e)}function PP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new PP(t,e,n,r)}function pv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MP(t){if(typeof t=="function")return pv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===My)return 11;if(t===Iy)return 14}return 2}function Ws(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ld(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")pv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qo:return Ki(n.children,s,i,e);case Py:o=8,s|=8;break;case dm:return t=Pn(12,n,e,s|2),t.elementType=dm,t.lanes=i,t;case hm:return t=Pn(13,n,e,s),t.elementType=hm,t.lanes=i,t;case fm:return t=Pn(19,n,e,s),t.elementType=fm,t.lanes=i,t;case NS:return tf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TS:o=10;break e;case _S:o=9;break e;case My:o=11;break e;case Iy:o=14;break e;case fs:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=Pn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ki(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function tf(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=NS,t.lanes=n,t.stateNode={isHidden:!1},t}function hp(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function fp(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kf(0),this.expirationTimes=Kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mv(t,e,n,r,s,i,o,a,l){return t=new IP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xy(i),t}function jP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wE(t){if(!t)return ei;t=t._reactInternals;e:{if(go(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(sn(n))return wk(t,n,e)}return e}function bE(t,e,n,r,s,i,o,a,l){return t=mv(n,r,!0,t,s,i,o,a,l),t.context=wE(null),n=t.current,r=qt(),s=Vs(n),i=Br(r,s),i.callback=e??null,Us(n,i,s),t.current.lanes=s,Kc(t,s,r),on(t,r),t}function nf(t,e,n,r){var s=e.current,i=qt(),o=Vs(s);return n=wE(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Us(s,e,o),t!==null&&(nr(t,s,o,i),nd(t,s,o)),o}function Bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gv(t,e){Zw(t,e),(t=t.alternate)&&Zw(t,e)}function DP(){return null}var xE=typeof reportError=="function"?reportError:function(t){console.error(t)};function yv(t){this._internalRoot=t}rf.prototype.render=yv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));nf(t,e,null,null)};rf.prototype.unmount=yv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){nf(null,t,null,null)}),e[Vr]=null}};function rf(t){this._internalRoot=t}rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=XS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ws.length&&e!==0&&e<ws[n].priority;n++);ws.splice(n,0,t),n===0&&ek(t)}};function vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eb(){}function LP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Bd(o);i.call(c)}}var o=bE(e,r,t,0,null,!1,!1,"",eb);return t._reactRootContainer=o,t[Vr]=o.current,oc(t.nodeType===8?t.parentNode:t),ro(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Bd(l);a.call(c)}}var l=mv(t,0,!1,null,null,!1,!1,"",eb);return t._reactRootContainer=l,t[Vr]=l.current,oc(t.nodeType===8?t.parentNode:t),ro(function(){nf(e,l,n,r)}),l}function of(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Bd(o);a.call(l)}}nf(e,o,t,s)}else o=LP(n,e,t,s,r);return Bd(o)}QS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xl(e.pendingLanes);n!==0&&(Ly(e,n|1),on(e,et()),!(ye&6)&&(ja=et()+500,ai()))}break;case 13:ro(function(){var r=Wr(t,1);if(r!==null){var s=qt();nr(r,t,1,s)}}),gv(t,1)}};$y=function(t){if(t.tag===13){var e=Wr(t,134217728);if(e!==null){var n=qt();nr(e,t,134217728,n)}gv(t,134217728)}};YS=function(t){if(t.tag===13){var e=Vs(t),n=Wr(t,e);if(n!==null){var r=qt();nr(n,t,e,r)}gv(t,e)}};XS=function(){return Ee};ZS=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};km=function(t,e,n){switch(e){case"input":if(gm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jh(r);if(!s)throw Error(D(90));AS(r),gm(r,s)}}}break;case"textarea":PS(t,n);break;case"select":e=n.value,e!=null&&ia(t,!!n.multiple,e,!1)}};zS=dv;BS=ro;var $P={usingClientEntryPoint:!1,Events:[Jc,Qo,Jh,LS,$S,dv]},fl={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zP={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HS(t),t===null?null:t.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||DP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{Wh=Eu.inject(zP),vr=Eu}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$P;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vv(e))throw Error(D(200));return jP(t,e,null,n)};bn.createRoot=function(t,e){if(!vv(t))throw Error(D(299));var n=!1,r="",s=xE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mv(t,1,!1,null,null,n,!1,r,s),t[Vr]=e.current,oc(t.nodeType===8?t.parentNode:t),new yv(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=HS(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return ro(t)};bn.hydrate=function(t,e,n){if(!sf(e))throw Error(D(200));return of(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!vv(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=xE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bE(e,null,t,1,n??null,s,!1,i,o),t[Vr]=e.current,oc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rf(e)};bn.render=function(t,e,n){if(!sf(e))throw Error(D(200));return of(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!sf(t))throw Error(D(40));return t._reactRootContainer?(ro(function(){of(null,null,t,!1,function(){t._reactRootContainer=null,t[Vr]=null})}),!0):!1};bn.unstable_batchedUpdates=dv;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sf(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return of(t,e,n,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function SE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SE)}catch(t){console.error(t)}}SE(),SS.exports=bn;var Ja=SS.exports;const wv=uS(Ja);var kE,tb=Ja;kE=tb.createRoot,tb.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mc(){return mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mc.apply(this,arguments)}var Is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Is||(Is={}));const nb="popstate";function BP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return ng("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Fd(s)}return UP(e,n,null,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function EE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FP(){return Math.random().toString(36).substr(2,8)}function rb(t,e){return{usr:t.state,key:t.key,idx:e}}function ng(t,e,n,r){return n===void 0&&(n=null),mc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qa(e):e,{state:n,key:e&&e.key||r||FP()})}function Fd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function UP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Is.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(mc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Is.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:a,location:m.location,delta:v})}function f(y,v){a=Is.Push;let w=ng(m.location,y,v);c=u()+1;let b=rb(w,c),S=m.createHref(w);try{o.pushState(b,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(S)}i&&l&&l({action:a,location:m.location,delta:1})}function h(y,v){a=Is.Replace;let w=ng(m.location,y,v);c=u();let b=rb(w,c),S=m.createHref(w);o.replaceState(b,"",S),i&&l&&l({action:a,location:m.location,delta:0})}function p(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:Fd(y);return w=w.replace(/ $/,"%20"),tt(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let m={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(nb,d),l=y,()=>{s.removeEventListener(nb,d),l=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let v=p(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(y){return o.go(y)}};return m}var sb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sb||(sb={}));function HP(t,e,n){return n===void 0&&(n="/"),VP(t,e,n)}function VP(t,e,n,r){let s=typeof e=="string"?Qa(e):e,i=bv(s.pathname||"/",n);if(i==null)return null;let o=CE(t);WP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=rM(i);a=eM(o[l],c)}return a}function CE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(tt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=qs([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(tt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),CE(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:XP(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of TE(i.path))s(i,o,l)}),e}function TE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=TE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function WP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qP=/^:[\w-]+$/,KP=3,GP=2,JP=1,QP=10,YP=-2,ib=t=>t==="*";function XP(t,e){let n=t.split("/"),r=n.length;return n.some(ib)&&(r+=YP),e&&(r+=GP),n.filter(s=>!ib(s)).reduce((s,i)=>s+(qP.test(i)?KP:i===""?JP:QP),r)}function ZP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function eM(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=tM({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:qs([i,d.pathname]),pathnameBase:aM(qs([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=qs([i,d.pathnameBase]))}return o}function tM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nM(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let m=a[d]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function nM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),EE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return EE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Qa(t):t;return{pathname:n?n.startsWith("/")?n:iM(n,e):e,search:lM(r),hash:cM(s)}}function iM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xv(t,e){let n=oM(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Sv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Qa(t):(s=mc({},t),tt(!s.pathname||!s.pathname.includes("?"),pp("?","pathname","search",s)),tt(!s.pathname||!s.pathname.includes("#"),pp("#","pathname","hash",s)),tt(!s.search||!s.search.includes("#"),pp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=sM(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const qs=t=>t.join("/").replace(/\/\/+/g,"/"),aM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _E=["post","put","patch","delete"];new Set(_E);const dM=["get",..._E];new Set(dM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gc(){return gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gc.apply(this,arguments)}const kv=x.createContext(null),hM=x.createContext(null),li=x.createContext(null),af=x.createContext(null),Yr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),NE=x.createContext(null);function fM(t,e){let{relative:n}=e===void 0?{}:e;Ya()||tt(!1);let{basename:r,navigator:s}=x.useContext(li),{hash:i,pathname:o,search:a}=RE(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:qs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ya(){return x.useContext(af)!=null}function yo(){return Ya()||tt(!1),x.useContext(af).location}function OE(t){x.useContext(li).static||x.useLayoutEffect(t)}function vo(){let{isDataRoute:t}=x.useContext(Yr);return t?TM():pM()}function pM(){Ya()||tt(!1);let t=x.useContext(kv),{basename:e,future:n,navigator:r}=x.useContext(li),{matches:s}=x.useContext(Yr),{pathname:i}=yo(),o=JSON.stringify(xv(s,n.v7_relativeSplatPath)),a=x.useRef(!1);return OE(()=>{a.current=!0}),x.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Sv(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qs([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function AE(){let{matches:t}=x.useContext(Yr),e=t[t.length-1];return e?e.params:{}}function RE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(li),{matches:s}=x.useContext(Yr),{pathname:i}=yo(),o=JSON.stringify(xv(s,r.v7_relativeSplatPath));return x.useMemo(()=>Sv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function mM(t,e){return gM(t,e)}function gM(t,e,n,r){Ya()||tt(!1);let{navigator:s}=x.useContext(li),{matches:i}=x.useContext(Yr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=yo(),u;if(e){var d;let y=typeof e=="string"?Qa(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||tt(!1),u=y}else u=c;let f=u.pathname||"/",h=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=HP(t,{pathname:h}),m=xM(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:qs([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:qs([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&m?x.createElement(af.Provider,{value:{location:gc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Is.Pop}},m):m}function yM(){let t=CM(),e=uM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,null)}const vM=x.createElement(yM,null);class wM extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Yr.Provider,{value:this.props.routeContext},x.createElement(NE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bM(t){let{routeContext:e,match:n,children:r}=t,s=x.useContext(kv);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Yr.Provider,{value:e},r)}function xM(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||tt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,m=null,y=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||vM,l&&(c<0&&f===0?(_M("route-fallback"),p=!0,y=null):c===f&&(p=!0,y=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),w=()=>{let b;return h?b=m:p?b=y:d.route.Component?b=x.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,x.createElement(bM,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(wM,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var PE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(PE||{}),ME=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ME||{});function SM(t){let e=x.useContext(kv);return e||tt(!1),e}function kM(t){let e=x.useContext(hM);return e||tt(!1),e}function EM(t){let e=x.useContext(Yr);return e||tt(!1),e}function IE(t){let e=EM(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function CM(){var t;let e=x.useContext(NE),n=kM(),r=IE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function TM(){let{router:t}=SM(PE.UseNavigateStable),e=IE(ME.UseNavigateStable),n=x.useRef(!1);return OE(()=>{n.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,gc({fromRouteId:e},i)))},[t,e])}const ob={};function _M(t,e,n){ob[t]||(ob[t]=!0)}function NM(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ev(t){let{to:e,replace:n,state:r,relative:s}=t;Ya()||tt(!1);let{future:i,static:o}=x.useContext(li),{matches:a}=x.useContext(Yr),{pathname:l}=yo(),c=vo(),u=Sv(e,xv(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return x.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function ar(t){tt(!1)}function OM(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Is.Pop,navigator:i,static:o=!1,future:a}=t;Ya()&&tt(!1);let l=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:i,static:o,future:gc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Qa(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=x.useMemo(()=>{let y=bv(u,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:h,key:p},navigationType:s}},[l,u,d,f,h,p,s]);return m==null?null:x.createElement(li.Provider,{value:c},x.createElement(af.Provider,{children:n,value:m}))}function AM(t){let{children:e,location:n}=t;return mM(rg(e),n)}new Promise(()=>{});function rg(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let i=[...e,s];if(r.type===x.Fragment){n.push.apply(n,rg(r.props.children,i));return}r.type!==ar&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rg(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sg(){return sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sg.apply(this,arguments)}function RM(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function PM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MM(t,e){return t.button===0&&(!e||e==="_self")&&!PM(t)}function ig(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function IM(t,e){let n=ig(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const jM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DM="6";try{window.__reactRouterVersion=DM}catch{}const LM="startTransition",ab=Ny[LM];function $M(t){let{basename:e,children:n,future:r,window:s}=t,i=x.useRef();i.current==null&&(i.current=BP({window:s,v5Compat:!0}));let o=i.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=x.useCallback(d=>{c&&ab?ab(()=>l(d)):l(d)},[l,c]);return x.useLayoutEffect(()=>o.listen(u),[o,u]),x.useEffect(()=>NM(r),[r]),x.createElement(OM,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const zM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mr=x.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=RM(e,jM),{basename:h}=x.useContext(li),p,m=!1;if(typeof c=="string"&&BM.test(c)&&(p=c,zM))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),k=bv(S.pathname,h);S.origin===b.origin&&k!=null?c=k+S.search+S.hash:m=!0}catch{}let y=fM(c,{relative:s}),v=FM(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function w(b){r&&r(b),b.defaultPrevented||v(b)}return x.createElement("a",sg({},f,{href:p||y,onClick:m||i?r:w,ref:n,target:l}))});var lb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lb||(lb={}));var cb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cb||(cb={}));function FM(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=vo(),c=yo(),u=RE(t,{relative:o});return x.useCallback(d=>{if(MM(d,n)){d.preventDefault();let f=r!==void 0?r:Fd(c)===Fd(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function UM(t){let e=x.useRef(ig(t)),n=x.useRef(!1),r=yo(),s=x.useMemo(()=>IM(r.search,n.current?null:e.current),[r.search]),i=vo(),o=x.useCallback((a,l)=>{const c=ig(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var Yc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},HM={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Es,ky,eS,VM=(eS=class{constructor(){ee(this,Es,HM);ee(this,ky,!1)}setTimeoutProvider(t){H(this,Es,t)}setTimeout(t,e){return T(this,Es).setTimeout(t,e)}clearTimeout(t){T(this,Es).clearTimeout(t)}setInterval(t,e){return T(this,Es).setInterval(t,e)}clearInterval(t){T(this,Es).clearInterval(t)}},Es=new WeakMap,ky=new WeakMap,eS),Ri=new VM;function WM(t){setTimeout(t,0)}var so=typeof window>"u"||"Deno"in globalThis;function Zt(){}function qM(t,e){return typeof t=="function"?t(e):t}function og(t){return typeof t=="number"&&t>=0&&t!==1/0}function jE(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ks(t,e){return typeof t=="function"?t(e):t}function _n(t,e){return typeof t=="function"?t(e):t}function ub(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Cv(o,e.options))return!1}else if(!vc(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function db(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(yc(e.options.mutationKey)!==yc(i))return!1}else if(!vc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Cv(t,e){return((e==null?void 0:e.queryKeyHashFn)||yc)(t)}function yc(t){return JSON.stringify(t,(e,n)=>lg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function vc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>vc(t[n],e[n])):!1}var KM=Object.prototype.hasOwnProperty;function DE(t,e){if(t===e)return t;const n=hb(t)&&hb(e);if(!n&&!(lg(t)&&lg(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c],d=t[u],f=e[u];if(d===f){a[u]=d,(n?c<s:KM.call(t,u))&&l++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){a[u]=f;continue}const h=DE(d,f);a[u]=h,h===d&&l++}return s===o&&l===s?t:a}function ag(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function hb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function lg(t){if(!fb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!fb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function fb(t){return Object.prototype.toString.call(t)==="[object Object]"}function GM(t){return new Promise(e=>{Ri.setTimeout(e,t)})}function cg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?DE(t,e):e}function JM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function QM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Tv=Symbol();function LE(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Tv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function $E(t,e){return typeof t=="function"?t(...e):!!t}function YM(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var Li,Cs,ya,tS,XM=(tS=class extends Yc{constructor(){super();ee(this,Li);ee(this,Cs);ee(this,ya);H(this,ya,e=>{if(!so&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){T(this,Cs)||this.setEventListener(T(this,ya))}onUnsubscribe(){var e;this.hasListeners()||((e=T(this,Cs))==null||e.call(this),H(this,Cs,void 0))}setEventListener(e){var n;H(this,ya,e),(n=T(this,Cs))==null||n.call(this),H(this,Cs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){T(this,Li)!==e&&(H(this,Li,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof T(this,Li)=="boolean"?T(this,Li):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Li=new WeakMap,Cs=new WeakMap,ya=new WeakMap,tS),_v=new XM;function ug(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var ZM=WM;function eI(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=ZM;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var _t=eI(),va,Ts,wa,nS,tI=(nS=class extends Yc{constructor(){super();ee(this,va,!0);ee(this,Ts);ee(this,wa);H(this,wa,e=>{if(!so&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){T(this,Ts)||this.setEventListener(T(this,wa))}onUnsubscribe(){var e;this.hasListeners()||((e=T(this,Ts))==null||e.call(this),H(this,Ts,void 0))}setEventListener(e){var n;H(this,wa,e),(n=T(this,Ts))==null||n.call(this),H(this,Ts,e(this.setOnline.bind(this)))}setOnline(e){T(this,va)!==e&&(H(this,va,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return T(this,va)}},va=new WeakMap,Ts=new WeakMap,wa=new WeakMap,nS),Ud=new tI;function nI(t){return Math.min(1e3*2**t,3e4)}function zE(t){return(t??"online")==="online"?Ud.isOnline():!0}var dg=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function BE(t){let e=!1,n=0,r;const s=ug(),i=()=>s.status!=="pending",o=m=>{var y;if(!i()){const v=new dg(m);f(v),(y=t.onCancel)==null||y.call(t,v)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>_v.isFocused()&&(t.networkMode==="always"||Ud.isOnline())&&t.canRun(),u=()=>zE(t.networkMode)&&t.canRun(),d=m=>{i()||(r==null||r(),s.resolve(m))},f=m=>{i()||(r==null||r(),s.reject(m))},h=()=>new Promise(m=>{var y;r=v=>{(i()||c())&&m(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var m;r=void 0,i()||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(i())return;let m;const y=n===0?t.initialPromise:void 0;try{m=y??t.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(d).catch(v=>{var C;if(i())return;const w=t.retry??(so?0:3),b=t.retryDelay??nI,S=typeof b=="function"?b(n,v):b,k=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,v);if(e||!k){f(v);return}n++,(C=t.onFail)==null||C.call(t,n,v),GM(S).then(()=>c()?void 0:h()).then(()=>{e?f(v):p()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():h().then(p),s)}}var $i,rS,FE=(rS=class{constructor(){ee(this,$i)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),og(this.gcTime)&&H(this,$i,Ri.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(so?1/0:5*60*1e3))}clearGcTimeout(){T(this,$i)&&(Ri.clearTimeout(T(this,$i)),H(this,$i,void 0))}},$i=new WeakMap,rS),zi,ba,Tn,Bi,pt,Fc,Fi,Gn,Or,sS,rI=(sS=class extends FE{constructor(e){super();ee(this,Gn);ee(this,zi);ee(this,ba);ee(this,Tn);ee(this,Bi);ee(this,pt);ee(this,Fc);ee(this,Fi);H(this,Fi,!1),H(this,Fc,e.defaultOptions),this.setOptions(e.options),this.observers=[],H(this,Bi,e.client),H(this,Tn,T(this,Bi).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,H(this,zi,mb(this.options)),this.state=e.state??T(this,zi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=T(this,pt))==null?void 0:e.promise}setOptions(e){if(this.options={...T(this,Fc),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=mb(this.options);n.data!==void 0&&(this.setState(pb(n.data,n.dataUpdatedAt)),H(this,zi,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&T(this,Tn).remove(this)}setData(e,n){const r=cg(this.state.data,e,this.options);return pe(this,Gn,Or).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){pe(this,Gn,Or).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=T(this,pt))==null?void 0:r.promise;return(s=T(this,pt))==null||s.cancel(e),n?n.then(Zt).catch(Zt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(T(this,zi))}isActive(){return this.observers.some(e=>_n(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Tv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ks(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!jE(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=T(this,pt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=T(this,pt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),T(this,Tn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(T(this,pt)&&(T(this,Fi)?T(this,pt).cancel({revert:!0}):T(this,pt).cancelRetry()),this.scheduleGc()),T(this,Tn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pe(this,Gn,Or).call(this,{type:"invalidate"})}async fetch(e,n){var l,c,u,d,f,h,p,m,y,v,w,b;if(this.state.fetchStatus!=="idle"&&((l=T(this,pt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(T(this,pt))return T(this,pt).continueRetry(),T(this,pt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(k=>k.options.queryFn);S&&this.setOptions(S.options)}const r=new AbortController,s=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(H(this,Fi,!0),r.signal)})},i=()=>{const S=LE(this.options,n),C=(()=>{const E={client:T(this,Bi),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return H(this,Fi,!1),this.options.persister?this.options.persister(S,C,this):S(C)},a=(()=>{const S={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:T(this,Bi),state:this.state,fetchFn:i};return s(S),S})();(c=this.options.behavior)==null||c.onFetch(a,this),H(this,ba,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&pe(this,Gn,Or).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),H(this,pt,BE({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:S=>{S instanceof dg&&S.revert&&this.setState({...T(this,ba),fetchStatus:"idle"}),r.abort()},onFail:(S,k)=>{pe(this,Gn,Or).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{pe(this,Gn,Or).call(this,{type:"pause"})},onContinue:()=>{pe(this,Gn,Or).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const S=await T(this,pt).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(h=(f=T(this,Tn).config).onSuccess)==null||h.call(f,S,this),(m=(p=T(this,Tn).config).onSettled)==null||m.call(p,S,this.state.error,this),S}catch(S){if(S instanceof dg){if(S.silent)return T(this,pt).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw pe(this,Gn,Or).call(this,{type:"error",error:S}),(v=(y=T(this,Tn).config).onError)==null||v.call(y,S,this),(b=(w=T(this,Tn).config).onSettled)==null||b.call(w,this.state.data,S,this),S}finally{this.scheduleGc()}}},zi=new WeakMap,ba=new WeakMap,Tn=new WeakMap,Bi=new WeakMap,pt=new WeakMap,Fc=new WeakMap,Fi=new WeakMap,Gn=new WeakSet,Or=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...UE(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...pb(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return H(this,ba,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),_t.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),T(this,Tn).notify({query:this,type:"updated",action:e})})},sS);function UE(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zE(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function pb(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function mb(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Yt,me,Uc,Ft,Ui,xa,jr,_s,Hc,Sa,ka,Hi,Vi,Ns,Ea,Se,kl,hg,fg,pg,mg,gg,yg,vg,HE,iS,sI=(iS=class extends Yc{constructor(e,n){super();ee(this,Se);ee(this,Yt);ee(this,me);ee(this,Uc);ee(this,Ft);ee(this,Ui);ee(this,xa);ee(this,jr);ee(this,_s);ee(this,Hc);ee(this,Sa);ee(this,ka);ee(this,Hi);ee(this,Vi);ee(this,Ns);ee(this,Ea,new Set);this.options=n,H(this,Yt,e),H(this,_s,null),H(this,jr,ug()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(T(this,me).addObserver(this),gb(T(this,me),this.options)?pe(this,Se,kl).call(this):this.updateResult(),pe(this,Se,mg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return wg(T(this,me),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return wg(T(this,me),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pe(this,Se,gg).call(this),pe(this,Se,yg).call(this),T(this,me).removeObserver(this)}setOptions(e){const n=this.options,r=T(this,me);if(this.options=T(this,Yt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _n(this.options.enabled,T(this,me))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pe(this,Se,vg).call(this),T(this,me).setOptions(this.options),n._defaulted&&!ag(this.options,n)&&T(this,Yt).getQueryCache().notify({type:"observerOptionsUpdated",query:T(this,me),observer:this});const s=this.hasListeners();s&&yb(T(this,me),r,this.options,n)&&pe(this,Se,kl).call(this),this.updateResult(),s&&(T(this,me)!==r||_n(this.options.enabled,T(this,me))!==_n(n.enabled,T(this,me))||Ks(this.options.staleTime,T(this,me))!==Ks(n.staleTime,T(this,me)))&&pe(this,Se,hg).call(this);const i=pe(this,Se,fg).call(this);s&&(T(this,me)!==r||_n(this.options.enabled,T(this,me))!==_n(n.enabled,T(this,me))||i!==T(this,Ns))&&pe(this,Se,pg).call(this,i)}getOptimisticResult(e){const n=T(this,Yt).getQueryCache().build(T(this,Yt),e),r=this.createResult(n,e);return oI(this,r)&&(H(this,Ft,r),H(this,xa,this.options),H(this,Ui,T(this,me).state)),r}getCurrentResult(){return T(this,Ft)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&T(this,jr).status==="pending"&&T(this,jr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){T(this,Ea).add(e)}getCurrentQuery(){return T(this,me)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=T(this,Yt).defaultQueryOptions(e),r=T(this,Yt).getQueryCache().build(T(this,Yt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return pe(this,Se,kl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),T(this,Ft)))}createResult(e,n){var A;const r=T(this,me),s=this.options,i=T(this,Ft),o=T(this,Ui),a=T(this,xa),c=e!==r?e.state:T(this,Uc),{state:u}=e;let d={...u},f=!1,h;if(n._optimisticResults){const N=this.hasListeners(),z=!N&&gb(e,n),L=N&&yb(e,r,n,s);(z||L)&&(d={...d,...UE(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:y}=d;h=d.data;let v=!1;if(n.placeholderData!==void 0&&h===void 0&&y==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(N=i.data,v=!0):N=typeof n.placeholderData=="function"?n.placeholderData((A=T(this,ka))==null?void 0:A.state.data,T(this,ka)):n.placeholderData,N!==void 0&&(y="success",h=cg(i==null?void 0:i.data,N,n),f=!0)}if(n.select&&h!==void 0&&!v)if(i&&h===(o==null?void 0:o.data)&&n.select===T(this,Hc))h=T(this,Sa);else try{H(this,Hc,n.select),h=n.select(h),h=cg(i==null?void 0:i.data,h,n),H(this,Sa,h),H(this,_s,null)}catch(N){H(this,_s,N)}T(this,_s)&&(p=T(this,_s),h=T(this,Sa),m=Date.now(),y="error");const w=d.fetchStatus==="fetching",b=y==="pending",S=y==="error",k=b&&w,C=h!==void 0,_={status:y,fetchStatus:d.fetchStatus,isPending:b,isSuccess:y==="success",isError:S,isInitialLoading:k,isLoading:k,data:h,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!b,isLoadingError:S&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:S&&C,isStale:Nv(e,n),refetch:this.refetch,promise:T(this,jr),isEnabled:_n(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const N=q=>{_.status==="error"?q.reject(_.error):_.data!==void 0&&q.resolve(_.data)},z=()=>{const q=H(this,jr,_.promise=ug());N(q)},L=T(this,jr);switch(L.status){case"pending":e.queryHash===r.queryHash&&N(L);break;case"fulfilled":(_.status==="error"||_.data!==L.value)&&z();break;case"rejected":(_.status!=="error"||_.error!==L.reason)&&z();break}}return _}updateResult(){const e=T(this,Ft),n=this.createResult(T(this,me),this.options);if(H(this,Ui,T(this,me).state),H(this,xa,this.options),T(this,Ui).data!==void 0&&H(this,ka,T(this,me)),ag(n,e))return;H(this,Ft,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!T(this,Ea).size)return!0;const o=new Set(i??T(this,Ea));return this.options.throwOnError&&o.add("error"),Object.keys(T(this,Ft)).some(a=>{const l=a;return T(this,Ft)[l]!==e[l]&&o.has(l)})};pe(this,Se,HE).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pe(this,Se,mg).call(this)}},Yt=new WeakMap,me=new WeakMap,Uc=new WeakMap,Ft=new WeakMap,Ui=new WeakMap,xa=new WeakMap,jr=new WeakMap,_s=new WeakMap,Hc=new WeakMap,Sa=new WeakMap,ka=new WeakMap,Hi=new WeakMap,Vi=new WeakMap,Ns=new WeakMap,Ea=new WeakMap,Se=new WeakSet,kl=function(e){pe(this,Se,vg).call(this);let n=T(this,me).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Zt)),n},hg=function(){pe(this,Se,gg).call(this);const e=Ks(this.options.staleTime,T(this,me));if(so||T(this,Ft).isStale||!og(e))return;const r=jE(T(this,Ft).dataUpdatedAt,e)+1;H(this,Hi,Ri.setTimeout(()=>{T(this,Ft).isStale||this.updateResult()},r))},fg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(T(this,me)):this.options.refetchInterval)??!1},pg=function(e){pe(this,Se,yg).call(this),H(this,Ns,e),!(so||_n(this.options.enabled,T(this,me))===!1||!og(T(this,Ns))||T(this,Ns)===0)&&H(this,Vi,Ri.setInterval(()=>{(this.options.refetchIntervalInBackground||_v.isFocused())&&pe(this,Se,kl).call(this)},T(this,Ns)))},mg=function(){pe(this,Se,hg).call(this),pe(this,Se,pg).call(this,pe(this,Se,fg).call(this))},gg=function(){T(this,Hi)&&(Ri.clearTimeout(T(this,Hi)),H(this,Hi,void 0))},yg=function(){T(this,Vi)&&(Ri.clearInterval(T(this,Vi)),H(this,Vi,void 0))},vg=function(){const e=T(this,Yt).getQueryCache().build(T(this,Yt),this.options);if(e===T(this,me))return;const n=T(this,me);H(this,me,e),H(this,Uc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},HE=function(e){_t.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(T(this,Ft))}),T(this,Yt).getQueryCache().notify({query:T(this,me),type:"observerResultsUpdated"})})},iS);function iI(t,e){return _n(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function gb(t,e){return iI(t,e)||t.state.data!==void 0&&wg(t,e,e.refetchOnMount)}function wg(t,e,n){if(_n(e.enabled,t)!==!1&&Ks(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Nv(t,e)}return!1}function yb(t,e,n,r){return(t!==e||_n(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Nv(t,n)}function Nv(t,e){return _n(e.enabled,t)!==!1&&t.isStaleByTime(Ks(e.staleTime,t))}function oI(t,e){return!ag(t.getCurrentResult(),e)}function vb(t){return{onFetch:(e,n)=>{var u,d,f,h,p;const r=e.options,s=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((h=e.state.data)==null?void 0:h.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const y=b=>{YM(b,()=>e.signal,()=>m=!0)},v=LE(e.options,e.fetchOptions),w=async(b,S,k)=>{if(m)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const z={client:e.client,queryKey:e.queryKey,pageParam:S,direction:k?"backward":"forward",meta:e.options.meta};return y(z),z})(),_=await v(E),{maxPages:A}=e.options,N=k?QM:JM;return{pages:N(b.pages,_,A),pageParams:N(b.pageParams,S,A)}};if(s&&i.length){const b=s==="backward",S=b?aI:wb,k={pages:i,pageParams:o},C=S(r,k);a=await w(k,C,b)}else{const b=t??i.length;do{const S=l===0?o[0]??r.initialPageParam:wb(r,a);if(l>0&&S==null)break;a=await w(a,S),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var m,y;return(y=(m=e.options).persister)==null?void 0:y.call(m,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function wb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function aI(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Vc,dr,Ut,Wi,hr,us,oS,lI=(oS=class extends FE{constructor(e){super();ee(this,hr);ee(this,Vc);ee(this,dr);ee(this,Ut);ee(this,Wi);H(this,Vc,e.client),this.mutationId=e.mutationId,H(this,Ut,e.mutationCache),H(this,dr,[]),this.state=e.state||cI(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){T(this,dr).includes(e)||(T(this,dr).push(e),this.clearGcTimeout(),T(this,Ut).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){H(this,dr,T(this,dr).filter(n=>n!==e)),this.scheduleGc(),T(this,Ut).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){T(this,dr).length||(this.state.status==="pending"?this.scheduleGc():T(this,Ut).remove(this))}continue(){var e;return((e=T(this,Wi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,d,f,h,p,m,y,v,w,b,S,k,C,E,_,A;const n=()=>{pe(this,hr,us).call(this,{type:"continue"})},r={client:T(this,Vc),meta:this.options.meta,mutationKey:this.options.mutationKey};H(this,Wi,BE({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,z)=>{pe(this,hr,us).call(this,{type:"failed",failureCount:N,error:z})},onPause:()=>{pe(this,hr,us).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>T(this,Ut).canRun(this)}));const s=this.state.status==="pending",i=!T(this,Wi).canStart();try{if(s)n();else{pe(this,hr,us).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=T(this,Ut).config).onMutate)==null?void 0:a.call(o,e,this,r));const z=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,r));z!==this.state.context&&pe(this,hr,us).call(this,{type:"pending",context:z,variables:e,isPaused:i})}const N=await T(this,Wi).start();return await((d=(u=T(this,Ut).config).onSuccess)==null?void 0:d.call(u,N,e,this.state.context,this,r)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,N,e,this.state.context,r)),await((m=(p=T(this,Ut).config).onSettled)==null?void 0:m.call(p,N,null,this.state.variables,this.state.context,this,r)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,N,null,e,this.state.context,r)),pe(this,hr,us).call(this,{type:"success",data:N}),N}catch(N){try{await((b=(w=T(this,Ut).config).onError)==null?void 0:b.call(w,N,e,this.state.context,this,r))}catch(z){Promise.reject(z)}try{await((k=(S=this.options).onError)==null?void 0:k.call(S,N,e,this.state.context,r))}catch(z){Promise.reject(z)}try{await((E=(C=T(this,Ut).config).onSettled)==null?void 0:E.call(C,void 0,N,this.state.variables,this.state.context,this,r))}catch(z){Promise.reject(z)}try{await((A=(_=this.options).onSettled)==null?void 0:A.call(_,void 0,N,e,this.state.context,r))}catch(z){Promise.reject(z)}throw pe(this,hr,us).call(this,{type:"error",error:N}),N}finally{T(this,Ut).runNext(this)}}},Vc=new WeakMap,dr=new WeakMap,Ut=new WeakMap,Wi=new WeakMap,hr=new WeakSet,us=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),_t.batch(()=>{T(this,dr).forEach(r=>{r.onMutationUpdate(e)}),T(this,Ut).notify({mutation:this,type:"updated",action:e})})},oS);function cI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dr,Jn,Wc,aS,uI=(aS=class extends Yc{constructor(e={}){super();ee(this,Dr);ee(this,Jn);ee(this,Wc);this.config=e,H(this,Dr,new Set),H(this,Jn,new Map),H(this,Wc,0)}build(e,n,r){const s=new lI({client:e,mutationCache:this,mutationId:++au(this,Wc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){T(this,Dr).add(e);const n=Cu(e);if(typeof n=="string"){const r=T(this,Jn).get(n);r?r.push(e):T(this,Jn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(T(this,Dr).delete(e)){const n=Cu(e);if(typeof n=="string"){const r=T(this,Jn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&T(this,Jn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Cu(e);if(typeof n=="string"){const r=T(this,Jn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Cu(e);if(typeof n=="string"){const s=(r=T(this,Jn).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_t.batch(()=>{T(this,Dr).forEach(e=>{this.notify({type:"removed",mutation:e})}),T(this,Dr).clear(),T(this,Jn).clear()})}getAll(){return Array.from(T(this,Dr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>db(n,r))}findAll(e={}){return this.getAll().filter(n=>db(e,n))}notify(e){_t.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return _t.batch(()=>Promise.all(e.map(n=>n.continue().catch(Zt))))}},Dr=new WeakMap,Jn=new WeakMap,Wc=new WeakMap,aS);function Cu(t){var e;return(e=t.options.scope)==null?void 0:e.id}var fr,lS,dI=(lS=class extends Yc{constructor(e={}){super();ee(this,fr);this.config=e,H(this,fr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Cv(s,n);let o=this.get(i);return o||(o=new rI({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){T(this,fr).has(e.queryHash)||(T(this,fr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=T(this,fr).get(e.queryHash);n&&(e.destroy(),n===e&&T(this,fr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_t.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return T(this,fr).get(e)}getAll(){return[...T(this,fr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ub(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>ub(e,r)):n}notify(e){_t.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){_t.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_t.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},fr=new WeakMap,lS),Ke,Os,As,Ca,Ta,Rs,_a,Na,cS,hI=(cS=class{constructor(t={}){ee(this,Ke);ee(this,Os);ee(this,As);ee(this,Ca);ee(this,Ta);ee(this,Rs);ee(this,_a);ee(this,Na);H(this,Ke,t.queryCache||new dI),H(this,Os,t.mutationCache||new uI),H(this,As,t.defaultOptions||{}),H(this,Ca,new Map),H(this,Ta,new Map),H(this,Rs,0)}mount(){au(this,Rs)._++,T(this,Rs)===1&&(H(this,_a,_v.subscribe(async t=>{t&&(await this.resumePausedMutations(),T(this,Ke).onFocus())})),H(this,Na,Ud.subscribe(async t=>{t&&(await this.resumePausedMutations(),T(this,Ke).onOnline())})))}unmount(){var t,e;au(this,Rs)._--,T(this,Rs)===0&&((t=T(this,_a))==null||t.call(this),H(this,_a,void 0),(e=T(this,Na))==null||e.call(this),H(this,Na,void 0))}isFetching(t){return T(this,Ke).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return T(this,Os).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=T(this,Ke).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=T(this,Ke).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ks(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return T(this,Ke).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=T(this,Ke).get(r.queryHash),i=s==null?void 0:s.state.data,o=qM(e,i);if(o!==void 0)return T(this,Ke).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return _t.batch(()=>T(this,Ke).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=T(this,Ke).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=T(this,Ke);_t.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=T(this,Ke);return _t.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=_t.batch(()=>T(this,Ke).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Zt).catch(Zt)}invalidateQueries(t,e={}){return _t.batch(()=>(T(this,Ke).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=_t.batch(()=>T(this,Ke).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Zt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Zt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=T(this,Ke).build(this,e);return n.isStaleByTime(Ks(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Zt).catch(Zt)}fetchInfiniteQuery(t){return t.behavior=vb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Zt).catch(Zt)}ensureInfiniteQueryData(t){return t.behavior=vb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ud.isOnline()?T(this,Os).resumePausedMutations():Promise.resolve()}getQueryCache(){return T(this,Ke)}getMutationCache(){return T(this,Os)}getDefaultOptions(){return T(this,As)}setDefaultOptions(t){H(this,As,t)}setQueryDefaults(t,e){T(this,Ca).set(yc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...T(this,Ca).values()],n={};return e.forEach(r=>{vc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){T(this,Ta).set(yc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...T(this,Ta).values()],n={};return e.forEach(r=>{vc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...T(this,As).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Cv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Tv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...T(this,As).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){T(this,Ke).clear(),T(this,Os).clear()}},Ke=new WeakMap,Os=new WeakMap,As=new WeakMap,Ca=new WeakMap,Ta=new WeakMap,Rs=new WeakMap,_a=new WeakMap,Na=new WeakMap,cS),VE=x.createContext(void 0),Ov=t=>{const e=x.useContext(VE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fI=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(VE.Provider,{value:t,children:e})),WE=x.createContext(!1),pI=()=>x.useContext(WE);WE.Provider;function mI(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var gI=x.createContext(mI()),yI=()=>x.useContext(gI),vI=(t,e,n)=>{const r=n!=null&&n.state.error&&typeof t.throwOnError=="function"?$E(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},wI=t=>{x.useEffect(()=>{t.clearReset()},[t])},bI=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||$E(n,[t.error,r])),xI=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},SI=(t,e)=>t.isLoading&&t.isFetching&&!e,kI=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,bb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function EI(t,e,n){var f,h,p,m;const r=pI(),s=yI(),i=Ov(),o=i.defaultQueryOptions(t);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o);const a=i.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",xI(o),vI(o,s,a),wI(s);const l=!i.getQueryCache().get(o.queryHash),[c]=x.useState(()=>new e(i,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(y=>{const v=d?c.subscribe(_t.batchCalls(y)):Zt;return c.updateResult(),v},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(o)},[o,c]),kI(o,u))throw bb(o,c,s);if(bI({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw u.error;if((m=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,o,u),o.experimental_prefetchInRender&&!so&&SI(u,r)){const y=l?bb(o,c,s):a==null?void 0:a.promise;y==null||y.catch(Zt).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Mn(t,e){return EI(t,sI)}var CI=t=>{switch(t){case"success":return NI;case"info":return AI;case"warning":return OI;case"error":return RI;default:return null}},TI=Array(12).fill(0),_I=({visible:t,className:e})=>I.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},I.createElement("div",{className:"sonner-spinner"},TI.map((n,r)=>I.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),NI=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OI=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AI=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),RI=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PI=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),MI=()=>{let[t,e]=I.useState(document.hidden);return I.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},bg=1,II=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:bg++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async l=>{if(i=["resolve",l],I.isValidElement(l))s=!1,this.create({id:n,type:"default",message:l});else if(DI(l)&&!l.ok){s=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){s=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;s&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||bg++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Xt=new II,jI=(t,e)=>{let n=(e==null?void 0:e.id)||bg++;return Xt.addToast({title:t,...e,id:n}),n},DI=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",LI=jI,$I=()=>Xt.toasts,zI=()=>Xt.getActiveToasts(),De=Object.assign(LI,{success:Xt.success,info:Xt.info,warning:Xt.warning,error:Xt.error,custom:Xt.custom,message:Xt.message,promise:Xt.promise,dismiss:Xt.dismiss,loading:Xt.loading},{getHistory:$I,getToasts:zI});function BI(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}BI(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Tu(t){return t.label!==void 0}var FI=3,UI="32px",HI="16px",xb=4e3,VI=356,WI=14,qI=20,KI=200;function Hn(...t){return t.filter(Boolean).join(" ")}function GI(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var JI=t=>{var e,n,r,s,i,o,a,l,c,u,d;let{invert:f,toast:h,unstyled:p,interacting:m,setHeights:y,visibleToasts:v,heights:w,index:b,toasts:S,expanded:k,removeToast:C,defaultRichColors:E,closeButton:_,style:A,cancelButtonStyle:N,actionButtonStyle:z,className:L="",descriptionClassName:q="",duration:F,position:Z,gap:W,loadingIcon:G,expandByDefault:O,classNames:R,icons:P,closeButtonAriaLabel:K="Close toast",pauseWhenPageIsHidden:J}=t,[ie,$]=I.useState(null),[ae,xe]=I.useState(null),[B,we]=I.useState(!1),[We,be]=I.useState(!1),[ge,ve]=I.useState(!1),[Pt,Sn]=I.useState(!1),[pi,es]=I.useState(!1),[mi,sl]=I.useState(0),[So,B0]=I.useState(0),il=I.useRef(h.duration||F||xb),F0=I.useRef(null),gi=I.useRef(null),iA=b===0,oA=b+1<=v,kn=h.type,ko=h.dismissible!==!1,aA=h.className||"",lA=h.descriptionClassName||"",ou=I.useMemo(()=>w.findIndex(oe=>oe.toastId===h.id)||0,[w,h.id]),cA=I.useMemo(()=>{var oe;return(oe=h.closeButton)!=null?oe:_},[h.closeButton,_]),U0=I.useMemo(()=>h.duration||F||xb,[h.duration,F]),zf=I.useRef(0),Eo=I.useRef(0),H0=I.useRef(0),Co=I.useRef(null),[uA,dA]=Z.split("-"),V0=I.useMemo(()=>w.reduce((oe,Ce,je)=>je>=ou?oe:oe+Ce.height,0),[w,ou]),W0=MI(),hA=h.invert||f,Bf=kn==="loading";Eo.current=I.useMemo(()=>ou*W+V0,[ou,V0]),I.useEffect(()=>{il.current=U0},[U0]),I.useEffect(()=>{we(!0)},[]),I.useEffect(()=>{let oe=gi.current;if(oe){let Ce=oe.getBoundingClientRect().height;return B0(Ce),y(je=>[{toastId:h.id,height:Ce,position:h.position},...je]),()=>y(je=>je.filter(zn=>zn.toastId!==h.id))}},[y,h.id]),I.useLayoutEffect(()=>{if(!B)return;let oe=gi.current,Ce=oe.style.height;oe.style.height="auto";let je=oe.getBoundingClientRect().height;oe.style.height=Ce,B0(je),y(zn=>zn.find(Bn=>Bn.toastId===h.id)?zn.map(Bn=>Bn.toastId===h.id?{...Bn,height:je}:Bn):[{toastId:h.id,height:je,position:h.position},...zn])},[B,h.title,h.description,y,h.id]);let ts=I.useCallback(()=>{be(!0),sl(Eo.current),y(oe=>oe.filter(Ce=>Ce.toastId!==h.id)),setTimeout(()=>{C(h)},KI)},[h,C,y,Eo]);I.useEffect(()=>{if(h.promise&&kn==="loading"||h.duration===1/0||h.type==="loading")return;let oe;return k||m||J&&W0?(()=>{if(H0.current<zf.current){let Ce=new Date().getTime()-zf.current;il.current=il.current-Ce}H0.current=new Date().getTime()})():il.current!==1/0&&(zf.current=new Date().getTime(),oe=setTimeout(()=>{var Ce;(Ce=h.onAutoClose)==null||Ce.call(h,h),ts()},il.current)),()=>clearTimeout(oe)},[k,m,h,kn,J,W0,ts]),I.useEffect(()=>{h.delete&&ts()},[ts,h.delete]);function fA(){var oe,Ce,je;return P!=null&&P.loading?I.createElement("div",{className:Hn(R==null?void 0:R.loader,(oe=h==null?void 0:h.classNames)==null?void 0:oe.loader,"sonner-loader"),"data-visible":kn==="loading"},P.loading):G?I.createElement("div",{className:Hn(R==null?void 0:R.loader,(Ce=h==null?void 0:h.classNames)==null?void 0:Ce.loader,"sonner-loader"),"data-visible":kn==="loading"},G):I.createElement(_I,{className:Hn(R==null?void 0:R.loader,(je=h==null?void 0:h.classNames)==null?void 0:je.loader),visible:kn==="loading"})}return I.createElement("li",{tabIndex:0,ref:gi,className:Hn(L,aA,R==null?void 0:R.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,R==null?void 0:R.default,R==null?void 0:R[kn],(n=h==null?void 0:h.classNames)==null?void 0:n[kn]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:E,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":B,"data-promise":!!h.promise,"data-swiped":pi,"data-removed":We,"data-visible":oA,"data-y-position":uA,"data-x-position":dA,"data-index":b,"data-front":iA,"data-swiping":ge,"data-dismissible":ko,"data-type":kn,"data-invert":hA,"data-swipe-out":Pt,"data-swipe-direction":ae,"data-expanded":!!(k||O&&B),style:{"--index":b,"--toasts-before":b,"--z-index":S.length-b,"--offset":`${We?mi:Eo.current}px`,"--initial-height":O?"auto":`${So}px`,...A,...h.style},onDragEnd:()=>{ve(!1),$(null),Co.current=null},onPointerDown:oe=>{Bf||!ko||(F0.current=new Date,sl(Eo.current),oe.target.setPointerCapture(oe.pointerId),oe.target.tagName!=="BUTTON"&&(ve(!0),Co.current={x:oe.clientX,y:oe.clientY}))},onPointerUp:()=>{var oe,Ce,je,zn;if(Pt||!ko)return;Co.current=null;let Bn=Number(((oe=gi.current)==null?void 0:oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ns=Number(((Ce=gi.current)==null?void 0:Ce.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),yi=new Date().getTime()-((je=F0.current)==null?void 0:je.getTime()),Fn=ie==="x"?Bn:ns,rs=Math.abs(Fn)/yi;if(Math.abs(Fn)>=qI||rs>.11){sl(Eo.current),(zn=h.onDismiss)==null||zn.call(h,h),xe(ie==="x"?Bn>0?"right":"left":ns>0?"down":"up"),ts(),Sn(!0),es(!1);return}ve(!1),$(null)},onPointerMove:oe=>{var Ce,je,zn,Bn;if(!Co.current||!ko||((Ce=window.getSelection())==null?void 0:Ce.toString().length)>0)return;let ns=oe.clientY-Co.current.y,yi=oe.clientX-Co.current.x,Fn=(je=t.swipeDirections)!=null?je:GI(Z);!ie&&(Math.abs(yi)>1||Math.abs(ns)>1)&&$(Math.abs(yi)>Math.abs(ns)?"x":"y");let rs={x:0,y:0};ie==="y"?(Fn.includes("top")||Fn.includes("bottom"))&&(Fn.includes("top")&&ns<0||Fn.includes("bottom")&&ns>0)&&(rs.y=ns):ie==="x"&&(Fn.includes("left")||Fn.includes("right"))&&(Fn.includes("left")&&yi<0||Fn.includes("right")&&yi>0)&&(rs.x=yi),(Math.abs(rs.x)>0||Math.abs(rs.y)>0)&&es(!0),(zn=gi.current)==null||zn.style.setProperty("--swipe-amount-x",`${rs.x}px`),(Bn=gi.current)==null||Bn.style.setProperty("--swipe-amount-y",`${rs.y}px`)}},cA&&!h.jsx?I.createElement("button",{"aria-label":K,"data-disabled":Bf,"data-close-button":!0,onClick:Bf||!ko?()=>{}:()=>{var oe;ts(),(oe=h.onDismiss)==null||oe.call(h,h)},className:Hn(R==null?void 0:R.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},(i=P==null?void 0:P.close)!=null?i:PI):null,h.jsx||x.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:I.createElement(I.Fragment,null,kn||h.icon||h.promise?I.createElement("div",{"data-icon":"",className:Hn(R==null?void 0:R.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||fA():null,h.type!=="loading"?h.icon||(P==null?void 0:P[kn])||CI(kn):null):null,I.createElement("div",{"data-content":"",className:Hn(R==null?void 0:R.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},I.createElement("div",{"data-title":"",className:Hn(R==null?void 0:R.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?I.createElement("div",{"data-description":"",className:Hn(q,lA,R==null?void 0:R.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),x.isValidElement(h.cancel)?h.cancel:h.cancel&&Tu(h.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:oe=>{var Ce,je;Tu(h.cancel)&&ko&&((je=(Ce=h.cancel).onClick)==null||je.call(Ce,oe),ts())},className:Hn(R==null?void 0:R.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,x.isValidElement(h.action)?h.action:h.action&&Tu(h.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||z,onClick:oe=>{var Ce,je;Tu(h.action)&&((je=(Ce=h.action).onClick)==null||je.call(Ce,oe),!oe.defaultPrevented&&ts())},className:Hn(R==null?void 0:R.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function Sb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function QI(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?HI:UI;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var YI=x.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:f,style:h,visibleToasts:p=FI,toastOptions:m,dir:y=Sb(),gap:v=WI,loadingIcon:w,icons:b,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:k}=t,[C,E]=I.useState([]),_=I.useMemo(()=>Array.from(new Set([r].concat(C.filter(J=>J.position).map(J=>J.position)))),[C,r]),[A,N]=I.useState([]),[z,L]=I.useState(!1),[q,F]=I.useState(!1),[Z,W]=I.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=I.useRef(null),O=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=I.useRef(null),P=I.useRef(!1),K=I.useCallback(J=>{E(ie=>{var $;return($=ie.find(ae=>ae.id===J.id))!=null&&$.delete||Xt.dismiss(J.id),ie.filter(({id:ae})=>ae!==J.id)})},[]);return I.useEffect(()=>Xt.subscribe(J=>{if(J.dismiss){E(ie=>ie.map($=>$.id===J.id?{...$,delete:!0}:$));return}setTimeout(()=>{wv.flushSync(()=>{E(ie=>{let $=ie.findIndex(ae=>ae.id===J.id);return $!==-1?[...ie.slice(0,$),{...ie[$],...J},...ie.slice($+1)]:[J,...ie]})})})}),[]),I.useEffect(()=>{if(u!=="system"){W(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:ie})=>{W(ie?"dark":"light")})}catch{J.addListener(({matches:$})=>{try{W($?"dark":"light")}catch(ae){console.error(ae)}})}},[u]),I.useEffect(()=>{C.length<=1&&L(!1)},[C]),I.useEffect(()=>{let J=ie=>{var $,ae;s.every(xe=>ie[xe]||ie.code===xe)&&(L(!0),($=G.current)==null||$.focus()),ie.code==="Escape"&&(document.activeElement===G.current||(ae=G.current)!=null&&ae.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[s]),I.useEffect(()=>{if(G.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,P.current=!1)}},[G.current]),I.createElement("section",{ref:e,"aria-label":`${S} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((J,ie)=>{var $;let[ae,xe]=J.split("-");return C.length?I.createElement("ol",{key:J,dir:y==="auto"?Sb():y,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":ae,"data-lifted":z&&C.length>1&&!i,"data-x-position":xe,style:{"--front-toast-height":`${(($=A[0])==null?void 0:$.height)||0}px`,"--width":`${VI}px`,"--gap":`${v}px`,...h,...QI(l,c)},onBlur:B=>{P.current&&!B.currentTarget.contains(B.relatedTarget)&&(P.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:B=>{B.target instanceof HTMLElement&&B.target.dataset.dismissible==="false"||P.current||(P.current=!0,R.current=B.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{q||L(!1)},onDragEnd:()=>L(!1),onPointerDown:B=>{B.target instanceof HTMLElement&&B.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},C.filter(B=>!B.position&&ie===0||B.position===J).map((B,we)=>{var We,be;return I.createElement(JI,{key:B.id,icons:b,index:we,toast:B,defaultRichColors:d,duration:(We=m==null?void 0:m.duration)!=null?We:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:p,closeButton:(be=m==null?void 0:m.closeButton)!=null?be:o,interacting:q,position:J,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:K,toasts:C.filter(ge=>ge.position==B.position),heights:A.filter(ge=>ge.position==B.position),setHeights:N,expandByDefault:i,gap:v,loadingIcon:w,expanded:z,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const kb=t=>{let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,s,a);return a},XI=t=>t?kb(t):kb,ZI=t=>t;function e2(t,e=ZI){const n=I.useSyncExternalStore(t.subscribe,I.useCallback(()=>e(t.getState()),[t,e]),I.useCallback(()=>e(t.getInitialState()),[t,e]));return I.useDebugValue(n),n}const Eb=t=>{const e=XI(t),n=r=>e2(e,r);return Object.assign(n,e),n},t2=t=>t?Eb(t):Eb,Av=t2(t=>({user:null,loading:!0,login:e=>t({user:e}),logout:()=>t({user:null}),setLoading:e=>t({loading:e})}));var gr=function(){return gr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gr.apply(this,arguments)};function Xa(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function n2(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function r2(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}const s2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Rv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class i2 extends Rv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cb extends Rv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Tb extends Rv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xg||(xg={}));class o2{constructor(e,{headers:n={},customFetch:r,region:s=xg.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=s2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return n2(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let m;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=c):typeof c=="string"?(f["Content-Type"]="text/plain",m=c):typeof FormData<"u"&&c instanceof FormData?m=c:(f["Content-Type"]="application/json",m=JSON.stringify(c)):m=c;let y=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(y=o.signal,u.addEventListener("abort",()=>o.abort())):y=o.signal);const v=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:m,signal:y}).catch(k=>{throw new i2(k)}),w=v.headers.get("x-relay-error");if(w&&w==="true")throw new Cb(v);if(!v.ok)throw new Tb(v);let b=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield v.json():b==="application/octet-stream"||b==="application/pdf"?S=yield v.blob():b==="text/event-stream"?S=v:b==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof Tb||a instanceof Cb?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var a2=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},l2=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,c=i.status,u=i.statusText;if(i.ok){var d,f;if(n.method!=="HEAD"){var h;const v=await i.text();v===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((h=n.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?a=v:a=JSON.parse(v))}const m=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&y&&y.length>1&&(l=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;const m=await i.text();try{o=JSON.parse(m),Array.isArray(o)&&i.status===404&&(a=[],o=null,c=200,u="OK")}catch{i.status===404&&m===""?(c=204,u="No Content"):o={message:m}}if(o&&n.isMaybeSingle&&(!(o==null||(p=o.details)===null||p===void 0)&&p.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new a2(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var c,u,d,f;const p=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",m=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";a=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${p}`,m&&(a+=` (${m})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var h;a=(h=i==null?void 0:i.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},c2=class extends l2{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const _b=new RegExp("[,()]");var $o=class extends c2{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&_b.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&_b.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},u2=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new $o({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new $o({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new $o({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new $o({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new $o({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},d2=class qE{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new u2(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qE(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(a="POST",c=n);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new $o({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class h2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const f2="2.89.0",p2=`realtime-js/${f2}`,KE="1.0.0",m2="2.0.0",Nb=KE,Sg=1e4,g2=1e3,y2=100;var ms;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ms||(ms={}));var ut;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ut||(ut={}));var Yn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yn||(Yn={}));var kg;(function(t){t.websocket="websocket"})(kg||(kg={}));var Ci;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ci||(Ci={}));class v2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(h),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,l.length),p.setUint8(m++,a.length),p.setUint8(m++,o.length),p.setUint8(m++,c.length),p.setUint8(m++,d.length),p.setUint8(m++,n),Array.from(l,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(a,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(o,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(c,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(d,v=>p.setUint8(m++,v.charCodeAt(0)));var y=new Uint8Array(h.byteLength+r.byteLength);return y.set(new Uint8Array(h),0),y.set(new Uint8Array(r),h.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),h=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,p={type:this.BROADCAST_EVENT,event:u,payload:h};return o>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class GE{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ne||(Ne={}));const Ob=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=w2(o,t,e,s),i),{}):{}},w2=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?JE(i,o):Eg(o)},JE=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return k2(e,n)}switch(t){case Ne.bool:return b2(e);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return x2(e);case Ne.json:case Ne.jsonb:return S2(e);case Ne.timestamp:return E2(e);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return Eg(e);default:return Eg(e)}},Eg=t=>t,b2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},x2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},S2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},k2=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>JE(e,a))}return t},E2=t=>typeof t=="string"?t.replace(" ","T"):t,QE=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class mp{constructor(e,n,r={},s=Sg){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ab;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ab||(Ab={}));class Bl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Bl.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bl.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(y=>y.presence_ref),h=d.map(y=>y.presence_ref),p=u.filter(y=>h.indexOf(y.presence_ref)<0),m=d.filter(y=>f.indexOf(y.presence_ref)<0);p.length>0&&(a[c]=p),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(h=>h.presence_ref),f=u.filter(h=>d.indexOf(h.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Rb||(Rb={}));var Fl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fl||(Fl={}));var Pr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pr||(Pr={}));class ra{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new mp(this,Yn.join,this.params,this.timeout),this.rejoinTimer=new GE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Bl(this),this.broadcastEndpointURL=QE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Fl.PRESENCE]&&this.bindings[Fl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(Pr.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Pr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){e==null||e(Pr.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,v=[];for(let w=0;w<y;w++){const b=m[w],{filter:{event:S,schema:k,table:C,filter:E}}=b,_=h&&h[w];if(_&&_.event===S&&ra.isFilterValueEqual(_.schema,k)&&ra.isFilterValueEqual(_.table,C)&&ra.isFilterValueEqual(_.filter,E))v.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(Pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Pr.SUBSCRIBED);return}}).receive("error",h=>{this.state=ut.errored,e==null||e(Pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ut.joined&&e===Fl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new mp(this,Yn.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new mp(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>y2){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Yn;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var p,m,y;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(m=h.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var p,m,y,v,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const S=h.id,k=(p=h.filter)===null||p===void 0?void 0:p.event;return S&&((m=n.ids)===null||m===void 0?void 0:m.includes(S))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(w=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:m,table:y,commit_timestamp:v,type:w,errors:b}=p;f=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:v,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ra.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yn.close,{},e)}_onError(e){this._on(Yn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ob(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ob(e.columns,e.old_record)),n}}const gp=()=>{},_u={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},C2=[1e3,2e3,5e3,1e4],T2=1e4,_2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class N2{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sg,this.transport=null,this.heartbeatIntervalMs=_u.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gp,this.ref=0,this.reconnectTimer=null,this.vsn=Nb,this.logger=gp,this.conn=null,this.sendBuffer=[],this.serializer=new v2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${kg.websocket}`,this.httpEndpoint=QE(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ms.connecting:return Ci.Connecting;case ms.open:return Ci.Open;case ms.closing:return Ci.Closing;default:return Ci.Closed}}isConnected(){return this.connectionState()===Ci.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ra(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(g2,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},_u.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ms.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ms.open||this.conn.readyState===ms.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_2],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:p2};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Yn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new GE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_u.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,u,d,f,h;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Sg,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:_u.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:gp,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Nb,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:p=>C2[p-1]||T2,this.vsn){case KE:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(p,m)=>m(JSON.stringify(p)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(p,m)=>m(JSON.parse(p));break;case m2:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var wc=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function O2(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function A2(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function R2(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=O2(t.baseUrl,r,s),l=await A2(t.auth),c=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&u?JSON.parse(u):u;if(!c.ok){const h=d?f:void 0,p=h==null?void 0:h.error;throw new wc((p==null?void 0:p.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:h})}return{status:c.status,headers:c.headers,data:f}}}}function Nu(t){return t.join("")}var P2=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Nu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Nu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Nu(t.namespace)}`}),!0}catch(e){if(e instanceof wc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof wc&&n.status===409)return;throw n}}};function _o(t){return t.join("")}var M2=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_o(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_o(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_o(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_o(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_o(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_o(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof wc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof wc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},I2=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=R2({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new P2(this.client,e),this.tableOps=new M2(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},lf=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function $e(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var j2=class extends lf{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Cg=class extends lf{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Pv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),D2=()=>Response,Tg=t=>{if(Array.isArray(t))return t.map(n=>Tg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Tg(r)}),e},L2=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},$2=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}function z2(t,e){if(bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B2(t){var e=z2(t,"string");return bc(e)=="symbol"?e:e+""}function F2(t,e,n){return(e=B2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pb(Object(n),!0).forEach(function(r){F2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const yp=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},U2=async(t,e,n)=>{t instanceof await D2()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new j2(yp(r),s,i))}).catch(r=>{e(new Cg(yp(r),r))}):e(new Cg(yp(t),t))},H2=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(L2(r)?(s.headers=ne({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),ne(ne({},s),n))};async function Xc(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,H2(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>U2(l,a,r))})}async function xc(t,e,n,r){return Xc(t,"GET",e,n,r)}async function Kn(t,e,n,r,s){return Xc(t,"POST",e,r,s,n)}async function _g(t,e,n,r,s){return Xc(t,"PUT",e,r,s,n)}async function V2(t,e,n,r){return Xc(t,"HEAD",e,ne(ne({},n),{},{noResolveJson:!0}),r)}async function Mv(t,e,n,r,s){return Xc(t,"DELETE",e,r,s,n)}var W2=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($e(e))return{data:null,error:e};throw e}}};let YE;YE=Symbol.toStringTag;var q2=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[YE]="BlobDownloadBuilder",this.promise=null}asStream(){return new W2(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($e(e))return{data:null,error:e};throw e}}};const K2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var G2=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Pv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let i;const o=ne(ne({},Mb),r);let a=ne(ne({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=ne(ne({},a),r.headers));const c=s._removeEmptyFolders(e),u=s._getFinalPath(c),d=await(t=="PUT"?_g:Kn)(s.fetch,`${s.url}/object/${u}`,i,ne({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=ne({upsert:Mb.upsert},r),u=ne(ne({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(await _g(s.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=ne({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Kn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new lf("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Kn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await Kn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),i=await Kn(r.fetch,`${r.url}/object/sign/${s}`,ne({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await Kn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>ne(ne({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>xc(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new q2(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Tg(await xc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await V2(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($e(r)&&r instanceof Cg){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await Mv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=ne(ne(ne({},K2),e),{},{prefix:t||""});return{data:await Kn(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=ne({},t);return{data:await Kn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const XE="2.89.0",ZE={"X-Client-Info":`storage-js/${XE}`};var J2=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=ne(ne({},ZE),e),this.fetch=Pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await xc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await xc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Kn(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await _g(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Kn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Mv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Q2=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ne(ne({},ZE),e),this.fetch=Pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Kn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await xc(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Mv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!$2(t))throw new lf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new I2({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Iv={"X-Client-Info":`storage-js/${XE}`,"Content-Type":"application/json"};var eC=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function hn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var vp=class extends eC{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Y2=class extends eC{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const jv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),X2=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ib=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Z2=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new vp(Ib(i),r,o))}).catch(()=>{const i=r+"";e(new vp(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new vp(s.statusText||`HTTP ${r} error`,r,i))}}else e(new Y2(Ib(t),t))},ej=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(X2(r)?(s.headers=ne({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,ne(ne({},s),n)):s};async function tj(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,ej(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Z2(l,a,r))})}async function fn(t,e,n,r,s){return tj(t,"POST",e,r,s,n)}var nj=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ne(ne({},Iv),e),this.fetch=jv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await fn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await fn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await fn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await fn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}}},rj=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ne(ne({},Iv),e),this.fetch=jv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await fn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await fn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await fn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await fn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await fn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}},sj=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ne(ne({},Iv),e),this.fetch=jv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await fn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await fn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await fn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await fn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}}},ij=class extends sj{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new oj(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},oj=class extends nj{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ne(ne({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ne(ne({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new aj(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},aj=class extends rj{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ne(ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ne(ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ne(ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ne(ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ne(ne({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},lj=class extends J2{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new G2(this.url,this.headers,t,this.fetch)}get vectors(){return new ij(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Q2(this.url+"/iceberg",this.headers,this.fetch)}};const tC="2.89.0",zo=30*1e3,Ng=3,wp=Ng*zo,cj="http://localhost:9999",uj="supabase.auth.token",dj={"X-Client-Info":`gotrue-js/${tC}`},Og="X-Supabase-Api-Version",nC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fj=10*60*1e3;class Sc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class pj extends Sc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function mj(t){return Q(t)&&t.name==="AuthApiError"}class Ti extends Sc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Xr extends Sc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class cn extends Xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gj(t){return Q(t)&&t.name==="AuthSessionMissingError"}class No extends Xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ou extends Xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Au extends Xr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yj(t){return Q(t)&&t.name==="AuthImplicitGrantRedirectError"}class jb extends Xr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vj extends Xr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ag extends Xr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function bp(t){return Q(t)&&t.name==="AuthRetryableFetchError"}class Db extends Xr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Rg extends Xr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lb=` 	
\r=`.split(""),wj=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Lb.length;e+=1)t[Lb[e].charCodeAt(0)]=-2;for(let e=0;e<Hd.length;e+=1)t[Hd[e].charCodeAt(0)]=e;return t})();function $b(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hd[r]),e.queuedBits-=6}}function rC(t,e,n){const r=wj[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function zb(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Sj(o,r,n)};for(let o=0;o<t.length;o+=1)rC(t.charCodeAt(o),s,i);return e.join("")}function bj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function xj(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}bj(r,e)}}function Sj(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function da(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)rC(t.charCodeAt(s),n,r);return new Uint8Array(e)}function kj(t){const e=[];return xj(t,n=>e.push(n)),new Uint8Array(e)}function Pi(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>$b(s,n,r)),$b(null,n,r),e.join("")}function Ej(t){return Math.round(Date.now()/1e3)+t}function Cj(){return Symbol("auth-callback")}const Et=()=>typeof window<"u"&&typeof document<"u",vi={tested:!1,writable:!1},sC=()=>{if(!Et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vi.tested)return vi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vi.tested=!0,vi.writable=!0}catch{vi.tested=!0,vi.writable=!1}return vi.writable};function Tj(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const iC=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_j=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Bo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},wi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},kt=async(t,e)=>{await t.removeItem(e)};class cf{constructor(){this.promise=new cf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}cf.promiseConstructor=Promise;function xp(t){const e=t.split(".");if(e.length!==3)throw new Rg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!hj.test(e[r]))throw new Rg("JWT not in base64url format");return{header:JSON.parse(zb(e[0])),payload:JSON.parse(zb(e[1])),signature:da(e[2]),raw:{header:e[0],payload:e[1]}}}async function Nj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Oj(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Aj(t){return("0"+t.toString(16)).substr(-2)}function Rj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Aj).join("")}async function Pj(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Mj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Pj(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oo(t,e,n=!1){const r=Rj();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Bo(t,`${e}-code-verifier`,s);const i=await Mj(r);return[i,r===i?"plain":"s256"]}const Ij=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jj(t){const e=t.headers.get(Og);if(!e||!e.match(Ij))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Dj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Lj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $j=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ao(t){if(!$j.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sp(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zj(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function Bb(t){return JSON.parse(JSON.stringify(t))}const ki=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Bj=[502,503,504];async function Fb(t){var e;if(!_j(t))throw new Ag(ki(t),0);if(Bj.includes(t.status))throw new Ag(ki(t),t.status);let n;try{n=await t.json()}catch(i){throw new Ti(ki(i),i)}let r;const s=jj(t);if(s&&s.getTime()>=nC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Db(ki(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new cn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Db(ki(n),t.status,n.weak_password.reasons);throw new pj(ki(n),t.status||500,r)}const Fj=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function te(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Og]||(i[Og]=nC["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Uj(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Uj(t,e,n,r,s,i){const o=Fj(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Ag(ki(l),0)}if(a.ok||await Fb(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Fb(l)}}function Vn(t){var e;let n=null;Wj(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Ej(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ub(t){const e=Vn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function xs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Hj(t){return{data:t,error:null}}function Vj(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Xa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Hb(t){return t}function Wj(t){return t.access_token&&t.refresh_token&&t.expires_in}const kp=["global","local","others"];class qj{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=iC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=kp[0]){if(kp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kp.join(", ")}`);try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:xs})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Xa(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Vj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xs})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Hb});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ao(e);try{return await te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xs})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ao(e);try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:xs})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ao(e);try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:xs})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ao(e.userId);try{const{data:n,error:r}=await te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ao(e.userId),Ao(e.id);try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Hb});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Q(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}}function Vb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ro={debug:!!(globalThis&&sC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Kj extends oC{}async function Gj(t,e,n){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Kj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ro.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Jj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function aC(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Qj(t){return parseInt(t,16)}function Yj(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Xj(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=aC(t.address),p=u?`${u}://${r}`:r,m=t.statement?`${t.statement}
`:"",y=`${p} wants you to sign in with your Ethereum account:
${h}

${m}`;let v=`URI: ${d}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),l&&(v+=`
Request ID: ${l}`),c){let w=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}v+=w}return`${y}
${v}`}class rt extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Vd extends rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Zj({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(lC(o)){if(i.rp.id!==o)return new rt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function eD({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(lC(r)){if(n.rpId!==r)return new rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class tD{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const nD=new tD;function rD(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Xa(t,["challenge","user","excludeCredentials"]),i=da(e).buffer,o=Object.assign(Object.assign({},n),{id:da(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:da(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function sD(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Xa(t,["challenge","allowCredentials"]),s=da(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:da(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function iD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Pi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Pi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Pi(new Uint8Array(s.authenticatorData)),clientDataJSON:Pi(new Uint8Array(s.clientDataJSON)),signature:Pi(new Uint8Array(s.signature)),userHandle:s.userHandle?Pi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lC(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Wb(){var t,e;return!!(Et()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function aD(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vd("Browser returned unexpected credential type",e)}:{data:null,error:new Vd("Empty credential response",e)}}catch(e){return{data:null,error:Zj({error:e,options:t})}}}async function lD(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vd("Browser returned unexpected credential type",e)}:{data:null,error:new Vd("Empty credential response",e)}}catch(e){return{data:null,error:eD({error:e,options:t})}}}const cD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},uD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Wd(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=Wd(a,o):r[i]=Wd(o)}else r[i]=o}return r}function dD(t,e){return Wd(cD,t,e||{})}function hD(t,e){return Wd(uD,t,e||{})}class fD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??nD.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=dD(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await aD({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=hD(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await lD(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return Q(o)?{data:null,error:o}:{data:null,error:new Ti("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Sc("rpId is required for WebAuthn authentication")};try{if(!Wb())return{data:null,error:new Ti("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Q(o)?{data:null,error:o}:{data:null,error:new Ti("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Sc("rpId is required for WebAuthn registration")};try{if(!Wb())return{data:null,error:new Ti("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Q(o)?{data:null,error:o}:{data:null,error:new Ti("Unexpected error in register",o)}}}}Jj();const pD={url:cj,storageKey:uj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function qb(t,e,n){return await n()}const Po={};class kc{get jwks(){var e,n;return(n=(e=Po[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Po[this.storageKey]=Object.assign(Object.assign({},Po[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Po[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Po[this.storageKey]=Object.assign(Object.assign({},Po[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},pD),e);if(this.storageKey=i.storageKey,this.instanceID=(n=kc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,kc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Et()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new qj({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=iC(i.fetch),this.lock=i.lock||qb,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Et()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Gj:this.lock=qb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:sC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vb(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Vb(this.memoryStorage)),Et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tC}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Et()&&(n=Tj(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Et()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),yj(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Q(n)?this._returnResult({error:n}):this._returnResult({error:new Ti("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Vn}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Q(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Oo(this.storage,this.storageKey)),i=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},xform:Vn})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vn})}else throw new Ou("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await kt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await kt(this.storage,`${this.storageKey}-code-verifier`),Q(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ub})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ub})}else throw new Ou("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new No;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,c,u,d,f;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:m,wallet:y,statement:v,options:w}=e;let b;if(Et())if(typeof y=="object")b=y;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")b=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const S=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),k=await b.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=aC(k[0]);let E=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const A=await b.request({method:"eth_chainId"});E=Qj(A)}const _={domain:S.host,address:C,statement:v,uri:S.href,version:"1",chainId:E,nonce:(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.resources};h=Xj(_),p=await b.request({method:"personal_sign",params:[Yj(h),C]})}try{const{data:m,error:y}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Vn});if(y)throw y;if(!m||!m.session||!m.user){const v=new No;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:y})}catch(m){if(Q(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var n,r,s,i,o,a,l,c,u,d,f,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:v,statement:w,options:b}=e;let S;if(Et())if(typeof v=="object")S=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const k=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:y,error:v}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Pi(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Vn});if(v)throw v;if(!y||!y.session||!y.user){const w=new No;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(Q(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const n=await wi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new vj;const{data:i,error:o}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Vn});if(await kt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new No;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await kt(this.storage,`${this.storageKey}-code-verifier`),Q(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Vn}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new No;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Oo(this.storage,this.storageKey));const{error:d}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Ou("You must provide either an email or phone number.")}catch(a){if(await kt(this.storage,`${this.storageKey}-code-verifier`),Q(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Vn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Oo(this.storage,this.storageKey));const c=await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Hj});return!((i=c.data)===null||i===void 0)&&i.url&&Et()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await kt(this.storage,`${this.storageKey}-code-verifier`),Q(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new cn;const{error:s}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Q(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await te(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await te(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Ou("You must provide either an email or phone number and a type")}catch(n){if(Q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await wi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await wi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Sp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=zj(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xs}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cn}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:xs})})}catch(n){if(Q(n))return gj(n)&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new cn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Oo(this.storage,this.storageKey));const{data:c,error:u}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:xs});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await kt(this.storage,`${this.storageKey}-code-verifier`),Q(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new cn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=xp(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Q(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new cn;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Q(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Et())throw new Au("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Au(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Au("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jb("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Au("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const h=f-u;h*1e3<=zo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=f-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:m,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(r){if(Q(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await wi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(mj(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Cj(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Oo(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await kt(this.storage,`${this.storageKey}-code-verifier`),Q(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Et()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Q(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Vn}),{data:f,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new No}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:h}))}catch(s){if(await kt(this.storage,`${this.storageKey}-code-verifier`),Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Oj(async s=>(s>0&&await Nj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&bp(i)&&Date.now()+o-r<zo})}catch(r){if(this._debug(n,"error",r),Q(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Et()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await wi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await wi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Bo(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Sp()}else if(s&&!s.user&&!s.user){const o=await wi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await kt(this.storage,this.storageKey+"-user"),await Bo(this.storage,this.storageKey,s)):s.user=Sp()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<wp;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${wp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),bp(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new cn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new cf;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new cn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Q(i)){const o={data:null,error:i};return bp(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await kt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Bo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Bb(s);await Bo(this.storage,this.storageKey,i)}else{const s=Bb(n);await Bo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await kt(this.storage,this.storageKey),await kt(this.storage,this.storageKey+"-code-verifier"),await kt(this.storage,this.storageKey+"-user"),this.userStorage&&await kt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/zo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${zo}ms, refresh threshold is ${Ng} ticks`),s<=Ng&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Oo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await te(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?iD(e.webauthn.credential_response):oD(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:rD(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:sD(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=xp(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await te(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new cn})})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new cn});const o=await te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Et()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Q(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new cn});const o=await te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Et()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Q(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await te(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new cn})})}catch(e){if(Q(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await te(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new cn})})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+fj>s)return r;const{data:i,error:o}=await te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:h,error:p}=await this.getSession();if(p||!h.session)return this._returnResult({data:null,error:p});r=h.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=xp(r);n!=null&&n.allowExpired||Dj(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:i,header:s,signature:o},error:null}}const u=Lj(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,kj(`${a}.${l}`)))throw new Rg("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Q(r))return this._returnResult({data:null,error:r});throw r}}}kc.nextInstanceID={};const mD=kc,gD="2.89.0";let El="";typeof Deno<"u"?El="deno":typeof document<"u"?El="web":typeof navigator<"u"&&navigator.product==="ReactNative"?El="react-native":El="node";const yD={"X-Client-Info":`supabase-js-${El}/${gD}`},vD={headers:yD},wD={schema:"public"},bD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xD={};function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function SD(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kD(t){var e=SD(t,"string");return Ec(e)=="symbol"?e:e+""}function ED(t,e,n){return(e=kD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kb(Object(n),!0).forEach(function(r){ED(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const CD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TD=()=>Headers,_D=(t,e,n)=>{const r=CD(n),s=TD();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Ge(Ge({},o),{},{headers:c}))}};function ND(t){return t.endsWith("/")?t:t+"/"}function OD(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,f={db:Ge(Ge({},l),s),auth:Ge(Ge({},c),i),realtime:Ge(Ge({},u),o),storage:{},global:Ge(Ge(Ge({},d),a),{},{headers:Ge(Ge({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function AD(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ND(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var RD=class extends mD{constructor(t){super(t)}},PD=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=AD(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:wD,realtime:xD,auth:Ge(Ge({},bD),{},{storageKey:o}),global:vD},l=OD(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=_D(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Ge({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new d2(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new lj(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new o2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RD({url:this.authUrl.href,headers:Ge(Ge({},f),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new N2(this.realtimeUrl.href,Ge(Ge({},t),{},{params:Ge(Ge({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const MD=(t,e,n)=>new PD(t,e,n);function ID(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ID()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jD="https://wymjjiurbvevjafsqsrq.supabase.co",DD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind5bWpqaXVyYnZldmphZnNxc3JxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzMDg0OTYsImV4cCI6MjA4Mzg4NDQ5Nn0.9zVR3n5PzCuAfUtzz_X-Lh2DNu3cNcQwfKLwBzh9YgY",ue=MD(jD,DD,{auth:{flowType:"pkce",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});function Ep(t){var e;return{id:t.id,email:t.email,username:((e=t.user_metadata)==null?void 0:e.username)||t.email.split("@")[0]}}function Zc(){const{user:t,loading:e,login:n,logout:r,setLoading:s}=Av();return x.useEffect(()=>{let i=!0;ue.auth.getSession().then(({data:{session:a}})=>{i&&(a!=null&&a.user)&&n(Ep(a.user)),i&&s(!1)});const{data:{subscription:o}}=ue.auth.onAuthStateChange((a,l)=>{i&&(a==="SIGNED_IN"&&(l!=null&&l.user)?(n(Ep(l.user)),s(!1)):a==="SIGNED_OUT"?(r(),s(!1)):a==="TOKEN_REFRESHED"&&(l!=null&&l.user)&&n(Ep(l.user)))});return()=>{i=!1,o.unsubscribe()}},[n,r,s]),{user:t,loading:e,logout:r}}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $D={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>x.createElement("svg",{ref:l,...$D,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:cC("lucide",s),...a},[...o.map(([c,u])=>x.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(t,e)=>{const n=x.forwardRef(({className:r,...s},i)=>x.createElement(zD,{ref:i,iconNode:e,className:cC(`lucide-${LD(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=he("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=he("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=he("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=he("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=he("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=he("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=he("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=he("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=he("Cross",[["path",{d:"M4 9a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a1 1 0 0 1 1 1v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a1 1 0 0 1 1-1h4a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a1 1 0 0 1-1-1V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4a1 1 0 0 1-1 1z",key:"1xbrqy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=he("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=he("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=he("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=he("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=he("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=he("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=he("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=he("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=he("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=he("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=he("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=he("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function Jb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function mC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Jb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Jb(t[s],null)}}}}function Xe(...t){return x.useCallback(mC(...t),t)}function Cc(t){const e=gL(t),n=x.forwardRef((r,s)=>{const{children:i,...o}=r,a=x.Children.toArray(i),l=a.find(vL);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return g.jsx(e,{...o,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return g.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var mL=Cc("Slot");function gL(t){const e=x.forwardRef((n,r)=>{const{children:s,...i}=n;if(x.isValidElement(s)){const o=bL(s),a=wL(i,s.props);return s.type!==x.Fragment&&(a.ref=r?mC(r,o):o),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gC=Symbol("radix.slottable");function yL(t){const e=({children:n})=>g.jsx(g.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=gC,e}function vL(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gC}function wL(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function bL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function yC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=yC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function vC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=yC(t))&&(r&&(r+=" "),r+=e);return r}const Qb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Yb=vC,Lv=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Yb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=Qb(u)||Qb(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(p=>{let[m,y]=p;return Array.isArray(y)?y.includes({...i,...a}[m]):{...i,...a}[m]===y})?[...c,d,f]:c},[]);return Yb(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},$v="-",xL=t=>{const e=kL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split($v);return a[0]===""&&a.length!==1&&a.shift(),wC(a,e)||SL(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},wC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?wC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join($v);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Xb=/^\[(.+)\]$/,SL=t=>{if(Xb.test(t)){const e=Xb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},kL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return CL(Object.entries(t.classGroups),n).forEach(([i,o])=>{Mg(o,r,i,e)}),r},Mg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Zb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(EL(s)){Mg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Mg(o,Zb(e,i),n,r)})})},Zb=(t,e)=>{let n=t;return e.split($v).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},EL=t=>t.isThemeGetter,CL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,TL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},bC="!",_L=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let y=0;y<a.length;y++){let v=a[y];if(c===0){if(v===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(u,y)),u=y+i;continue}if(v==="/"){d=y;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),h=f.startsWith(bC),p=h?f.substring(1):f,m=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},NL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},OL=t=>({cache:TL(t.cacheSize),parseClassName:_L(t),...xL(t)}),AL=/\s+/,RL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(AL);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(c);let p=!!h,m=r(p?f.substring(0,h):f);if(!m){if(!p){a=c+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=c+(a.length>0?" "+a:a);continue}p=!1}const y=NL(u).join(":"),v=d?y+bC:y,w=v+m;if(i.includes(w))continue;i.push(w);const b=s(m,p);for(let S=0;S<b.length;++S){const k=b[S];i.push(v+k)}a=c+(a.length>0?" "+a:a)}return a};function PL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=xC(e))&&(r&&(r+=" "),r+=n);return r}const xC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=xC(t[r]))&&(n&&(n+=" "),n+=e);return n};function ML(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=OL(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=RL(l,n);return s(l,u),u}return function(){return i(PL.apply(null,arguments))}}const Re=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},SC=/^\[(?:([a-z-]+):)?(.+)\]$/i,IL=/^\d+\/\d+$/,jL=new Set(["px","full","screen"]),DL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$L=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Cr=t=>ha(t)||jL.has(t)||IL.test(t),is=t=>Za(t,"length",GL),ha=t=>!!t&&!Number.isNaN(Number(t)),Cp=t=>Za(t,"number",ha),pl=t=>!!t&&Number.isInteger(Number(t)),FL=t=>t.endsWith("%")&&ha(t.slice(0,-1)),le=t=>SC.test(t),as=t=>DL.test(t),UL=new Set(["length","size","percentage"]),HL=t=>Za(t,UL,kC),VL=t=>Za(t,"position",kC),WL=new Set(["image","url"]),qL=t=>Za(t,WL,QL),KL=t=>Za(t,"",JL),ml=()=>!0,Za=(t,e,n)=>{const r=SC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},GL=t=>LL.test(t)&&!$L.test(t),kC=()=>!1,JL=t=>zL.test(t),QL=t=>BL.test(t),YL=()=>{const t=Re("colors"),e=Re("spacing"),n=Re("blur"),r=Re("brightness"),s=Re("borderColor"),i=Re("borderRadius"),o=Re("borderSpacing"),a=Re("borderWidth"),l=Re("contrast"),c=Re("grayscale"),u=Re("hueRotate"),d=Re("invert"),f=Re("gap"),h=Re("gradientColorStops"),p=Re("gradientColorStopPositions"),m=Re("inset"),y=Re("margin"),v=Re("opacity"),w=Re("padding"),b=Re("saturate"),S=Re("scale"),k=Re("sepia"),C=Re("skew"),E=Re("space"),_=Re("translate"),A=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",le,e],L=()=>[le,e],q=()=>["",Cr,is],F=()=>["auto",ha,le],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",le],P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[ha,le];return{cacheSize:500,separator:":",theme:{colors:[ml],spacing:[Cr,is],blur:["none","",as,le],brightness:K(),borderColor:[t],borderRadius:["none","","full",as,le],borderSpacing:L(),borderWidth:q(),contrast:K(),grayscale:R(),hueRotate:K(),invert:R(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[FL,is],inset:z(),margin:z(),opacity:K(),padding:L(),saturate:K(),scale:K(),sepia:R(),skew:K(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",le]}],container:["container"],columns:[{columns:[as]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),le]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",pl,le]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",le]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",pl,le]}],"grid-cols":[{"grid-cols":[ml]}],"col-start-end":[{col:["auto",{span:["full",pl,le]},le]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[ml]}],"row-start-end":[{row:["auto",{span:[pl,le]},le]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",le]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",le,e]}],"min-w":[{"min-w":[le,e,"min","max","fit"]}],"max-w":[{"max-w":[le,e,"none","full","min","max","fit","prose",{screen:[as]},as]}],h:[{h:[le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",as,is]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cp]}],"font-family":[{font:[ml]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",le]}],"line-clamp":[{"line-clamp":["none",ha,Cp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Cr,le]}],"list-image":[{"list-image":["none",le]}],"list-style-type":[{list:["none","disc","decimal",le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Cr,is]}],"underline-offset":[{"underline-offset":["auto",Cr,le]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),VL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",HL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},qL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[Cr,le]}],"outline-w":[{outline:[Cr,is]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Cr,is]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",as,KL]}],"shadow-color":[{shadow:[ml]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",as,le]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",le]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",le]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[pl,le]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",le]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Cr,is,Cp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},XL=ML(YL);function He(...t){return XL(vC(t))}const ZL=t=>t==null?"0":t<1e3?String(t):t<1e6?`${Math.round(t/1e3*10)/10}k`:`${Math.round(t/1e6*10)/10}M`,e$=Lv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 overflow-hidden interactive ripple [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?mL:"button";return g.jsx(o,{className:He(e$({variant:e,size:n,className:t})),ref:i,...s})});se.displayName="Button";function t$(){const t=yo(),{user:e,logout:n}=Zc(),r=i=>t.pathname===i,s=async()=>{try{await n()}catch(i){console.error("Logout error:",i)}};return g.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/60 shadow-sm","data-version":"2026-01-14-v5",children:g.jsxs("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8 h-16 sm:h-18 flex items-center justify-between",children:[g.jsxs(mr,{to:"/",className:"flex items-center gap-2 font-bold text-base sm:text-lg text-primary transition-all duration-200 hover:opacity-80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 rounded-md px-1",children:[g.jsx(Dv,{className:"w-5 h-5 sm:w-6 sm:h-6"}),g.jsx("span",{className:"bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"The Truth Hub"})]}),g.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-3",children:[g.jsx(mr,{to:"/",className:`relative px-3 sm:px-4 py-2 text-sm sm:text-base font-medium transition-all duration-200 rounded-md hover:bg-primary/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 ${r("/")?"text-primary after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:w-3/4 after:h-0.5 after:bg-primary after:rounded-full":"text-muted-foreground hover:text-foreground"}`,children:"Home"}),g.jsx(mr,{to:"/about",className:`relative px-3 sm:px-4 py-2 text-sm sm:text-base font-medium transition-all duration-200 rounded-md hover:bg-primary/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 ${r("/about")?"text-primary after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:w-3/4 after:h-0.5 after:bg-primary after:rounded-full":"text-muted-foreground hover:text-foreground"}`,children:"About"}),g.jsx(mr,{to:"/contact",className:`relative px-3 sm:px-4 py-2 text-sm sm:text-base font-medium transition-all duration-200 rounded-md hover:bg-primary/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 ${r("/contact")?"text-primary after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:w-3/4 after:h-0.5 after:bg-primary after:rounded-full":"text-muted-foreground hover:text-foreground"}`,children:"Contact"}),e&&g.jsxs(g.Fragment,{children:[g.jsx(mr,{to:"/admin",className:`relative px-3 sm:px-4 py-2 text-sm sm:text-base font-medium transition-all duration-200 rounded-md hover:bg-primary/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 ${r("/admin")?"text-primary after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:w-3/4 after:h-0.5 after:bg-primary after:rounded-full":"text-muted-foreground hover:text-foreground"}`,children:"Admin"}),g.jsx(se,{variant:"ghost",size:"sm",onClick:s,className:"text-sm sm:text-base px-3 sm:px-4 hover:bg-primary/10 hover:text-primary transition-all duration-200 ml-1 sm:ml-2",children:"Logout"})]})]})]})})}function n$(){const t=new Date().getFullYear();return g.jsx("footer",{className:"border-t border-border/40 bg-[#EBE3DB] mt-auto",children:g.jsx("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 py-8 sm:py-10 md:py-12",children:g.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4 text-center",children:[g.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[g.jsx(Dv,{className:"w-4 h-4 sm:w-5 sm:h-5"}),g.jsx("span",{className:"font-semibold text-base sm:text-lg",children:"The Truth Hub"})]}),g.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground italic max-w-md px-4",children:'"I am the way, the truth, and the life" - John 14:6'}),g.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",t," Emmanuel Victor Mucyo. All rights reserved."]})]})})})}class r${async getPublishedPosts(e){let n=ue.from("posts").select(`
        *,
        categories:post_categories(category:categories(*)),
        tags:post_tags(tag:tags(*)),
        series(*)
      `).eq("published",!0).order("created_at",{ascending:!1});e!=null&&e.featured&&(n=n.eq("featured",!0)),e!=null&&e.searchQuery&&(n=n.or(`title.ilike.%${e.searchQuery}%,content.ilike.%${e.searchQuery}%,excerpt.ilike.%${e.searchQuery}%`));const{data:r,error:s}=await n;if(s)throw s;const i=(r||[]).map(o=>{var a,l;return{...o,categories:((a=o.categories)==null?void 0:a.map(c=>c.category))||[],tags:((l=o.tags)==null?void 0:l.map(c=>c.tag))||[]}});return e!=null&&e.categorySlug?i.filter(o=>o.categories.some(a=>a.slug===e.categorySlug)):e!=null&&e.tagSlug?i.filter(o=>o.tags.some(a=>a.slug===e.tagSlug)):e!=null&&e.seriesSlug?i.filter(o=>{var a;return((a=o.series)==null?void 0:a.slug)===e.seriesSlug}):i}async getPostById(e){var s,i;const{data:n,error:r}=await ue.from("posts").select(`
        *,
        categories:post_categories(category:categories(*)),
        tags:post_tags(tag:tags(*)),
        series(*)
      `).eq("id",e).single();if(r)throw r;return{...n,categories:((s=n.categories)==null?void 0:s.map(o=>o.category))||[],tags:((i=n.tags)==null?void 0:i.map(o=>o.tag))||[]}}async incrementViews(e,n){const r=(n==null?void 0:n.userId)??null,s=(n==null?void 0:n.anonId)??null;try{const{data:u,error:d}=await ue.rpc("increment_unique_view",{p_post_id:e,p_user_id:r,p_anon_id:s});if(!d&&u)return Array.isArray(u)&&u.length?u[0]:u}catch{}const{data:i,error:o}=await ue.from("posts").select("views").eq("id",e).single();if(o||!i)return null;const a=(i.views||0)+1,{data:l,error:c}=await ue.from("posts").update({views:a}).eq("id",e).select().single();return c||!l?null:l}async getAllPosts(){const{data:e,error:n}=await ue.from("posts").select(`
        *,
        categories:post_categories(category:categories(*)),
        tags:post_tags(tag:tags(*)),
        series(*)
      `).order("created_at",{ascending:!1});if(n)throw n;return(e||[]).map(r=>{var s,i;return{...r,categories:((s=r.categories)==null?void 0:s.map(o=>o.category))||[],tags:((i=r.tags)==null?void 0:i.map(o=>o.tag))||[]}})}async createPost(e,n){const{category_ids:r,tag_names:s,...i}=n,{data:o,error:a}=await ue.from("posts").insert({user_id:e,...i}).select().single();if(a)throw a;return r&&r.length>0&&await this.updatePostCategories(o.id,r),s&&s.length>0&&await this.updatePostTags(o.id,s),o}async updatePost(e,n){const{category_ids:r,tag_names:s,...i}=n,{data:o,error:a}=await ue.from("posts").update({...i,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return r!==void 0&&await this.updatePostCategories(e,r),s!==void 0&&await this.updatePostTags(e,s),o}async deletePost(e){const{error:n}=await ue.from("posts").delete().eq("id",e);if(n)throw n}async updatePostCategories(e,n){if(await ue.from("post_categories").delete().eq("post_id",e),n.length>0){const{error:r}=await ue.from("post_categories").insert(n.map(s=>({post_id:e,category_id:s})));if(r)throw r}}async updatePostTags(e,n){if(await ue.from("post_tags").delete().eq("post_id",e),n.length===0)return;const r=[];for(const i of n){const o=i.toLowerCase().replace(/\s+/g,"-"),{data:a}=await ue.from("tags").select("id").eq("slug",o).single();if(a)r.push(a.id);else{const{data:l,error:c}=await ue.from("tags").insert({name:i,slug:o}).select("id").single();if(c)throw c;r.push(l.id)}}const{error:s}=await ue.from("post_tags").insert(r.map(i=>({post_id:e,tag_id:i})));if(s)throw s}async uploadImage(e,n){const{data:r,error:s}=await ue.storage.from("post-images").upload(n,e,{cacheControl:"3600",upsert:!1});if(s)throw s;const{data:{publicUrl:i}}=ue.storage.from("post-images").getPublicUrl(r.path);return i}async getCategories(){const{data:e,error:n}=await ue.from("categories").select("*").order("name");if(n)throw n;return e||[]}async createCategory(e,n){const r=e.toLowerCase().replace(/\s+/g,"-"),{data:s,error:i}=await ue.from("categories").insert({name:e,slug:r,description:n}).select().single();if(i)throw i;return s}async getTags(){const{data:e,error:n}=await ue.from("tags").select("*").order("name");if(n)throw n;return e||[]}async getSeries(e){let n=ue.from("series").select("*").order("created_at",{ascending:!1});e&&(n=n.eq("user_id",e));const{data:r,error:s}=await n;if(s)throw s;return r||[]}async createSeries(e,n,r){const s=n.toLowerCase().replace(/\s+/g,"-"),{data:i,error:o}=await ue.from("series").insert({user_id:e,title:n,slug:s,description:r}).select().single();if(o)throw o;return i}async getSeriesBySlug(e){const{data:n,error:r}=await ue.from("series").select("*").eq("slug",e).single();if(r)throw r;return n}async getPostsBySeries(e){const{data:n,error:r}=await ue.from("posts").select(`
        *,
        categories:post_categories(category:categories(*)),
        tags:post_tags(tag:tags(*)),
        series(*)
      `).eq("series_id",e).eq("published",!0).order("series_order",{ascending:!0});if(r)throw r;return(n||[]).map(s=>{var i,o;return{...s,categories:((i=s.categories)==null?void 0:i.map(a=>a.category))||[],tags:((o=s.tags)==null?void 0:o.map(a=>a.tag))||[]}})}async incrementViewCount(e){const{error:n}=await ue.rpc("increment_post_views",{post_id:e});n&&console.error("Error incrementing view count:",n)}async getCommentsByPostId(e){const{data:n,error:r}=await ue.from("comments").select("*").eq("post_id",e).eq("approved",!0).order("created_at",{ascending:!0});if(r)throw r;return n||[]}async createComment(e){const{data:n,error:r}=await ue.from("comments").insert({...e,approved:!1}).select().single();if(r)throw r;return n}}const st=new r$;function s$(){return g.jsxs("div",{className:"relative w-full min-h-[70vh] sm:min-h-[80vh] md:min-h-screen overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#8B7355] via-[#6B563F] to-background opacity-90 animate-in fade-in duration-1000"}),g.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(circle at 2px 2px, currentColor 1px, transparent 0)",backgroundSize:"32px 32px"}}),g.jsx("div",{className:"relative container mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-8 sm:py-12 md:py-16 lg:py-20 h-full flex flex-col items-center justify-center",children:g.jsxs("div",{className:"max-w-8xl w-full flex flex-col items-center space-y-6 sm:space-y-8 md:space-y-10 animate-in slide-in-from-bottom-4 duration-700",children:[g.jsxs("div",{className:"relative w-full flex justify-center group",children:[g.jsx("img",{src:"https://delighted-peach-bnqknau0kr.edgeone.app/photo_2026-01-05_05-27-49.jpg",alt:"Truth Hub - Revealing the Cosmic Christ",className:"w-full h-auto max-h-[50vh] sm:max-h-[60vh] md:max-h-[70vh] lg:max-h-[85vh] object-contain drop-shadow-2xl transition-all duration-500 ease-out group-hover:drop-shadow-3xl group-hover:scale-[1.02]",loading:"eager"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-primary/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"})]}),g.jsxs("div",{className:"relative animate-in slide-in-from-bottom-6 duration-1000 delay-300",children:[g.jsx("p",{className:"text-center text-base sm:text-lg md:text-xl lg:text-2xl text-[#3C1414] italic max-w-xs sm:max-w-md md:max-w-2xl lg:max-w-4xl leading-relaxed sm:leading-loose px-4 sm:px-6 font-serif",children:"Welcome to the Truth Hub Blog, a Christocentric platform aimed to reveal the Cosmic Christ to all and in all aspects. We present to you the Gospel of Love, that will not only mend your Soul unto eternal Peace, but will give you a new definition of Life; an everlasting assurance of triumph in all things; through the Knowledge of Christ revealed to us!"}),g.jsx("div",{className:"mt-6 sm:mt-8 flex justify-center",children:g.jsx("div",{className:"h-0.5 w-16 sm:w-20 bg-gradient-to-r from-transparent via-[#3C1414]/30 to-transparent"})})]})]})}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-20 sm:h-24 md:h-32 bg-gradient-to-t from-background via-background/60 to-transparent"})]})}const ot=x.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:He("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ot.displayName="Card";const yt=x.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:He("flex flex-col space-y-1.5 p-6",t),...e}));yt.displayName="CardHeader";const vt=x.forwardRef(({className:t,...e},n)=>g.jsx("h3",{ref:n,className:He("text-2xl font-semibold leading-none tracking-tight",t),...e}));vt.displayName="CardTitle";const EC=x.forwardRef(({className:t,...e},n)=>g.jsx("p",{ref:n,className:He("text-sm text-muted-foreground",t),...e}));EC.displayName="CardDescription";const at=x.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:He("p-6 pt-0",t),...e}));at.displayName="CardContent";const i$=x.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:He("flex items-center p-6 pt-0",t),...e}));i$.displayName="CardFooter";const o$=Lv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ru({className:t,variant:e,...n}){return g.jsx("div",{className:He(o$({variant:e}),t),...n})}function CC({categories:t,tags:e,clickable:n=!1}){return(!t||t.length===0)&&(!e||e.length===0)?null:g.jsxs("div",{className:"flex flex-wrap gap-2",children:[t==null?void 0:t.map(r=>n?g.jsx(mr,{to:`/?category=${r.slug}`,className:"group focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1 rounded-full",children:g.jsx(Ru,{variant:"secondary",className:"cursor-pointer transition-all duration-200 hover:bg-primary/15 hover:shadow-sm hover:scale-105 text-xs sm:text-sm px-2.5 py-1 sm:px-3 sm:py-1.5 font-medium border border-transparent group-hover:border-primary/20",children:r.name})},r.id):g.jsx(Ru,{variant:"secondary",className:"text-xs sm:text-sm px-2.5 py-1 sm:px-3 sm:py-1.5 font-medium shadow-sm",children:r.name},r.id)),e==null?void 0:e.map(r=>n?g.jsx(mr,{to:`/?tag=${r.slug}`,className:"group focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1 rounded-full",children:g.jsx(Ru,{variant:"outline",className:"cursor-pointer transition-all duration-200 hover:border-primary hover:text-primary hover:bg-primary/5 hover:shadow-sm hover:scale-105 text-xs sm:text-sm px-2.5 py-1 sm:px-3 sm:py-1.5 font-medium",children:r.name})},r.id):g.jsx(Ru,{variant:"outline",className:"text-xs sm:text-sm px-2.5 py-1 sm:px-3 sm:py-1.5 font-medium",children:r.name},r.id))]})}function Te(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function eu(t,e=[]){let n=[];function r(i,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:f,children:h,...p}=d,m=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,y=x.useMemo(()=>p,Object.values(p));return g.jsx(m.Provider,{value:y,children:h})};c.displayName=i+"Provider";function u(d,f){var m;const h=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,p=x.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,a$(s,...e)]}function a$(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var l$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=l$.reduce((t,e)=>{const n=Cc(`Primitive.${e}`),r=x.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function c$(t,e){t&&Ja.flushSync(()=>t.dispatchEvent(e))}function io(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function u$(t,e=globalThis==null?void 0:globalThis.document){const n=io(t);x.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var d$="DismissableLayer",Ig="dismissableLayer.update",h$="dismissableLayer.pointerDownOutside",f$="dismissableLayer.focusOutside",ex,TC=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zv=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(TC),[u,d]=x.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=x.useState({}),p=Xe(e,E=>d(E)),m=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(y),w=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=v,k=g$(E=>{const _=E.target,A=[...c.branches].some(N=>N.contains(_));!S||A||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},f),C=y$(E=>{const _=E.target;[...c.branches].some(N=>N.contains(_))||(i==null||i(E),o==null||o(E),E.defaultPrevented||a==null||a())},f);return u$(E=>{w===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ex=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),tx(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ex)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),tx())},[u,c]),x.useEffect(()=>{const E=()=>h({});return document.addEventListener(Ig,E),()=>document.removeEventListener(Ig,E)},[]),g.jsx(Ae.div,{...l,ref:p,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:Te(t.onFocusCapture,C.onFocusCapture),onBlurCapture:Te(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Te(t.onPointerDownCapture,k.onPointerDownCapture)})});zv.displayName=d$;var p$="DismissableLayerBranch",m$=x.forwardRef((t,e)=>{const n=x.useContext(TC),r=x.useRef(null),s=Xe(e,r);return x.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),g.jsx(Ae.div,{...t,ref:s})});m$.displayName=p$;function g$(t,e=globalThis==null?void 0:globalThis.document){const n=io(t),r=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){_C(h$,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function y$(t,e=globalThis==null?void 0:globalThis.document){const n=io(t),r=x.useRef(!1);return x.useEffect(()=>{const s=i=>{i.target&&!r.current&&_C(f$,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tx(){const t=new CustomEvent(Ig);document.dispatchEvent(t)}function _C(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?c$(s,i):s.dispatchEvent(i)}var $t=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},v$=Ny[" useId ".trim().toString()]||(()=>{}),w$=0;function uf(t){const[e,n]=x.useState(v$());return $t(()=>{n(r=>r??String(w$++))},[t]),e?`radix-${e}`:""}const b$=["top","right","bottom","left"],ti=Math.min,dn=Math.max,Kd=Math.round,Pu=Math.floor,br=t=>({x:t,y:t}),x$={left:"right",right:"left",bottom:"top",top:"bottom"},S$={start:"end",end:"start"};function jg(t,e,n){return dn(t,ti(e,n))}function Gr(t,e){return typeof t=="function"?t(e):t}function Jr(t){return t.split("-")[0]}function el(t){return t.split("-")[1]}function Bv(t){return t==="x"?"y":"x"}function Fv(t){return t==="y"?"height":"width"}const k$=new Set(["top","bottom"]);function yr(t){return k$.has(Jr(t))?"y":"x"}function Uv(t){return Bv(yr(t))}function E$(t,e,n){n===void 0&&(n=!1);const r=el(t),s=Uv(t),i=Fv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Gd(o)),[o,Gd(o)]}function C$(t){const e=Gd(t);return[Dg(t),e,Dg(e)]}function Dg(t){return t.replace(/start|end/g,e=>S$[e])}const nx=["left","right"],rx=["right","left"],T$=["top","bottom"],_$=["bottom","top"];function N$(t,e,n){switch(t){case"top":case"bottom":return n?e?rx:nx:e?nx:rx;case"left":case"right":return e?T$:_$;default:return[]}}function O$(t,e,n,r){const s=el(t);let i=N$(Jr(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Dg)))),i}function Gd(t){return t.replace(/left|right|bottom|top/g,e=>x$[e])}function A$(t){return{top:0,right:0,bottom:0,left:0,...t}}function NC(t){return typeof t!="number"?A$(t):{top:t,right:t,bottom:t,left:t}}function Jd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function sx(t,e,n){let{reference:r,floating:s}=t;const i=yr(e),o=Uv(e),a=Fv(o),l=Jr(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-s.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(el(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const R$=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=sx(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:v}=a[m],{x:w,y:b,data:S,reset:k}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=b??d,h={...h,[y]:{...h[y],...S}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:u,y:d}=sx(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:h}};async function Tc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Gr(e,t),p=NC(h),y=a[f?d==="floating"?"reference":"floating":d],v=Jd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},k=Jd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(v.top-k.top+p.top)/S.y,bottom:(k.bottom-v.bottom+p.bottom)/S.y,left:(v.left-k.left+p.left)/S.x,right:(k.right-v.right+p.right)/S.x}}const P$=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Gr(t,e)||{};if(c==null)return{};const d=NC(u),f={x:n,y:r},h=Uv(s),p=Fv(h),m=await o.getDimensions(c),y=h==="y",v=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",S=i.reference[p]+i.reference[h]-f[h]-i.floating[p],k=f[h]-i.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[b]||i.floating[p]);const _=S/2-k/2,A=E/2-m[p]/2-1,N=ti(d[v],A),z=ti(d[w],A),L=N,q=E-m[p]-z,F=E/2-m[p]/2+_,Z=jg(L,F,q),W=!l.arrow&&el(s)!=null&&F!==Z&&i.reference[p]/2-(F<L?N:z)-m[p]/2<0,G=W?F<L?F-L:F-q:0;return{[h]:f[h]+G,data:{[h]:Z,centerOffset:F-Z-G,...W&&{alignmentOffset:G}},reset:W}}}),M$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=Gr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Jr(s),w=yr(a),b=Jr(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(b||!m?[Gd(a)]:C$(a)),C=p!=="none";!f&&C&&k.push(...O$(a,m,p,S));const E=[a,...k],_=await Tc(e,y),A=[];let N=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&A.push(_[v]),d){const F=E$(s,o,S);A.push(_[F[0]],_[F[1]])}if(N=[...N,{placement:s,overflows:A}],!A.every(F=>F<=0)){var z,L;const F=(((z=i.flip)==null?void 0:z.index)||0)+1,Z=E[F];if(Z&&(!(d==="alignment"?w!==yr(Z):!1)||N.every(O=>O.overflows[0]>0&&yr(O.placement)===w)))return{data:{index:F,overflows:N},reset:{placement:Z}};let W=(L=N.filter(G=>G.overflows[0]<=0).sort((G,O)=>G.overflows[1]-O.overflows[1])[0])==null?void 0:L.placement;if(!W)switch(h){case"bestFit":{var q;const G=(q=N.filter(O=>{if(C){const R=yr(O.placement);return R===w||R==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(R=>R>0).reduce((R,P)=>R+P,0)]).sort((O,R)=>O[1]-R[1])[0])==null?void 0:q[0];G&&(W=G);break}case"initialPlacement":W=a;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function ix(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ox(t){return b$.some(e=>t[e]>=0)}const I$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Gr(t,e);switch(r){case"referenceHidden":{const i=await Tc(e,{...s,elementContext:"reference"}),o=ix(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ox(o)}}}case"escaped":{const i=await Tc(e,{...s,altBoundary:!0}),o=ix(i,n.floating);return{data:{escapedOffsets:o,escaped:ox(o)}}}default:return{}}}}},OC=new Set(["left","top"]);async function j$(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Jr(n),a=el(n),l=yr(n)==="y",c=OC.has(o)?-1:1,u=i&&l?-1:1,d=Gr(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const D$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await j$(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},L$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:w}=y;return{x:v,y:w}}},...l}=Gr(t,e),c={x:n,y:r},u=await Tc(e,l),d=yr(Jr(s)),f=Bv(d);let h=c[f],p=c[d];if(i){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=h+u[y],b=h-u[v];h=jg(w,h,b)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=p+u[y],b=p-u[v];p=jg(w,p,b)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:o}}}}}},$$=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Gr(t,e),u={x:n,y:r},d=yr(s),f=Bv(d);let h=u[f],p=u[d];const m=Gr(a,e),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",S=i.reference[f]-i.floating[b]+y.mainAxis,k=i.reference[f]+i.reference[b]-y.mainAxis;h<S?h=S:h>k&&(h=k)}if(c){var v,w;const b=f==="y"?"width":"height",S=OC.has(Jr(s)),k=i.reference[d]-i.floating[b]+(S&&((v=o.offset)==null?void 0:v[d])||0)+(S?0:y.crossAxis),C=i.reference[d]+i.reference[b]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?y.crossAxis:0);p<k?p=k:p>C&&(p=C)}return{[f]:h,[d]:p}}}},z$=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Gr(t,e),u=await Tc(e,c),d=Jr(s),f=el(s),h=yr(s)==="y",{width:p,height:m}=i.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,b=p-u.left-u.right,S=ti(m-u[y],w),k=ti(p-u[v],b),C=!e.middlewareData.shift;let E=S,_=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=w),C&&!f){const N=dn(u.left,0),z=dn(u.right,0),L=dn(u.top,0),q=dn(u.bottom,0);h?_=p-2*(N!==0||z!==0?N+z:dn(u.left,u.right)):E=m-2*(L!==0||q!==0?L+q:dn(u.top,u.bottom))}await l({...e,availableWidth:_,availableHeight:E});const A=await o.getDimensions(a.floating);return p!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function df(){return typeof window<"u"}function tl(t){return AC(t)?(t.nodeName||"").toLowerCase():"#document"}function yn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Er(t){var e;return(e=(AC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function AC(t){return df()?t instanceof Node||t instanceof yn(t).Node:!1}function sr(t){return df()?t instanceof Element||t instanceof yn(t).Element:!1}function xr(t){return df()?t instanceof HTMLElement||t instanceof yn(t).HTMLElement:!1}function ax(t){return!df()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yn(t).ShadowRoot}const B$=new Set(["inline","contents"]);function tu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ir(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!B$.has(s)}const F$=new Set(["table","td","th"]);function U$(t){return F$.has(tl(t))}const H$=[":popover-open",":modal"];function hf(t){return H$.some(e=>{try{return t.matches(e)}catch{return!1}})}const V$=["transform","translate","scale","rotate","perspective"],W$=["transform","translate","scale","rotate","perspective","filter"],q$=["paint","layout","strict","content"];function Hv(t){const e=Vv(),n=sr(t)?ir(t):t;return V$.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||W$.some(r=>(n.willChange||"").includes(r))||q$.some(r=>(n.contain||"").includes(r))}function K$(t){let e=ni(t);for(;xr(e)&&!Da(e);){if(Hv(e))return e;if(hf(e))return null;e=ni(e)}return null}function Vv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const G$=new Set(["html","body","#document"]);function Da(t){return G$.has(tl(t))}function ir(t){return yn(t).getComputedStyle(t)}function ff(t){return sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ni(t){if(tl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ax(t)&&t.host||Er(t);return ax(e)?e.host:e}function RC(t){const e=ni(t);return Da(e)?t.ownerDocument?t.ownerDocument.body:t.body:xr(e)&&tu(e)?e:RC(e)}function _c(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=RC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=yn(s);if(i){const a=Lg(o);return e.concat(o,o.visualViewport||[],tu(s)?s:[],a&&n?_c(a):[])}return e.concat(s,_c(s,[],n))}function Lg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function PC(t){const e=ir(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=xr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Kd(n)!==i||Kd(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Wv(t){return sr(t)?t:t.contextElement}function fa(t){const e=Wv(t);if(!xr(e))return br(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=PC(e);let o=(i?Kd(n.width):n.width)/r,a=(i?Kd(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const J$=br(0);function MC(t){const e=yn(t);return!Vv()||!e.visualViewport?J$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Q$(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yn(t)?!1:e}function oo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Wv(t);let o=br(1);e&&(r?sr(r)&&(o=fa(r)):o=fa(t));const a=Q$(i,n,r)?MC(i):br(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=yn(i),h=r&&sr(r)?yn(r):r;let p=f,m=Lg(p);for(;m&&r&&h!==p;){const y=fa(m),v=m.getBoundingClientRect(),w=ir(m),b=v.left+(m.clientLeft+parseFloat(w.paddingLeft))*y.x,S=v.top+(m.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=b,c+=S,p=yn(m),m=Lg(p)}}return Jd({width:u,height:d,x:l,y:c})}function qv(t,e){const n=ff(t).scrollLeft;return e?e.left+n:oo(Er(t)).left+n}function IC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:qv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function Y$(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Er(r),a=e?hf(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=br(1);const u=br(0),d=xr(r);if((d||!d&&!i)&&((tl(r)!=="body"||tu(o))&&(l=ff(r)),xr(r))){const h=oo(r);c=fa(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=o&&!d&&!i?IC(o,l,!0):br(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function X$(t){return Array.from(t.getClientRects())}function Z$(t){const e=Er(t),n=ff(t),r=t.ownerDocument.body,s=dn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=dn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+qv(t);const a=-n.scrollTop;return ir(r).direction==="rtl"&&(o+=dn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function e3(t,e){const n=yn(t),r=Er(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Vv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const t3=new Set(["absolute","fixed"]);function n3(t,e){const n=oo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=xr(t)?fa(t):br(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function lx(t,e,n){let r;if(e==="viewport")r=e3(t,n);else if(e==="document")r=Z$(Er(t));else if(sr(e))r=n3(e,n);else{const s=MC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Jd(r)}function jC(t,e){const n=ni(t);return n===e||!sr(n)||Da(n)?!1:ir(n).position==="fixed"||jC(n,e)}function r3(t,e){const n=e.get(t);if(n)return n;let r=_c(t,[],!1).filter(a=>sr(a)&&tl(a)!=="body"),s=null;const i=ir(t).position==="fixed";let o=i?ni(t):t;for(;sr(o)&&!Da(o);){const a=ir(o),l=Hv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&t3.has(s.position)||tu(o)&&!l&&jC(t,o))?r=r.filter(u=>u!==o):s=a,o=ni(o)}return e.set(t,r),r}function s3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?hf(e)?[]:r3(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=lx(e,u,s);return c.top=dn(d.top,c.top),c.right=ti(d.right,c.right),c.bottom=ti(d.bottom,c.bottom),c.left=dn(d.left,c.left),c},lx(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function i3(t){const{width:e,height:n}=PC(t);return{width:e,height:n}}function o3(t,e,n){const r=xr(e),s=Er(e),i=n==="fixed",o=oo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=br(0);function c(){l.x=qv(s)}if(r||!r&&!i)if((tl(e)!=="body"||tu(s))&&(a=ff(e)),r){const h=oo(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?IC(s,a):br(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Tp(t){return ir(t).position==="static"}function cx(t,e){if(!xr(t)||ir(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Er(t)===n&&(n=n.ownerDocument.body),n}function DC(t,e){const n=yn(t);if(hf(t))return n;if(!xr(t)){let s=ni(t);for(;s&&!Da(s);){if(sr(s)&&!Tp(s))return s;s=ni(s)}return n}let r=cx(t,e);for(;r&&U$(r)&&Tp(r);)r=cx(r,e);return r&&Da(r)&&Tp(r)&&!Hv(r)?n:r||K$(t)||n}const a3=async function(t){const e=this.getOffsetParent||DC,n=this.getDimensions,r=await n(t.floating);return{reference:o3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function l3(t){return ir(t).direction==="rtl"}const c3={convertOffsetParentRelativeRectToViewportRelativeRect:Y$,getDocumentElement:Er,getClippingRect:s3,getOffsetParent:DC,getElementRects:a3,getClientRects:X$,getDimensions:i3,getScale:fa,isElement:sr,isRTL:l3};function LC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function u3(t,e){let n=null,r;const s=Er(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const p=Pu(d),m=Pu(s.clientWidth-(u+f)),y=Pu(s.clientHeight-(d+h)),v=Pu(u),b={rootMargin:-p+"px "+-m+"px "+-y+"px "+-v+"px",threshold:dn(0,ti(1,l))||1};let S=!0;function k(C){const E=C[0].intersectionRatio;if(E!==l){if(!S)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!LC(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(k,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(t)}return o(!0),i}function d3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Wv(t),u=s||i?[...c?_c(c):[],..._c(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=c&&a?u3(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?oo(t):null;l&&y();function y(){const v=oo(t);m&&!LC(m,v)&&n(),m=v,p=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const h3=D$,f3=L$,p3=M$,m3=z$,g3=I$,ux=P$,y3=$$,v3=(t,e,n)=>{const r=new Map,s={platform:c3,...n},i={...s.platform,_c:r};return R$(t,e,{...s,platform:i})};var w3=typeof document<"u",b3=function(){},cd=w3?x.useLayoutEffect:b3;function Qd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Qd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Qd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function $C(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function dx(t,e){const n=$C(t);return Math.round(e*n)/n}function _p(t){const e=x.useRef(t);return cd(()=>{e.current=t}),e}function x3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=x.useState(r);Qd(f,r)||h(r);const[p,m]=x.useState(null),[y,v]=x.useState(null),w=x.useCallback(O=>{O!==C.current&&(C.current=O,m(O))},[]),b=x.useCallback(O=>{O!==E.current&&(E.current=O,v(O))},[]),S=i||p,k=o||y,C=x.useRef(null),E=x.useRef(null),_=x.useRef(u),A=l!=null,N=_p(l),z=_p(s),L=_p(c),q=x.useCallback(()=>{if(!C.current||!E.current)return;const O={placement:e,strategy:n,middleware:f};z.current&&(O.platform=z.current),v3(C.current,E.current,O).then(R=>{const P={...R,isPositioned:L.current!==!1};F.current&&!Qd(_.current,P)&&(_.current=P,Ja.flushSync(()=>{d(P)}))})},[f,e,n,z,L]);cd(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const F=x.useRef(!1);cd(()=>(F.current=!0,()=>{F.current=!1}),[]),cd(()=>{if(S&&(C.current=S),k&&(E.current=k),S&&k){if(N.current)return N.current(S,k,q);q()}},[S,k,q,N,A]);const Z=x.useMemo(()=>({reference:C,floating:E,setReference:w,setFloating:b}),[w,b]),W=x.useMemo(()=>({reference:S,floating:k}),[S,k]),G=x.useMemo(()=>{const O={position:n,left:0,top:0};if(!W.floating)return O;const R=dx(W.floating,u.x),P=dx(W.floating,u.y);return a?{...O,transform:"translate("+R+"px, "+P+"px)",...$C(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:P}},[n,a,W.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:q,refs:Z,elements:W,floatingStyles:G}),[u,q,Z,W,G])}const S3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ux({element:r.current,padding:s}).fn(n):{}:r?ux({element:r,padding:s}).fn(n):{}}}},k3=(t,e)=>({...h3(t),options:[t,e]}),E3=(t,e)=>({...f3(t),options:[t,e]}),C3=(t,e)=>({...y3(t),options:[t,e]}),T3=(t,e)=>({...p3(t),options:[t,e]}),_3=(t,e)=>({...m3(t),options:[t,e]}),N3=(t,e)=>({...g3(t),options:[t,e]}),O3=(t,e)=>({...S3(t),options:[t,e]});var A3="Arrow",zC=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return g.jsx(Ae.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});zC.displayName=A3;var R3=zC;function BC(t){const[e,n]=x.useState(void 0);return $t(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Kv="Popper",[FC,pf]=eu(Kv),[P3,UC]=FC(Kv),HC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=x.useState(null);return g.jsx(P3,{scope:e,anchor:r,onAnchorChange:s,children:n})};HC.displayName=Kv;var VC="PopperAnchor",WC=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=UC(VC,n),o=x.useRef(null),a=Xe(e,o);return x.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:g.jsx(Ae.div,{...s,ref:a})});WC.displayName=VC;var Gv="PopperContent",[M3,I3]=FC(Gv),qC=x.forwardRef((t,e)=>{var B,we,We,be,ge,ve;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...m}=t,y=UC(Gv,n),[v,w]=x.useState(null),b=Xe(e,Pt=>w(Pt)),[S,k]=x.useState(null),C=BC(S),E=(C==null?void 0:C.width)??0,_=(C==null?void 0:C.height)??0,A=r+(i!=="center"?"-"+i:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},z=Array.isArray(c)?c:[c],L=z.length>0,q={padding:N,boundary:z.filter(D3),altBoundary:L},{refs:F,floatingStyles:Z,placement:W,isPositioned:G,middlewareData:O}=x3({strategy:"fixed",placement:A,whileElementsMounted:(...Pt)=>d3(...Pt,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[k3({mainAxis:s+_,alignmentAxis:o}),l&&E3({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?C3():void 0,...q}),l&&T3({...q}),_3({...q,apply:({elements:Pt,rects:Sn,availableWidth:pi,availableHeight:es})=>{const{width:mi,height:sl}=Sn.reference,So=Pt.floating.style;So.setProperty("--radix-popper-available-width",`${pi}px`),So.setProperty("--radix-popper-available-height",`${es}px`),So.setProperty("--radix-popper-anchor-width",`${mi}px`),So.setProperty("--radix-popper-anchor-height",`${sl}px`)}}),S&&O3({element:S,padding:a}),L3({arrowWidth:E,arrowHeight:_}),f&&N3({strategy:"referenceHidden",...q})]}),[R,P]=JC(W),K=io(p);$t(()=>{G&&(K==null||K())},[G,K]);const J=(B=O.arrow)==null?void 0:B.x,ie=(we=O.arrow)==null?void 0:we.y,$=((We=O.arrow)==null?void 0:We.centerOffset)!==0,[ae,xe]=x.useState();return $t(()=>{v&&xe(window.getComputedStyle(v).zIndex)},[v]),g.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:G?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(be=O.transformOrigin)==null?void 0:be.x,(ge=O.transformOrigin)==null?void 0:ge.y].join(" "),...((ve=O.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(M3,{scope:n,placedSide:R,onArrowChange:k,arrowX:J,arrowY:ie,shouldHideArrow:$,children:g.jsx(Ae.div,{"data-side":R,"data-align":P,...m,ref:b,style:{...m.style,animation:G?void 0:"none"}})})})});qC.displayName=Gv;var KC="PopperArrow",j3={top:"bottom",right:"left",bottom:"top",left:"right"},GC=x.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=I3(KC,r),o=j3[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(R3,{...s,ref:n,style:{...s.style,display:"block"}})})});GC.displayName=KC;function D3(t){return t!==null}var L3=t=>({name:"transformOrigin",options:t,fn(e){var y,v,w;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=JC(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,h=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let p="",m="";return c==="bottom"?(p=o?d:`${f}px`,m=`${-l}px`):c==="top"?(p=o?d:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=o?d:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,m=o?d:`${h}px`),{data:{x:p,y:m}}}});function JC(t){const[e,n="center"]=t.split("-");return[e,n]}var QC=HC,YC=WC,XC=qC,ZC=GC,$3="Portal",eT=x.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=x.useState(!1);$t(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?wv.createPortal(g.jsx(Ae.div,{...r,ref:e}),o):null});eT.displayName=$3;function z3(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var tT=t=>{const{present:e,children:n}=t,r=B3(e),s=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),i=Xe(r.ref,F3(s));return typeof n=="function"||r.isPresent?x.cloneElement(s,{ref:i}):null};tT.displayName="Presence";function B3(t){const[e,n]=x.useState(),r=x.useRef(null),s=x.useRef(t),i=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=z3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=Mu(r.current);i.current=a==="mounted"?c:"none"},[a]),$t(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,h=Mu(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),$t(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const m=Mu(r.current).includes(h.animationName);if(h.target===e&&m&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=h=>{h.target===e&&(i.current=Mu(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Mu(t){return(t==null?void 0:t.animationName)||"none"}function F3(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var U3=Ny[" useInsertionEffect ".trim().toString()]||$t;function Yd({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=H3({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=x.useCallback(u=>{var d;if(a){const f=V3(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else i(u)},[a,t,i,o]);return[l,c]}function H3({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),s=x.useRef(n),i=x.useRef(e);return U3(()=>{i.current=e},[e]),x.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function V3(t){return typeof t=="function"}var nT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),W3="VisuallyHidden",rT=x.forwardRef((t,e)=>g.jsx(Ae.span,{...t,ref:e,style:{...nT,...t.style}}));rT.displayName=W3;var q3=rT,[mf,xW]=eu("Tooltip",[pf]),gf=pf(),K3="TooltipProvider",$g="tooltip.open",[SW,Jv]=mf(K3),Nc="Tooltip",[G3,yf]=mf(Nc),sT=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=Jv(Nc,t.__scopeTooltip),c=gf(e),[u,d]=x.useState(null),f=uf(),h=x.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,y=x.useRef(!1),[v,w]=Yd({prop:r,defaultProp:s??!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent($g))):l.onClose(),i==null||i(E)},caller:Nc}),b=x.useMemo(()=>v?y.current?"delayed-open":"instant-open":"closed",[v]),S=x.useCallback(()=>{window.clearTimeout(h.current),h.current=0,y.current=!1,w(!0)},[w]),k=x.useCallback(()=>{window.clearTimeout(h.current),h.current=0,w(!1)},[w]),C=x.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,w(!0),h.current=0},m)},[m,w]);return x.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),g.jsx(QC,{...c,children:g.jsx(G3,{scope:e,contentId:f,open:v,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayedRef.current?C():S()},[l.isOpenDelayedRef,C,S]),onTriggerLeave:x.useCallback(()=>{p?k():(window.clearTimeout(h.current),h.current=0)},[k,p]),onOpen:S,onClose:k,disableHoverableContent:p,children:n})})};sT.displayName=Nc;var zg="TooltipTrigger",iT=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=yf(zg,n),i=Jv(zg,n),o=gf(n),a=x.useRef(null),l=Xe(e,a,s.onTriggerChange),c=x.useRef(!1),u=x.useRef(!1),d=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),g.jsx(YC,{asChild:!0,...o,children:g.jsx(Ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Te(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Te(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Te(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Te(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Te(t.onBlur,s.onClose),onClick:Te(t.onClick,s.onClose)})})});iT.displayName=zg;var J3="TooltipPortal",[kW,Q3]=mf(J3,{forceMount:void 0}),La="TooltipContent",oT=x.forwardRef((t,e)=>{const n=Q3(La,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=yf(La,t.__scopeTooltip);return g.jsx(tT,{present:r||o.open,children:o.disableHoverableContent?g.jsx(aT,{side:s,...i,ref:e}):g.jsx(Y3,{side:s,...i,ref:e})})}),Y3=x.forwardRef((t,e)=>{const n=yf(La,t.__scopeTooltip),r=Jv(La,t.__scopeTooltip),s=x.useRef(null),i=Xe(e,s),[o,a]=x.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:d}=r,f=x.useCallback(()=>{a(null),d(!1)},[d]),h=x.useCallback((p,m)=>{const y=p.currentTarget,v={x:p.clientX,y:p.clientY},w=n4(v,y.getBoundingClientRect()),b=r4(v,w),S=s4(m.getBoundingClientRect()),k=o4([...b,...S]);a(k),d(!0)},[d]);return x.useEffect(()=>()=>f(),[f]),x.useEffect(()=>{if(l&&u){const p=y=>h(y,u),m=y=>h(y,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,h,f]),x.useEffect(()=>{if(o){const p=m=>{const y=m.target,v={x:m.clientX,y:m.clientY},w=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),b=!i4(v,o);w?f():b&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,f]),g.jsx(aT,{...t,ref:i})}),[X3,Z3]=mf(Nc,{isInside:!1}),e4=yL("TooltipContent"),aT=x.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=yf(La,n),c=gf(n),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener($g,u),()=>document.removeEventListener($g,u)),[u]),x.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),g.jsx(zv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:g.jsxs(XC,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(e4,{children:r}),g.jsx(X3,{scope:n,isInside:!0,children:g.jsx(q3,{id:l.contentId,role:"tooltip",children:s||r})})]})})});oT.displayName=La;var lT="TooltipArrow",t4=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=gf(n);return Z3(lT,n).isInside?null:g.jsx(ZC,{...s,...r,ref:e})});t4.displayName=lT;function n4(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function r4(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function s4(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function i4(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(s=!s)}return s}function o4(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),a4(e)}function a4(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var l4=sT,c4=iT,cT=oT;const u4=l4,d4=c4,uT=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>g.jsx(cT,{ref:r,sideOffset:e,className:He("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));uT.displayName=cT.displayName;function hx({post:t}){const e=new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return g.jsx(mr,{to:`/post/${t.id}`,className:"group block h-full focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 rounded-lg transition-all duration-200",children:g.jsxs(ot,{className:"h-full transition-all duration-300 ease-out border-border/60 overflow-hidden hover:shadow-xl hover:shadow-primary/5 hover:-translate-y-1 hover:border-primary/30 group-focus-visible:shadow-xl group-focus-visible:-translate-y-1",children:[t.cover_image&&g.jsxs("div",{className:"relative w-full h-40 sm:h-48 md:h-56 overflow-hidden bg-muted",children:[g.jsx("img",{src:t.cover_image,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 ease-out group-hover:scale-110",loading:"lazy"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),g.jsxs(yt,{className:"p-4 sm:p-5 md:p-6 space-y-3",children:[t.series&&g.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-primary font-medium",children:[g.jsx(qd,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),g.jsx("span",{className:"truncate",children:t.series.title}),t.series_order&&g.jsxs("span",{className:"whitespace-nowrap opacity-70",children:[" Part ",t.series_order]})]}),g.jsxs("div",{className:"flex items-start justify-between gap-3",children:[g.jsx(vt,{className:"text-lg sm:text-xl md:text-2xl font-bold text-foreground leading-snug line-clamp-2 group-hover:text-primary transition-colors duration-200",children:t.title}),typeof t.views<"u"&&g.jsx("div",{className:"flex-shrink-0",children:g.jsxs(u4,{children:[g.jsx(d4,{asChild:!0,children:g.jsxs("div",{className:"inline-flex items-center gap-1.5 sm:gap-2 bg-primary/8 text-primary px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full shadow-sm border border-primary/15 transition-all duration-200 hover:bg-primary/12 hover:shadow-md cursor-default",children:[g.jsx(Pg,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),g.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:ZL(t.views)})]})}),g.jsx(uT,{children:g.jsxs("p",{children:[t.views," views"]})})]})})]}),g.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[g.jsx(uC,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),g.jsx("time",{className:"truncate",dateTime:t.created_at,children:e})]})]}),g.jsxs(at,{className:"space-y-4 p-4 sm:p-5 md:p-6 pt-0",children:[g.jsx("p",{className:"text-sm sm:text-base text-muted-foreground/90 line-clamp-3 leading-relaxed",children:t.excerpt||t.content.substring(0,150).replace(/<[^>]*>/g,"")+"..."}),g.jsx(CC,{categories:t.categories,tags:t.tags})]})]})})}const Vt=x.forwardRef(({className:t,type:e,...n},r)=>g.jsx("input",{type:e,className:He("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Vt.displayName="Input";function h4({onSearch:t,placeholder:e="Search teachings..."}){const[n,r]=x.useState(""),s=i=>{i.preventDefault(),t(n)};return g.jsxs("form",{onSubmit:s,className:"relative w-full max-w-2xl group",children:[g.jsx(cL,{className:"absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground transition-colors duration-200 group-focus-within:text-primary"}),g.jsx(Vt,{type:"text",value:n,onChange:i=>r(i.target.value),placeholder:e,className:"pl-10 sm:pl-12 pr-4 sm:pr-6 py-5 sm:py-6 md:py-7 text-sm sm:text-base shadow-sm transition-all duration-200 focus:shadow-md focus:shadow-primary/10 border-border/60 focus:border-primary/40 bg-background/50 backdrop-blur-sm"}),n&&g.jsx("button",{type:"button",onClick:()=>{r(""),t("")},className:"absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors duration-200 p-1 rounded-full hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary","aria-label":"Clear search",children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}function f4(){const[t,e]=UM(),[n,r]=x.useState(""),s=t.get("category"),i=t.get("tag"),o=t.get("series"),{data:a,isLoading:l}=Mn({queryKey:["featuredPosts"],queryFn:()=>st.getPublishedPosts({featured:!0})}),{data:c,isLoading:u}=Mn({queryKey:["posts",s,i,o,n],queryFn:()=>st.getPublishedPosts({categorySlug:s||void 0,tagSlug:i||void 0,seriesSlug:o||void 0,searchQuery:n||void 0})}),{data:d}=Mn({queryKey:["categories"],queryFn:()=>st.getCategories()}),{data:f}=Mn({queryKey:["series"],queryFn:()=>st.getSeries()}),h=y=>{r(y),e({})},p=()=>{e({}),r("")},m=s||i||o||n;return g.jsxs("div",{className:"min-h-screen bg-[#EBE3DB]",children:[g.jsx(s$,{}),g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 md:px-8 lg:px-12 py-12 sm:py-16 md:py-20 lg:py-24",children:[g.jsxs("div",{className:"mb-12 sm:mb-16 md:mb-20 flex flex-col items-center gap-4 sm:gap-6 animate-in slide-in-from-bottom-4 duration-500",children:[g.jsx("div",{className:"w-full max-w-2xl",children:g.jsx(h4,{onSearch:h})}),m&&g.jsx(se,{variant:"ghost",size:"sm",onClick:p,className:"text-sm hover:bg-primary/10 hover:text-primary transition-all duration-200 shadow-sm",children:"Clear all filters"})]}),!m&&a&&a.length>0&&g.jsxs("section",{className:"mb-16 sm:mb-20 md:mb-24 animate-in slide-in-from-bottom-6 duration-700",children:[g.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-8 sm:mb-10 md:mb-12",children:[g.jsx("div",{className:"h-1 w-12 sm:w-16 bg-gradient-to-r from-primary to-primary/50 rounded-full"}),g.jsx("div",{className:"h-1 w-12 sm:w-16 bg-gradient-to-r from-primary to-primary/50 rounded-full"}),g.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground flex items-center gap-3 sm:gap-4",children:[g.jsx(qd,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-primary"}),"Featured Teachings"]})]}),g.jsx("div",{className:"grid gap-6 sm:gap-8 md:gap-10 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:a.map((y,v)=>g.jsx("div",{className:"animate-in slide-in-from-bottom-8 duration-700",style:{animationDelay:`${v*100}ms`},children:g.jsx(hx,{post:y})},y.id))})]}),!m&&d&&d.length>0&&g.jsxs("section",{className:"mb-12 sm:mb-16 md:mb-20 animate-in slide-in-from-bottom-6 duration-700 delay-200",children:[g.jsxs("h3",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-foreground mb-6 sm:mb-8 flex items-center gap-3",children:[g.jsx("div",{className:"h-1 w-8 bg-primary rounded-full"}),"Browse by Category"]}),g.jsx("div",{className:"flex flex-wrap gap-2.5 sm:gap-3",children:d.map(y=>g.jsx(se,{variant:"outline",className:"hover:bg-primary hover:text-primary-foreground hover:shadow-md hover:scale-105 transition-all duration-200 border-border/60 font-medium",onClick:()=>e({category:y.slug}),children:y.name},y.id))})]}),!m&&f&&f.length>0&&g.jsxs("section",{className:"mb-16 sm:mb-20 md:mb-24 animate-in slide-in-from-bottom-6 duration-700 delay-300",children:[g.jsxs("h3",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-foreground mb-6 sm:mb-8 flex items-center gap-3",children:[g.jsx("div",{className:"h-1 w-8 bg-primary rounded-full"}),"Teaching Series"]}),g.jsx("div",{className:"flex flex-wrap gap-2.5 sm:gap-3",children:f.map(y=>g.jsx(se,{variant:"outline",className:"hover:bg-primary hover:text-primary-foreground hover:shadow-md hover:scale-105 transition-all duration-200 border-border/60 font-medium",onClick:()=>e({series:y.slug}),children:y.title},y.id))})]}),g.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-700 delay-400",children:[g.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-8 sm:mb-10 md:mb-12",children:[g.jsx("div",{className:"h-1 w-12 sm:w-16 bg-gradient-to-r from-primary to-primary/50 rounded-full"}),g.jsx("div",{className:"h-1 w-12 sm:w-16 bg-gradient-to-r from-primary to-primary/50 rounded-full"}),g.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground capitalize",children:[s&&"Category: "+s.replace(/-/g," "),i&&"Tag: "+i.replace(/-/g," "),o&&"Series: "+o.replace(/-/g," "),n&&`Search results for "${n}"`,!m&&"Recent Teachings"]})]}),u?g.jsx("div",{className:"flex justify-center py-16 sm:py-20 md:py-24",children:g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx(Kr,{className:"w-8 h-8 sm:w-10 sm:h-10 animate-spin text-primary"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading teachings..."})]})}):c&&c.length>0?g.jsx("div",{className:"grid gap-6 sm:gap-8 md:gap-10 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:c.map((y,v)=>g.jsx("div",{className:"animate-in slide-in-from-bottom-8 duration-700",style:{animationDelay:`${v*100}ms`},children:g.jsx(hx,{post:y})},y.id))}):g.jsx(ot,{className:"border-border/60 shadow-md",children:g.jsx(at,{className:"py-12 sm:py-16 md:py-20 text-center px-6",children:g.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[g.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:g.jsx(qd,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary"})}),g.jsx("p",{className:"text-base sm:text-lg text-muted-foreground font-medium",children:n?"No teachings found matching your search.":"No teachings available yet."}),n&&g.jsx(se,{variant:"outline",onClick:()=>{r(""),e({})},className:"mt-4",children:"Clear search"})]})})})]})]})]})}function p4(){const{id:t}=AE(),{data:e,isLoading:n,error:r}=Mn({queryKey:["post",t],queryFn:()=>st.getPostById(t),enabled:!!t}),s=Ov(),{user:i}=Zc(),o=x.useRef(null);x.useEffect(()=>{if(!t||!e)return;let d=!1;const f=`viewed:${t}:${(i==null?void 0:i.id)||"anon"}`;localStorage.getItem(f)&&(d=!0);const h="anonId";let p=localStorage.getItem(h);if(!p)try{p=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),localStorage.setItem(h,p)}catch{p=Math.random().toString(36).slice(2);try{localStorage.setItem(h,p)}catch{}}const m=async()=>{if(!d){d=!0;try{const S=await st.incrementViews(t,{userId:(i==null?void 0:i.id)??null,anonId:i!=null&&i.id?null:p});s.setQueryData(["post",t],k=>({...k||{},...S||{}})),s.invalidateQueries({queryKey:["posts"]}),localStorage.setItem(f,"1")}catch{}}},y=S=>{const k=S.target;o.current&&o.current.contains(k)&&m()};window.addEventListener("pointerdown",y,{passive:!0});let v=null;o.current&&(v=new IntersectionObserver(S=>{for(const k of S)if(k.isIntersecting&&k.intersectionRatio>.5){m(),v&&(v.disconnect(),v=null);break}},{threshold:[.5]}),v.observe(o.current));const w=window.setTimeout(()=>m(),15e3),b=ue.channel(`public:posts:id=eq.${t}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts",filter:`id=eq.${t}`},S=>{S!=null&&S.new&&s.setQueryData(["post",t],k=>({...k||{},...S.new}))}).subscribe();return()=>{window.removeEventListener("pointerdown",y),v&&v.disconnect(),clearTimeout(w);try{b.unsubscribe()}catch{}}},[t,e,i]);const{data:a}=Mn({queryKey:["seriesPosts",e==null?void 0:e.series_id],queryFn:()=>st.getPostsBySeries(e.series_id),enabled:!!(e!=null&&e.series_id)});if(x.useEffect(()=>{e!=null&&e.id&&st.incrementViewCount(e.id)},[e==null?void 0:e.id]),n)return g.jsx("div",{className:"min-h-screen flex items-center justify-center",children:g.jsx(Kr,{className:"w-8 h-8 animate-spin text-primary"})});if(r||!e)return g.jsx(Ev,{to:"/",replace:!0});const l=new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),u=(d=>{const f=/\b(\d?\s?[A-Z][a-z]+(?:\s[A-Z][a-z]+)?)\s(\d+):(\d+(?:-\d+)?)\b/g;return d.replace(f,(h,p,m,y)=>`<a href="${`https://www.biblegateway.com/passage/?search=${encodeURIComponent(h)}&version=ESV`}" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline font-medium">${h}</a>`)})(e.content);return g.jsxs("div",{className:"min-h-screen",children:[e.cover_image&&g.jsx("div",{className:"w-full h-48 sm:h-64 md:h-72 lg:h-96 mb-6 sm:mb-8 overflow-hidden",children:g.jsx("img",{src:e.cover_image,alt:e.title,className:"w-full h-full object-cover"})}),g.jsxs("article",{ref:o,className:"container mx-auto px-3 sm:px-4 md:px-6 py-8 sm:py-12 md:py-16 max-w-3xl",children:[g.jsx(mr,{to:"/",children:g.jsxs(se,{variant:"ghost",className:"mb-6 sm:mb-8 text-sm sm:text-base",children:[g.jsx(VD,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Back to teachings"]})}),g.jsxs("header",{className:"mb-8 sm:mb-10 md:mb-12",children:[e.series&&g.jsxs("div",{className:"flex items-center gap-2 text-primary mb-3 sm:mb-4 text-sm sm:text-base",children:[g.jsx(qd,{className:"w-4 h-4 sm:w-5 sm:h-5"}),g.jsx("span",{className:"font-medium",children:e.series.title}),e.series_order&&g.jsxs("span",{className:"text-muted-foreground",children:[" Part ",e.series_order]})]}),g.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 sm:gap-6 mb-4 sm:mb-6",children:g.jsxs("div",{className:"flex-1",children:[g.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-3 sm:mb-4 leading-tight",children:e.title}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-muted-foreground",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(uC,{className:"w-4 h-4 sm:w-5 sm:h-5"}),g.jsx("time",{dateTime:e.created_at,children:l})]}),(e.categories||e.tags)&&g.jsx("div",{className:"flex items-center gap-2"})]})]})}),(e.categories||e.tags)&&g.jsx("div",{className:"mt-3 sm:mt-4",children:g.jsx(CC,{categories:e.categories,tags:e.tags,clickable:!0})})]}),g.jsx("div",{className:"prose prose-sm sm:prose-base md:prose-lg max-w-none overflow-hidden",children:g.jsx("div",{className:`leading-relaxed overflow-hidden
              [&_p]:mb-3 [&_p]:sm:mb-4 [&_p]:min-h-[1.5em] [&_p]:text-sm [&_p]:sm:text-base [&_p]:break-words
              [&_h2]:mt-6 [&_h2]:sm:mt-8 [&_h2]:mb-3 [&_h2]:sm:mb-4 [&_h2]:font-bold [&_h2]:text-xl [&_h2]:sm:text-2xl [&_h2]:break-words
              [&_h3]:mt-4 [&_h3]:sm:mt-6 [&_h3]:mb-2 [&_h3]:sm:mb-3 [&_h3]:font-bold [&_h3]:text-lg [&_h3]:sm:text-xl [&_h3]:break-words
              [&_ul]:mb-3 [&_ul]:sm:mb-4 [&_ul]:mt-2 [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:sm:pl-8
              [&_ol]:mb-3 [&_ol]:sm:mb-4 [&_ol]:mt-2 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:sm:pl-8
              [&_li]:mb-2 [&_li]:text-sm [&_li]:sm:text-base [&_li]:break-words
              [&_ul_ul]:list-[circle] [&_ul_ul]:mt-2
              [&_ul_ul_ul]:list-[square]
              [&_blockquote]:mb-3 [&_blockquote]:sm:mb-4 [&_blockquote]:border-l-4 [&_blockquote]:border-primary [&_blockquote]:pl-3 [&_blockquote]:sm:pl-4 [&_blockquote]:italic [&_blockquote]:text-sm [&_blockquote]:sm:text-base [&_blockquote]:break-words
              [&_strong]:font-bold
              [&_em]:italic
              [&_u]:underline
              [&_s]:line-through
              [&_code]:bg-muted [&_code]:px-1.5 [&_code]:py-0.5 [&_code]:rounded [&_code]:font-mono [&_code]:text-sm [&_code]:break-all
              [&_pre]:overflow-x-auto [&_pre]:max-w-full
              [&_img]:max-w-full [&_img]:h-auto
              [&_table]:block [&_table]:overflow-x-auto [&_table]:max-w-full
              [&_.text-left]:text-left
              [&_.text-center]:text-center
              [&_.text-right]:text-right
              [&_.text-justify]:text-justify`,dangerouslySetInnerHTML:{__html:u}})}),a&&a.length>1&&g.jsxs("div",{className:"mt-12 sm:mt-14 md:mt-16",children:[g.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground mb-4 sm:mb-6",children:"More from this series"}),g.jsx("div",{className:"space-y-3 sm:space-y-4",children:a.filter(d=>d.id!==e.id).map(d=>g.jsx(mr,{to:`/post/${d.id}`,children:g.jsxs(ot,{className:"hover:shadow-lg transition-shadow border-border/60",children:[g.jsx(yt,{children:g.jsxs(vt,{className:"text-base sm:text-lg flex items-center gap-2 sm:gap-3",children:[d.series_order&&g.jsxs("span",{className:"text-primary font-bold flex-shrink-0",children:[d.series_order,"."]}),g.jsx("span",{className:"line-clamp-2",children:d.title})]})}),d.excerpt&&g.jsx(at,{children:g.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm line-clamp-2",children:d.excerpt})})]})},d.id))})]})]})]})}function m4(){return g.jsx("div",{className:"min-h-screen bg-[#EBE3DB]",children:g.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 py-8 sm:py-12 md:py-16 max-w-3xl",children:[g.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-8 sm:mb-10 md:mb-12 text-center",children:"About The Truth Hub"}),g.jsxs("div",{className:"space-y-8 sm:space-y-10 md:space-y-12",children:[g.jsx("section",{children:g.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 md:gap-4 mb-3 sm:mb-4",children:[g.jsx(qD,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-primary flex-shrink-0 mt-0.5 sm:mt-1"}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-semibold text-foreground mb-3 sm:mb-4",children:"Mission Statement"}),g.jsx("p",{className:"text-sm sm:text-base text-foreground/90 leading-relaxed mb-3 sm:mb-4",children:'We seek to establish a foundation of reality that is in agreement with the ultimate truth of God revealed to us through His Unconditional Love. A foundation that eliminates the dualistic illusion of the sacred and secular from our world-views, but presents all things reconciled "In Christ" and "As Christ."'}),g.jsx("p",{className:"text-sm sm:text-base text-foreground/90 leading-relaxed italic",children:'"Now all things are of God, who has reconciled us to Himself through Jesus Christ, and has given us the ministry of reconciliation, that is, that God was in Christ reconciling the world to Himself, not imputing their trespasses to them, and has committed to us the word of reconciliation." 2 Corinthians 5:18-19'})]})]})}),g.jsx("section",{className:"bg-[#DCCFC3] p-4 sm:p-6 md:p-8 rounded-lg border border-border/60",children:g.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 md:gap-4 mb-3 sm:mb-4",children:[g.jsx(ZD,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-primary flex-shrink-0 mt-0.5 sm:mt-1"}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-semibold text-foreground mb-3 sm:mb-4",children:"About the Author"}),g.jsx("p",{className:"text-sm sm:text-base text-foreground/90 leading-relaxed mb-3 sm:mb-4",children:'Emmanuel Victor Mucyo, is a student of Christ that has a singular desire, "To know the truth, and make the truth known." Through a couple of years of study and prayer, he has been inspired by the Holy-Spirit to create this hub, a hub of truth, that fellow brethren might benefit from the knowledge of Christ given to him.'}),g.jsx("p",{className:"text-sm sm:text-base text-foreground/90 leading-relaxed italic",children:'"The words you read here are beyond just written letters, they are spirit and substance. Every teaching comes as a piece of meal, thoughtfully woven from the corridors of eternity to bring enlightenment to any man that is willing to learn and accept change." - Emmanuel Mucyo'})]})]})}),g.jsxs("section",{className:"text-center py-6 sm:py-8",children:[g.jsx("blockquote",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-light text-primary italic px-2",children:'"To them God willed to make known what are the riches of the glory of this mystery among the Gentiles: which is Christ in you, the hope of glory."'}),g.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-2",children:"- Colossians 1:27 NKJV"})]})]})]})})}function g4(){return g.jsx("div",{className:"min-h-screen bg-[#EBE3DB]",children:g.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 py-8 sm:py-12 md:py-16 max-w-3xl",children:[g.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-foreground mb-3 sm:mb-4 text-center",children:"Contact"}),g.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-10 md:mb-12 text-base sm:text-lg px-2",children:"Feel free to reach out with questions, reflections, or fellowship"}),g.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-1 max-w-xl mx-auto",children:[g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsxs(vt,{className:"flex items-center gap-2 sm:gap-3 text-lg sm:text-xl",children:[g.jsx(pL,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"}),"Name"]})}),g.jsx(at,{children:g.jsx("p",{className:"text-sm sm:text-base text-foreground",children:"Emmanuel Victor Mucyo"})})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsxs(vt,{className:"flex items-center gap-2 sm:gap-3 text-lg sm:text-xl",children:[g.jsx(iL,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"}),"Email"]})}),g.jsx(at,{children:g.jsx("a",{href:"mailto:victor@truthhub.blog",className:"text-sm sm:text-base text-primary hover:underline break-all",children:"victor@truthhub.blog"})})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsxs(vt,{className:"flex items-center gap-2 sm:gap-3 text-lg sm:text-xl",children:[g.jsx(oL,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"}),"Location"]})}),g.jsx(at,{children:g.jsxs("p",{className:"text-sm sm:text-base text-foreground",children:["101 Chesnut St, 6544 CPO",g.jsx("br",{}),"Berea, KY"]})})]})]}),g.jsx("div",{className:"mt-12 sm:mt-14 md:mt-16 text-center px-2",children:g.jsxs("div",{className:"spiritual-gradient p-4 sm:p-6 md:p-8 rounded-lg inline-block max-w-full",children:[g.jsx("p",{className:"text-sm sm:text-base md:text-lg text-foreground/90 italic",children:'"Having made known to us the mystery of His will, according to His good pleasure which He purposed in Himself, that in the dispensation of the fullness of the times He might gather together in one all things in Christ, both which are in heaven and which are on earthin Him."'}),g.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-2 sm:mt-3",children:"- Ephesians 1:9-10 NKJV"})]})})]})})}const fx=["victor@truthhub.blog"];function y4(t){var e;return{id:t.id,email:t.email,username:((e=t.user_metadata)==null?void 0:e.username)||t.email.split("@")[0]}}class v4{mapUser(e){return y4(e)}async sendOtp(e){if(!fx.includes(e.toLowerCase()))throw new Error("This email is not authorized to create an account");const{error:n}=await ue.auth.signInWithOtp({email:e,options:{shouldCreateUser:!1}});if(n)throw n}async signUpWithPassword(e,n,r){if(!fx.includes(e.toLowerCase()))throw new Error("This email is not authorized to create an account");const{data:s,error:i}=await ue.auth.signUp({email:e,password:n,options:{data:{username:r},emailRedirectTo:window.location.origin+"/admin"}});if(i)throw i;return s.user}async verifyOtpAndSetPassword(e,n,r,s){const{data:i,error:o}=await ue.auth.verifyOtp({email:e,token:n,type:"email"});if(o)throw o;const{data:a,error:l}=await ue.auth.updateUser({password:r,data:{username:s}});if(l)throw l;return a.user}async signInWithPassword(e,n){const{data:r,error:s}=await ue.auth.signInWithPassword({email:e,password:n});if(s)throw s;return r.user}async signOut(){const{error:e}=await ue.auth.signOut();if(e)throw e}}const Ei=new v4;var w4="Label",dT=x.forwardRef((t,e)=>g.jsx(Ae.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));dT.displayName=w4;var hT=dT;const b4=Lv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=x.forwardRef(({className:t,...e},n)=>g.jsx(hT,{ref:n,className:He(b4(),t),...e}));Qe.displayName=hT.displayName;function x4(){const t=vo(),{login:e}=Av(),[n,r]=x.useState(!1),[s,i]=x.useState("login"),[o,a]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState("");x.useEffect(()=>{ue.auth.getSession().then(({data:{session:m}})=>{m&&(e(Ei.mapUser(m.user)),De.success("Successfully logged in!"),t("/admin"))});const{data:{subscription:p}}=ue.auth.onAuthStateChange((m,y)=>{m==="SIGNED_IN"&&y&&(e(Ei.mapUser(y.user)),De.success("Successfully logged in!"),t("/admin"))});return()=>{p.unsubscribe()}},[t,e]);const f=async p=>{p.preventDefault(),r(!0);try{const m=await Ei.signInWithPassword(o,l);e(Ei.mapUser(m)),t("/admin")}catch(m){m.message.includes("Invalid login credentials")?De.error("Invalid email or password"):De.error(m.message||"Login failed"),r(!1)}},h=async p=>{if(p.preventDefault(),l.length<6){De.error("Password must be at least 6 characters");return}r(!0);try{const m=await Ei.signUpWithPassword(o,l,u);m&&(e(Ei.mapUser(m)),De.success("Account created! You can now login with your password."),t("/admin"))}catch(m){De.error(m.message||"Registration failed")}finally{r(!1)}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted/30 px-3 sm:px-4 md:px-6 py-8 sm:py-10 md:py-12",children:g.jsxs(ot,{className:"w-full max-w-md border-border/60",children:[g.jsxs(yt,{className:"text-center space-y-3 sm:space-y-4 px-4 sm:px-6",children:[g.jsx("div",{className:"flex justify-center",children:g.jsx("div",{className:"bg-primary/10 p-2 sm:p-3 rounded-full",children:g.jsx(Dv,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-primary"})})}),g.jsx(vt,{className:"text-xl sm:text-2xl font-bold",children:"Admin Access"}),g.jsx(EC,{className:"text-xs sm:text-sm",children:"Sign in to manage teachings"})]}),g.jsxs(at,{className:"px-4 sm:px-6 pb-6 sm:pb-8",children:[s==="login"&&g.jsxs("form",{onSubmit:f,className:"space-y-3 sm:space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"email",className:"text-sm",children:"Email"}),g.jsx(Vt,{id:"email",type:"email",value:o,onChange:p=>a(p.target.value),required:!0,disabled:n,placeholder:"your@email.com",className:"text-sm sm:text-base"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"password",className:"text-sm",children:"Password"}),g.jsx(Vt,{id:"password",type:"password",value:l,onChange:p=>c(p.target.value),required:!0,disabled:n,placeholder:"Enter your password",className:"text-sm sm:text-base"})]}),g.jsxs(se,{type:"submit",className:"w-full text-sm sm:text-base",disabled:n,children:[n&&g.jsx(Kr,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 animate-spin"}),"Sign In"]}),g.jsx("div",{className:"text-center mt-3 sm:mt-4",children:g.jsx("button",{type:"button",onClick:()=>i("register"),className:"text-xs sm:text-sm text-primary hover:underline",disabled:n,children:"Create Account"})})]}),s==="register"&&g.jsxs("form",{onSubmit:h,className:"space-y-3 sm:space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"register-email",className:"text-sm",children:"Email"}),g.jsx(Vt,{id:"register-email",type:"email",value:o,onChange:p=>a(p.target.value),required:!0,disabled:n,placeholder:"your@email.com",className:"text-sm sm:text-base"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"username",className:"text-sm",children:"Username"}),g.jsx(Vt,{id:"username",type:"text",value:u,onChange:p=>d(p.target.value),required:!0,disabled:n,placeholder:"Your name",className:"text-sm sm:text-base"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"new-password",className:"text-sm",children:"Password (min 6 characters)"}),g.jsx(Vt,{id:"new-password",type:"password",value:l,onChange:p=>c(p.target.value),required:!0,disabled:n,placeholder:"Create a password",minLength:6,className:"text-sm sm:text-base"})]}),g.jsxs(se,{type:"submit",className:"w-full text-sm sm:text-base",disabled:n,children:[n&&g.jsx(Kr,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 animate-spin"}),"Create Account"]}),g.jsx("div",{className:"text-center mt-3 sm:mt-4",children:g.jsx("button",{type:"button",onClick:()=>i("login"),className:"text-xs sm:text-sm text-muted-foreground hover:underline",disabled:n,children:"Back to Login"})})]})]})]})})}function S4(){const t=vo(),{login:e}=Av();x.useEffect(()=>{ue.auth.getSession().then(({data:{session:s}})=>{s&&(e(Ei.mapUser(s.user)),De.success("Successfully logged in!"))})},[e]);const{data:n,isLoading:r}=Mn({queryKey:["allPosts"],queryFn:()=>st.getAllPosts()});return g.jsx("div",{className:"min-h-screen bg-background",children:g.jsxs("div",{className:"container mx-auto px-4 py-16 max-w-5xl",children:[g.jsxs("div",{className:"flex justify-between items-center mb-12",children:[g.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Admin Dashboard"}),g.jsxs(se,{onClick:()=>t("/admin/write"),children:[g.jsx(Gb,{className:"w-4 h-4 mr-2"}),"New Teaching"]})]}),r?g.jsx("div",{className:"flex justify-center py-12",children:g.jsx(Kr,{className:"w-8 h-8 animate-spin text-primary"})}):n&&n.length>0?g.jsx("div",{className:"grid gap-6",children:n.map(s=>g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx(vt,{className:"text-xl mb-2",children:s.title}),g.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[g.jsx("span",{children:new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),g.jsx("span",{className:"flex items-center gap-1",children:s.published?g.jsxs(g.Fragment,{children:[g.jsx(Pg,{className:"w-4 h-4"}),"Published"]}):g.jsxs(g.Fragment,{children:[g.jsx(QD,{className:"w-4 h-4"}),"Draft"]})}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(Pg,{className:"w-4 h-4"}),s.view_count||0," views"]})]})]}),g.jsx(se,{variant:"outline",size:"sm",onClick:()=>t(`/admin/edit/${s.id}`),children:"Edit"})]})}),s.excerpt&&g.jsx(at,{children:g.jsx("p",{className:"text-muted-foreground line-clamp-2",children:s.excerpt})})]},s.id))}):g.jsx(ot,{className:"border-border/60",children:g.jsxs(at,{className:"py-12 text-center",children:[g.jsx("p",{className:"text-muted-foreground mb-4",children:"No teachings yet"}),g.jsxs(se,{onClick:()=>t("/admin/write"),children:[g.jsx(Gb,{className:"w-4 h-4 mr-2"}),"Write Your First Teaching"]})]})})]})})}var fT={exports:{}},pT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=x;function k4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var E4=typeof Object.is=="function"?Object.is:k4,C4=$a.useState,T4=$a.useEffect,_4=$a.useLayoutEffect,N4=$a.useDebugValue;function O4(t,e){var n=e(),r=C4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return _4(function(){s.value=n,s.getSnapshot=e,Np(s)&&i({inst:s})},[t,n,e]),T4(function(){return Np(s)&&i({inst:s}),t(function(){Np(s)&&i({inst:s})})},[t]),N4(n),n}function Np(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!E4(t,n)}catch{return!0}}function A4(t,e){return e()}var R4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?A4:O4;pT.useSyncExternalStore=$a.useSyncExternalStore!==void 0?$a.useSyncExternalStore:R4;fT.exports=pT;var Qv=fT.exports;function Tt(t){this.content=t}Tt.prototype={constructor:Tt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new Tt(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Tt(n)},addToStart:function(t,e){return new Tt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Tt(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new Tt(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Tt.from(t),t.size?new Tt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Tt.from(t),t.size?new Tt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Tt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Tt.from=function(t){if(t instanceof Tt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Tt(e)};function mT(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=mT(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function gT(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=gT(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class M{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new M(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),s+=a.nodeSize),o=l}return new M(r,s)}cutByIndex(e,n){return e==n?M.empty:e==0&&n==this.content.length?this:new M(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new M(s,i)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return mT(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return gT(this,e,n,r)}findIndex(e){if(e==0)return Iu(0,e);if(e==this.size)return Iu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?Iu(n+1,i):Iu(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return M.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new M(n||e,r)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const Op={index:0,offset:0};function Iu(t,e){return Op.index=t,Op.offset=e,Op}function Xd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Xd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Xd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let _e=class Bg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Xd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Bg.none;if(e instanceof Bg)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};_e.none=[];class Zd extends Error{}class U{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=vT(this.content,e+this.openStart,n);return r&&new U(r,this.openStart,this.openEnd)}removeBetween(e,n){return new U(yT(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return U.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new U(M.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new U(e,r,s)}}U.empty=new U(M.empty,0,0);function yT(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(s==e||i.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(yT(i.content,e-s-1,n-s-1)))}function vT(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=vT(o.content,e-i-1,n,o);return a&&t.replaceChild(s,o.copy(a))}function P4(t,e,n){if(n.openStart>t.depth)throw new Zd("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Zd("Inconsistent open depths");return wT(t,e,n,0)}function wT(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=wT(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Ji(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=M4(n,t);return Ji(i,xT(t,o,a,e,r))}else return Ji(i,eh(t,e,r))}function bT(t,e){if(!e.type.compatibleContent(t.type))throw new Zd("Cannot join "+e.type.name+" onto "+t.type.name)}function Fg(t,e,n){let r=t.node(n);return bT(r,e.node(n)),r}function Gi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ul(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Gi(t.nodeAfter,r),i++));for(let a=i;a<o;a++)Gi(s.child(a),r);e&&e.depth==n&&e.textOffset&&Gi(e.nodeBefore,r)}function Ji(t,e){return t.type.checkContent(e),t.copy(e)}function xT(t,e,n,r,s){let i=t.depth>s&&Fg(t,e,s+1),o=r.depth>s&&Fg(n,r,s+1),a=[];return Ul(null,t,s,a),i&&o&&e.index(s)==n.index(s)?(bT(i,o),Gi(Ji(i,xT(t,e,n,r,s+1)),a)):(i&&Gi(Ji(i,eh(t,e,s+1)),a),Ul(e,n,s,a),o&&Gi(Ji(o,eh(n,r,s+1)),a)),Ul(r,null,s,a),new M(a)}function eh(t,e,n){let r=[];if(Ul(null,t,n,r),t.depth>n){let s=Fg(t,e,n+1);Gi(Ji(s,eh(t,e,n+1)),r)}return Ul(e,null,n,r),new M(r)}function M4(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(M.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class Oc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return _e.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new th(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),c=i-l;if(r.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;i=c-1,s+=l+1}return new Oc(n,r,i)}static resolveCached(e,n){let r=px.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else px.set(e,r=new I4);let s=r.elts[r.i]=Oc.resolve(e,n);return r.i=(r.i+1)%j4,s}}class I4{constructor(){this.elts=[],this.i=0}}const j4=12,px=new WeakMap;class th{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const D4=Object.create(null);let Gs=class Ug{constructor(e,n,r,s=_e.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||M.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Xd(this.attrs,n||e.defaultAttrs||D4)&&_e.sameSet(this.marks,r||_e.none)}copy(e=null){return e==this.content?this:new Ug(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ug(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return U.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),a=s.start(o),c=s.node(o).content.cut(s.pos-a,i.pos-a);return new U(c,s.depth-o,i.depth-o)}replace(e,n,r){return P4(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return Oc.resolveCached(this,e)}resolveNoCache(e){return Oc.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ST(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=M.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=_e.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!_e.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=M.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};Gs.prototype.text=void 0;class nh extends Gs{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ST(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new nh(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new nh(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ST(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ao{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new L4(e,n);if(r.next==null)return ao.empty;let s=kT(r);r.next&&r.err("Unexpected trailing text");let i=V4(H4(s));return W4(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return M.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=i(d,a.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}ao.empty=new ao(!0);class L4{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function kT(t){let e=[];do e.push($4(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function $4(t){let e=[];do e.push(z4(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function z4(t){let e=U4(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=B4(t,e);else break;return e}function mx(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function B4(t,e){let n=mx(t),r=n;return t.eat(",")&&(t.next!="}"?r=mx(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function F4(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function U4(t){if(t.eat("(")){let e=kT(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=F4(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function H4(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=i(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();s(i(o.expr,l),u),l=u}if(o.max==-1)s(i(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),s(i(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ET(t,e){return e-t}function gx(t,e){let n=[];return r(e),n.sort(ET);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&n.indexOf(l)==-1&&r(l)}}}function V4(t){let e=Object.create(null);return n(gx(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);gx(t,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new ao(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(ET);i.next.push({type:s[o][0],next:e[a.join(",")]||n(a)})}return i}}function W4(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function CT(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function TT(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function _T(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function NT(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new K4(t,r,e[r]);return n}let yx=class OT{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=NT(e,r.attrs),this.defaultAttrs=CT(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ao.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:TT(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gs(this,this.computeAttrs(e),M.from(n),_e.setFrom(r))}createChecked(e=null,n,r){return n=M.from(n),this.checkContent(n),new Gs(this,this.computeAttrs(e),n,_e.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=M.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(M.empty,!0);return i?new Gs(this,e,n.append(i),_e.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){_T(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:_e.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new OT(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function q4(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class K4{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?q4(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class vf{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=NT(e,s.attrs),this.excluded=null;let i=CT(this.attrs);this.instance=i?new _e(this,i):null}create(e=null){return!e&&this.instance?this.instance:new _e(this,TT(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new vf(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){_T(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class AT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=Tt.from(e.nodes),n.marks=Tt.from(e.marks||{}),this.nodes=yx.compile(this.spec.nodes,this),this.marks=vf.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=ao.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?vx(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:vx(this,o.split(" "))}this.nodeFromJSON=s=>Gs.fromJSON(this,s),this.markFromJSON=s=>_e.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof yx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new nh(r,r.defaultAttrs,e,_e.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function vx(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function G4(t){return t.tag!=null}function J4(t){return t.style!=null}class Js{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(G4(s))this.tags.push(s);else if(J4(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new bx(this,n,!1);return r.addAll(e,_e.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new bx(this,n,!0);return r.addAll(e,_e.none,n.from,n.to),U.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(X4(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=xx(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=xx(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Js(e,Js.schemaRules(e)))}}const RT={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Q4={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},PT={ol:!0,ul:!0},Ac=1,Hg=2,Hl=4;function wx(t,e,n){return e!=null?(e?Ac:0)|(e==="full"?Hg:0):t&&t.whitespace=="pre"?Ac|Hg:n&~Hl}class ju{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=_e.none,this.match=i||(o&Hl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(M.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ac)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=M.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!RT.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class bx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=wx(null,n.preserveWhitespace,0)|(r?Hl:0);s?i=new ju(s.type,s.attrs,_e.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new ju(null,null,_e.none,!0,null,o):i=new ju(e.schema.topNodeType,null,_e.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&Hg?"full":this.localPreserveWS||(s.options&Ac)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;PT.hasOwnProperty(o)&&this.parser.normalizeLists&&Y4(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Q4.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(RT.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!s||s.length>c.length+a)&&(s=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=_e.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):Sx(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=wx(e,i,o.options);o.options&Hl&&o.content.length==0&&(a|=Hl);let l=_e.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Sx(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new ju(e,n,l,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ac)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Y4(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&PT.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function X4(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function xx(t){let e={};for(let n in t)e[n]=t[n];return e}function Sx(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class wo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Ap(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(i.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=ud(Ap(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&ud(Ap(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return ud(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new wo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=kx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return kx(e.marks)}}function kx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ap(t){return t.document||window.document}const Ex=new WeakMap;function Z4(t){let e=Ex.get(t);return e===void 0&&Ex.set(t,e=ez(t)),e}function ez(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function ud(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=Z4(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let a,l=n?t.createElementNS(n,s):t.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=ud(t,f,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const MT=65535,IT=Math.pow(2,16);function tz(t,e){return t+e*IT}function Cx(t){return t&MT}function nz(t){return(t-(t&MT))/IT}const jT=1,DT=2,dd=4,LT=8;class Vg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&LT)>0}get deletedBefore(){return(this.delInfo&(jT|dd))>0}get deletedAfter(){return(this.delInfo&(DT|dd))>0}get deletedAcross(){return(this.delInfo&dd)>0}}class pn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&pn.empty)return pn.empty}recover(e){let n=0,r=Cx(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+nz(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+s+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:tz(a/3,e-l),m=e==l?DT:e==d?jT:dd;return(n<0?e!=l:e!=d)&&(m|=LT),new Vg(h,m,p)}s+=u-c}return r?e+s:new Vg(e+s,0,null)}touches(e,n){let r=0,s=Cx(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),c=this.ranges[s+n],u=this.ranges[s+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new pn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?pn.empty:new pn(e<0?[0,-e,0]:[0,0,e])}}pn.empty=new pn([]);class Rc{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Rc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new Rc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new Vg(e,s,null)}}const Rp=Object.create(null);class Bt{getMap(){return pn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Rp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Rp)throw new RangeError("Duplicate use of step JSON ID "+e);return Rp[e]=n,n.prototype.jsonID=e,n}}class lt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new lt(e,null)}static fail(e){return new lt(null,e)}static fromReplace(e,n,r,s){try{return lt.ok(e.replace(n,r,s))}catch(i){if(i instanceof Zd)return lt.fail(i.message);throw i}}}function Yv(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(Yv(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return M.fromArray(r)}class js extends Bt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new U(Yv(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return lt.fromReplace(e,this.from,this.to,i)}invert(){return new er(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new js(n.pos,r.pos,this.mark)}merge(e){return e instanceof js&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new js(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new js(n.from,n.to,e.markFromJSON(n.mark))}}Bt.jsonID("addMark",js);class er extends Bt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new U(Yv(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return lt.fromReplace(e,this.from,this.to,r)}invert(){return new js(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new er(n.pos,r.pos,this.mark)}merge(e){return e instanceof er&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new er(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new er(n.from,n.to,e.markFromJSON(n.mark))}}Bt.jsonID("removeMark",er);class Ds extends Bt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return lt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return lt.fromReplace(e,this.pos,this.pos+1,new U(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Ds(this.pos,n.marks[s]);return new Ds(this.pos,this.mark)}}return new lo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ds(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ds(n.pos,e.markFromJSON(n.mark))}}Bt.jsonID("addNodeMark",Ds);class lo extends Bt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return lt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return lt.fromReplace(e,this.pos,this.pos+1,new U(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ds(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new lo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new lo(n.pos,e.markFromJSON(n.mark))}}Bt.jsonID("removeNodeMark",lo);class gt extends Bt{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&Wg(e,this.from,this.to)?lt.fail("Structure replace would overwrite content"):lt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new pn([this.from,this.to-this.from,this.slice.size])}invert(e){return new gt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new gt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof gt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?U.empty:new U(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new gt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?U.empty:new U(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new gt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new gt(n.from,n.to,U.fromJSON(e,n.slice),!!n.structure)}}Bt.jsonID("replace",gt);class xt extends Bt{constructor(e,n,r,s,i,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Wg(e,this.from,this.gapFrom)||Wg(e,this.gapTo,this.to)))return lt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return lt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?lt.fromReplace(e,this.from,this.to,r):lt.fail("Content does not fit in gap")}getMap(){return new pn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new xt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new xt(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new xt(n.from,n.to,n.gapFrom,n.gapTo,U.fromJSON(e,n.slice),n.insert,!!n.structure)}}Bt.jsonID("replaceAround",xt);function Wg(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function rz(t,e,n,r){let s=[],i=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:s.push(o=new er(f,h,d[m])));a&&a.to==f?a.to=h:i.push(a=new js(f,h,r))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function sz(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof vf){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<s.length;h++){let p=s[h];p.step==i-1&&d.eq(s[h].style)&&(f=p)}f?(f.to=c,f.step=i):s.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),s.forEach(o=>t.step(new er(o.from,o.to,o.style)))}function Xv(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new gt(a,u,U.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new er(a,u,c.marks[f]));if(s&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(c.text);)p||(p=new U(M.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new gt(a+f.index,a+f.index+f[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(M.empty,!0);t.replace(a,a,new U(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function iz(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function nl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,i=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+s,l=t.$to.indexAfter(r)-i;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!iz(o,a,l))break;a&&(s=1),l<o.childCount&&(i=1)}return null}function oz(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=M.empty,d=0;for(let p=i,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=M.from(r.node(p).copy(u)),d++):l--;let f=M.empty,h=0;for(let p=i,m=!1;p>n;p--)m||s.after(p+1)<s.end(p)?(m=!0,f=M.from(s.node(p).copy(f)),h++):c++;t.step(new xt(l,c,o,a,new U(u.append(f),d,h),u.size-d,!0))}function Zv(t,e,n=null,r=t){let s=az(t,e),i=s&&lz(r,e);return i?s.map(Tx).concat({type:e,attrs:n}).concat(i.map(Tx)):null}function Tx(t){return{type:t,attrs:null}}function az(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function lz(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function cz(t,e,n){let r=M.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=M.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new xt(s,i,s,i,new U(r,0,0),n.length,!0))}function uz(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,l)&&dz(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&zT(t,o,a,i),Xv(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new xt(d,f,d+1,f-1,new U(M.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&$T(t,o,a,i),!1}})}function $T(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function zT(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function dz(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function hz(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new xt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new U(M.from(o),0,0),1,!0))}function Fr(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>i;c--,u--){let d=s.node(c),f=s.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function fz(t,e,n=1,r){let s=t.doc.resolve(e),i=M.empty,o=M.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){i=M.from(s.node(a).copy(i));let u=r&&r[c];o=M.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}t.step(new gt(e,e,new U(i.append(o),n,n),!0))}function ci(t,e){let n=t.resolve(e),r=n.index();return BT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function pz(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function BT(t,e){return!!(t&&e&&!t.isLeaf&&pz(t,e))}function wf(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&BT(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function mz(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);zT(t,u.node(),u.before(),a)}o.inlineContent&&Xv(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new gt(c,l.map(e+n,-1),U.empty,!0)),r===!0){let u=t.doc.resolve(c);$T(t,u.node(),u.before(),t.steps.length)}return t}function gz(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function FT(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(i==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function bf(t,e,n=e,r=U.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return UT(s,i,r)?new gt(e,n,r):new yz(s,i,r).fit()}function UT(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class yz{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=M.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=M.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new U(i,o,a);return e>-1?new xt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new gt(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=Pp(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(M.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=Pp(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new U(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=Pp(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new U(Cl(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new U(Cl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(s){for(let m=0;m<s.childCount;m++)u.push(s.child(m));d=d.matchFragment(s)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),y=d.matchType(m.type);if(!y)break;c++,(c>1||l==0||m.content.size)&&(d=y,u.push(HT(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Tl(this.placed,n,M.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=a;m<h;m++){let v=y.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),y=v.content}this.unplaced=p?e==0?U.empty:new U(Cl(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new U(Cl(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Mp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Mp(e,n,s,r,i);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Mp(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Tl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Tl(this.placed,this.depth,M.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(M.empty,!0);n.childCount&&(this.placed=Tl(this.placed,this.frontier.length,n))}}function Cl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Cl(t.firstChild.content,e-1,n)))}function Tl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Tl(t.lastChild.content,e-1,n)))}function Pp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function HT(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,HT(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(M.empty,!0)))),t.copy(r)}function Mp(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!vz(n,i.content,o)?a:null}function vz(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function wz(t){return t.spec.defining||t.spec.definingForContent}function bz(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(UT(s,i,r))return t.step(new gt(e,n,r));let o=WT(s,i);o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,h=s.pos-1;f>0;f--,h--){let p=s.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=wz(h.type);if(p&&!h.sameMarkup(s.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let y=o[(m+l)%o.length],v=!0;y<0&&(v=!1,y=-y);let w=s.node(y-1),b=s.index(y-1);if(w.canReplaceWith(b,b,p.type,p.marks))return t.replace(s.before(y),v?i.after(y):n,new U(VT(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=s.before(h),n=i.after(h))}}function VT(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(VT(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(M.empty,!0))}return t}function xz(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=gz(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new U(M.from(r),0,0))}function Sz(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=WT(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function WT(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class pa extends Bt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return lt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return lt.fromReplace(e,this.pos,this.pos+1,new U(M.from(s),0,n.isLeaf?0:1))}getMap(){return pn.empty}invert(e){return new pa(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new pa(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new pa(n.pos,n.attr,n.value)}}Bt.jsonID("attr",pa);class Pc extends Bt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return lt.ok(r)}getMap(){return pn.empty}invert(e){return new Pc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Pc(n.attr,n.value)}}Bt.jsonID("docAttr",Pc);let za=class extends Error{};za=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};za.prototype=Object.create(Error.prototype);za.prototype.constructor=za;za.prototype.name="TransformError";class qT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Rc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new za(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=U.empty){let s=bf(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new U(M.from(r),0,0))}delete(e,n){return this.replace(e,n,U.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return bz(this,e,n,r),this}replaceRangeWith(e,n,r){return xz(this,e,n,r),this}deleteRange(e,n){return Sz(this,e,n),this}lift(e,n){return oz(this,e,n),this}join(e,n=1){return mz(this,e,n),this}wrap(e,n){return cz(this,e,n),this}setBlockType(e,n=e,r,s=null){return uz(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return hz(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new pa(e,n,r)),this}setDocAttribute(e,n){return this.step(new Pc(e,n)),this}addNodeMark(e,n){return this.step(new Ds(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof _e)n.isInSet(r.marks)&&this.step(new lo(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new lo(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return fz(this,e,n,r),this}addMark(e,n,r){return rz(this,e,n,r),this}removeMark(e,n,r){return sz(this,e,n,r),this}clearIncompatible(e,n,r){return Xv(this,e,n,r),this}}const Ip=Object.create(null);class de{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new kz(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=U.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?U.empty:n),a==0&&Ox(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Ox(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new re(e):Fo(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?Fo(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Fo(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new vn(e.node(0))}static atStart(e){return Fo(e,e,0,0,1)||new vn(e)}static atEnd(e){return Fo(e,e,e.content.size,e.childCount,-1)||new vn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ip[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ip)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ip[e]=n,n.prototype.jsonID=e,n}getBookmark(){return re.between(this.$anchor,this.$head).getBookmark()}}de.prototype.visible=!0;class kz{constructor(e,n){this.$from=e,this.$to=n}}let _x=!1;function Nx(t){!_x&&!t.parent.inlineContent&&(_x=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class re extends de{constructor(e,n=e){Nx(e),Nx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return de.near(r);let s=e.resolve(n.map(this.anchor));return new re(s.parent.inlineContent?s:r,r)}replace(e,n=U.empty){if(super.replace(e,n),n==U.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof re&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new xf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new re(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=de.findFrom(n,r,!0)||de.findFrom(n,-r,!0);if(i)n=i.$head;else return de.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(de.findFrom(e,-r,!0)||de.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new re(e,n)}}de.jsonID("text",re);class xf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new xf(e.map(this.anchor),e.map(this.head))}resolve(e){return re.between(e.resolve(this.anchor),e.resolve(this.head))}}class X extends de{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?de.near(i):new X(i)}content(){return new U(M.from(this.node),0,0)}eq(e){return e instanceof X&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new e0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new X(e.resolve(n.anchor))}static create(e,n){return new X(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}X.prototype.visible=!1;de.jsonID("node",X);class e0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new xf(r,r):new e0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&X.isSelectable(r)?new X(n):de.near(n)}}class vn extends de{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=U.empty){if(n==U.empty){e.delete(0,e.doc.content.size);let r=de.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new vn(e)}map(e){return new vn(e)}eq(e){return e instanceof vn}getBookmark(){return Ez}}de.jsonID("all",vn);const Ez={map(){return this},resolve(t){return new vn(t)}};function Fo(t,e,n,r,s,i=!1){if(e.inlineContent)return re.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&X.isSelectable(a))return X.create(t,n-(s<0?a.nodeSize:0))}else{let l=Fo(t,a,n+s,s<0?a.childCount:0,s,i);if(l)return l}n+=a.nodeSize*s}return null}function Ox(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof gt||s instanceof xt))return;let i=t.mapping.maps[r],o;i.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(de.near(t.doc.resolve(o),n))}const Ax=1,Du=2,Rx=4;class Cz extends qT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ax)&~Du,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ax)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Du,this}ensureMarks(e){return _e.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Du)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Du,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||_e.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(de.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Rx,this}get scrolledIntoView(){return(this.updated&Rx)>0}}function Px(t,e){return!e||!t?t:t.bind(e)}class _l{constructor(e,n,r){this.name=e,this.init=Px(n.init,r),this.apply=Px(n.apply,r)}}const Tz=[new _l("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new _l("selection",{init(t,e){return t.selection||de.atStart(e.doc)},apply(t){return t.selection}}),new _l("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new _l("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class jp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Tz.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new _l(r.key,r.spec.state,r))})}}class sa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new sa(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new Cz(this)}static create(e){let n=new jp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new sa(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new jp(this.schema,e.plugins),r=n.fields,s=new sa(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new jp(e.schema,e.plugins),i=new sa(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Gs.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=de.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[o.name]=c.fromJSON.call(l,e,n[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function KT(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=KT(s,e,{})),n[r]=s}return n}class Ve{constructor(e){this.spec=e,this.props={},e.props&&KT(e.props,this,this.props),this.key=e.key?e.key.key:GT("plugin")}getState(e){return e[this.key]}}const Dp=Object.create(null);function GT(t){return t in Dp?t+"$"+ ++Dp[t]:(Dp[t]=0,t+"$")}class ft{constructor(e="key"){this.key=GT(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const t0=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function JT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const QT=(t,e,n)=>{let r=JT(t,n);if(!r)return!1;let s=n0(r);if(!s){let o=r.blockRange(),a=o&&nl(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(i_(t,s,e,-1))return!0;if(r.parent.content.size==0&&(Ba(i,"end")||X.isSelectable(i)))for(let o=r.depth;;o--){let a=bf(t.doc,r.before(o),r.after(o),U.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ba(i,"end")?de.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):X.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},_z=(t,e,n)=>{let r=JT(t,n);if(!r)return!1;let s=n0(r);return s?YT(t,s,e):!1},Nz=(t,e,n)=>{let r=ZT(t,n);if(!r)return!1;let s=r0(r);return s?YT(t,s,e):!1};function YT(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=bf(t.doc,i,l,U.empty);if(!c||c.from!=i||c instanceof gt&&c.slice.size>=l-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(re.create(u.doc,i)),n(u.scrollIntoView())}return!0}function Ba(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const XT=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=n0(r)}let o=i&&i.nodeBefore;return!o||!X.isSelectable(o)?!1:(e&&e(t.tr.setSelection(X.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function n0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ZT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const e_=(t,e,n)=>{let r=ZT(t,n);if(!r)return!1;let s=r0(r);if(!s)return!1;let i=s.nodeAfter;if(i_(t,s,e,1))return!0;if(r.parent.content.size==0&&(Ba(i,"start")||X.isSelectable(i))){let o=bf(t.doc,r.before(),r.after(),U.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ba(i,"start")?de.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):X.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},t_=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=r0(r)}let o=i&&i.nodeAfter;return!o||!X.isSelectable(o)?!1:(e&&e(t.tr.setSelection(X.create(t.doc,i.pos)).scrollIntoView()),!0)};function r0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Oz=(t,e)=>{let n=t.selection,r=n instanceof X,s;if(r){if(n.node.isTextblock||!ci(t.doc,n.from))return!1;s=n.from}else if(s=wf(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(X.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},Az=(t,e)=>{let n=t.selection,r;if(n instanceof X){if(n.node.isTextblock||!ci(t.doc,n.to))return!1;r=n.to}else if(r=wf(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Rz=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&nl(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},n_=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function s0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Pz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=s0(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(de.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},r_=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof vn||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=s0(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(re.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},s_=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Fr(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&nl(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function Mz(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof X&&e.selection.node.isBlock)return!r.parentOffset||!Fr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,a,l=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),a=s0(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),i.unshift(l&&a?{type:a}:null),o=h;break}else{if(h==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof re||e.selection instanceof vn)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Fr(u.doc,d,i.length,i);if(f||(i[0]=a?{type:a}:null,f=Fr(u.doc,d,i.length,i)),!f)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(o).type!=a){let h=u.mapping.map(r.before(o)),p=u.doc.resolve(h);a&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const Iz=Mz(),jz=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(X.create(t.doc,s))),!0)};function Dz(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||ci(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function i_(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&Dz(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,p=M.empty;for(let v=o.length-1;v>=0;v--)p=M.from(o[v].create(null,p));p=M.from(s.copy(p));let m=t.tr.step(new xt(e.pos-1,h,e.pos,h,new U(p,1,0),o.length,!0)),y=m.doc.resolve(h+2*o.length);y.nodeAfter&&y.nodeAfter.type==s.type&&ci(m.doc,y.pos)&&m.join(y.pos),n(m.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:de.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&nl(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&Ba(i,"start",!0)&&Ba(s,"end")){let h=s,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=i,y=1;for(;!m.isTextblock;m=m.firstChild)y++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let v=M.empty;for(let b=p.length-1;b>=0;b--)v=M.from(p[b].copy(v));let w=t.tr.step(new xt(e.pos-p.length,e.pos+i.nodeSize,e.pos+y,e.pos+i.nodeSize-y,new U(v,p.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function o_(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(re.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const Lz=o_(-1),$z=o_(1);function zz(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&Zv(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Mx(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let u=n.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function i0(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}i0(t0,QT,XT);i0(t0,e_,t_);i0(n_,r_,s_,Iz);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Bz(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let a=r?n.tr:null;return Fz(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Fz(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new th(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new th(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=Zv(i,n,r,e);return a?(t&&Uz(t,e,a,s,n),!0):!1}function Uz(t,e,n,r,s){let i=M.empty;for(let u=n.length-1;u>=0;u--)i=M.from(n[u].type.create(n[u].attrs,i));t.step(new xt(e.start-(r?2:0),e.end,e.start,e.end,new U(i,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==s&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Fr(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function Hz(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?Vz(e,n,t,i):Wz(e,n,i):!0:!1}}function Vz(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new xt(i-1,o,i,o,new U(M.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new th(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=nl(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return ci(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function Wz(t,e,n){let r=t.tr,s=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=s.child(p).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?M.empty:M.from(s))))return!1;let d=i.pos,f=d+o.nodeSize;return r.step(new xt(d-(a?1:0),f+(l?1:0),d+1,f-1,new U((a?M.empty:M.from(s.copy(M.empty))).append(l?M.empty:M.from(s.copy(M.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function qz(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=M.from(c?t.create():null),d=new U(M.from(t.create(null,M.from(a.type.create(null,u)))),c?3:1,0),f=i.start,h=i.end;n(e.tr.step(new xt(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}const Nt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Fa=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let qg=null;const Mr=function(t,e,n){let r=qg||(qg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Kz=function(){qg=null},co=function(t,e,n,r){return n&&(Ix(t,e,n,r,-1)||Ix(t,e,n,r,1))},Gz=/^(img|br|input|textarea|hr)$/i;function Ix(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Rn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||nu(t)||Gz.test(t.nodeName)||t.contentEditable=="false")return!1;e=Nt(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?Rn(t):0}else return!1}}function Rn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Jz(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Rn(t)}else if(t.parentNode&&!nu(t))e=Nt(t),t=t.parentNode;else return null}}function Qz(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!nu(t))e=Nt(t)+1,t=t.parentNode;else return null}}function Yz(t,e,n){for(let r=e==0,s=e==Rn(t);r||s;){if(t==n)return!0;let i=Nt(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==Rn(t)}}function nu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Sf=function(t){return t.focusNode&&co(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function _i(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Xz(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Zz(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Rn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Rn(r.startContainer),r.startOffset)}}}const Sr=typeof navigator<"u"?navigator:null,jx=typeof document<"u"?document:null,ui=Sr&&Sr.userAgent||"",Kg=/Edge\/(\d+)/.exec(ui),a_=/MSIE \d/.exec(ui),Gg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ui),an=!!(a_||Gg||Kg),Qs=a_?document.documentMode:Gg?+Gg[1]:Kg?+Kg[1]:0,jn=!an&&/gecko\/(\d+)/i.test(ui);jn&&+(/Firefox\/(\d+)/.exec(ui)||[0,0])[1];const Jg=!an&&/Chrome\/(\d+)/.exec(ui),wt=!!Jg,l_=Jg?+Jg[1]:0,zt=!an&&!!Sr&&/Apple Computer/.test(Sr.vendor),Ua=zt&&(/Mobile\/\w+/.test(ui)||!!Sr&&Sr.maxTouchPoints>2),Nn=Ua||(Sr?/Mac/.test(Sr.platform):!1),c_=Sr?/Win/.test(Sr.platform):!1,zr=/Android \d/.test(ui),ru=!!jx&&"webkitFontSmoothing"in jx.documentElement.style,eB=ru?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function tB(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Tr(t,e){return typeof t=="number"?t:t[e]}function nB(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Dx(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Fa(o);continue}let a=o,l=a==i.body,c=l?tB(i):nB(a),u=0,d=0;if(e.top<c.top+Tr(r,"top")?d=-(c.top-e.top+Tr(s,"top")):e.bottom>c.bottom-Tr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Tr(s,"top")-c.top:e.bottom-c.bottom+Tr(s,"bottom")),e.left<c.left+Tr(r,"left")?u=-(c.left-e.left+Tr(s,"left")):e.right>c.right-Tr(r,"right")&&(u=e.right-c.right+Tr(s,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let m=a.scrollLeft-h,y=a.scrollTop-p;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Fa(o)}}function rB(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:u_(t.dom)}}function u_(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Fa(r));return e}function sB({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;d_(n,r==0?0:r-e)}function d_(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Mo=null;function iB(t){if(t.setActive)return t.setActive();if(Mo)return t.focus(Mo);let e=u_(t);t.focus(Mo==null?{get preventScroll(){return Mo={preventScroll:!0},!0}}:void 0),Mo||(Mo=!1,d_(e,0))}function h_(t,e){let n,r=2e8,s,i=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Mr(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,s=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(i=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=d+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?oB(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:h_(n,s)}function oB(t,e){let n=t.nodeValue.length,r=document.createRange(),s;for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=ds(r,1);if(o.top!=o.bottom&&o0(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:t,offset:0}}function o0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function aB(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function lB(t,e,n){let{node:r,offset:s}=h_(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function cB(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?s=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function f_(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(o0(e,c))return f_(o,e,c)}}if((i=(i+1)%r)==s)break}return t}function uB(t,e){let n=t.dom.ownerDocument,r,s=0,i=Zz(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!o0(e,c)||(o=f_(t.dom,e,c),!o))return null}if(zt)for(let c=o;r&&c;c=Fa(c))c.draggable&&(r=void 0);if(o=aB(o,e),r){if(jn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;ru&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=cB(t,r,s,e))}a==null&&(a=lB(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Lx(t){return t.top<t.bottom||t.left<t.right}function ds(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Lx(r))return r}return Array.prototype.find.call(n,Lx)||t.getBoundingClientRect()}const dB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function p_(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=ru||jn;if(r.nodeType==3)if(o&&(dB.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=ds(Mr(r,s,s),n);if(jn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=ds(Mr(r,s-1,s-1),-1);if(c.top==l.top){let u=ds(Mr(r,s,s+1),-1);if(u.top!=l.top)return gl(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,gl(ds(Mr(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==Rn(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return Lp(l.getBoundingClientRect(),!1)}if(i==null&&s<Rn(r)){let l=r.childNodes[s];if(l.nodeType==1)return Lp(l.getBoundingClientRect(),!0)}return Lp(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==Rn(r))){let l=r.childNodes[s-1],c=l.nodeType==3?Mr(l,Rn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return gl(ds(c,1),!1)}if(i==null&&s<Rn(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Mr(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return gl(ds(c,-1),!0)}return gl(ds(r.nodeType==3?Mr(r):r,-n),n>=0)}function gl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Lp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function m_(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function hB(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return m_(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=p_(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Mr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const fB=/[\u0590-\u08ac]/;function pB(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=t.domSelection();return a?!fB.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:o:m_(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),y=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),y}):r.pos==r.start()||r.pos==r.end()}let $x=null,zx=null,Bx=!1;function mB(t,e,n){return $x==e&&zx==n?Bx:($x=e,zx=n,Bx=n=="up"||n=="down"?hB(t,e,n):pB(t,e,n))}const Dn=0,Fx=1,Mi=2,kr=3;class su{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Dn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>Nt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof y_){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof g_&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Nt(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Nt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=Nt(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Nt(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],y=p+m.size;if(i>p&&o<y)return m.setSelection(e-p-m.border,n-p-m.border,r,s);p=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((jn||zt)&&e==n){let{node:h,offset:p}=a;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let m=h,y;m;m=m.parentNode){if(y=m.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:Nt(y)+1});break}let v=m.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let m=h.childNodes[p-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(jn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(s=!0)}if(!(s||d&&zt)&&co(a.node,a.offset,u.anchorNode,u.anchorOffset)&&co(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(d&&jn)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+i.border,l=o-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Mi:Fx,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=kr:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Mi:kr}r=o}this.dirty=Mi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Mi:Fx;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class g_ extends su{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==Dn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class gB extends su{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class uo extends su{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=wo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new uo(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&kr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=kr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Dn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Dn}}slice(e,n,r){let s=uo.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=Yg(i,n,o,r)),e>0&&(i=Yg(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ys extends su{constructor(e,n,r,s,i,o,a,l,c){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,i,o){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=wo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=b_(u,r,n),c?l=new yB(e,n,r,s,u,d||null,f,c,i,o+1):n.isText?new kf(e,n,r,s,u,f,i):new Ys(e,n,r,s,u,d||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}return e}matchesNode(e,n,r){return this.dirty==Dn&&e.eq(this.node)&&rh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new wB(this,o&&o.node,e);SB(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?_e.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,s)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(h=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Mi)&&(o&&this.protectLocalComposition(e,o),v_(this.contentDOM,this.children,e),Ua&&kB(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof re)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=EB(this.node.content,o,r-n,s-n);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new gB(this,i,n,s);e.input.compositionNodes.push(o),this.children=Yg(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==kr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Dn}updateOuterDeco(e){if(rh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=w_(this.dom,this.nodeDOM,Qg(this.outerDeco,this.node,n),Qg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ux(t,e,n,r,s){b_(r,e,t);let i=new Ys(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class kf extends Ys{constructor(e,n,r,s,i,o,a){super(e,n,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==kr||this.dirty!=Dn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Dn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Dn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new kf(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=kr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class y_ extends su{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Dn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class yB extends Ys{constructor(e,n,r,s,i,o,a,l,c,u){super(e,n,r,s,i,o,a,c,u),this.spec=l}update(e,n,r,s){if(this.dirty==kr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function v_(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=Hx(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(o instanceof uo){let l=r?r.previousSibling:t.lastChild;v_(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Hx(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const Vl=function(t){t&&(this.nodeName=t)};Vl.prototype=Object.create(null);const Ii=[new Vl];function Qg(t,e,n){if(t.length==0)return Ii;let r=n?Ii[0]:new Vl,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new Vl(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&s.length==1&&s.push(r=new Vl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function w_(t,e,n,r){if(n==Ii&&r==Ii)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=Ii[0]),s=l}vB(s,a||Ii[0],o)}return s}function vB(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function b_(t,e,n){return w_(t,t,Ii,Qg(e,n,t.nodeType!=1))}function rh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Hx(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class wB{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=bB(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Dn,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=uo.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==kr&&o.dom==o.contentDOM&&(o.dirty=Mi),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ys){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=kr&&rh(n,l.outerDeco));if(!f&&l.update(e,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Mi,d.updateChildren(s,o+1),d.dirty=Dn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!rh(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=Ys.create(this.top,n,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,s,i){let o=Ys.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new g_(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof uo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof kf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((zt||wt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new y_(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function bB(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof uo)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function xB(t,e){return t.type.side-e.type.side}function SB(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,s,e.forChild(i,u),c),i+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==i;){let y=s[o++];y.widget&&(u?(d||(d=[u])).push(y):u=y)}if(u)if(d){d.sort(xB);for(let y=0;y<d.length;y++)n(d[y],c,!!l)}else n(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=i&&a.splice(y--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let p=i+f.nodeSize;if(f.isText){let y=p;o<s.length&&s[o].from<y&&(y=s[o].from);for(let v=0;v<a.length;v++)a[v].to<y&&(y=a[v].to);y<p&&(l=f.cut(y-i),f=f.cut(0,y-i),p=y,h=-1)}else for(;o<s.length&&s[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(y=>!y.inline):a.slice();r(f,m,e.forChild(i,f),h),i=p}}function kB(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function EB(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let c=t.child(s++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Yg(t,e,n,r,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),s&&(i.push(s),s=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function a0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Sf(n)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&X.isSelectable(d)&&s.parent&&!(d.isInline&&Yz(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;c=new X(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=l0(t,u,a,d)}return c}function x_(t){return t.editable?t.hasFocus():k_(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ur(t,e=!1){let n=t.state.selection;if(S_(t,n),!!x_(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&wt){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&co(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)TB(t);else{let{anchor:r,head:s}=n,i,o;Vx&&!(n instanceof re)&&(n.$from.parent.inlineContent||(i=Wx(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Wx(t,n.to))),t.docView.setSelection(r,s,t,e),Vx&&(i&&qx(i),o&&qx(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&CB(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Vx=zt||wt&&l_<63;function Wx(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(zt&&s&&s.contentEditable=="false")return $p(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return $p(s);if(i)return $p(i)}}function $p(t){return t.contentEditable="true",zt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function qx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function CB(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!x_(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function TB(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Nt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&an&&Qs<=11&&(n.disabled=!0,n.disabled=!1)}function S_(t,e){if(e instanceof X){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Kx(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Kx(t)}function Kx(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function l0(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||re.between(e,n,r)}function Gx(t){return t.editable&&!t.hasFocus()?!1:k_(t)}function k_(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function _B(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return co(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Xg(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&de.findFrom(i,e)}function gs(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Jx(t,e,n){let r=t.state.selection;if(r instanceof re)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return gs(t,new re(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Xg(t.state,e);return s&&s instanceof X?gs(t,s):!1}else if(!(Nn&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?X.isSelectable(i)?gs(t,new X(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):ru?gs(t,new re(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof X&&r.node.isInline)return gs(t,new re(e>0?r.$to:r.$from));{let s=Xg(t.state,e);return s?gs(t,s):!1}}}function sh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Wl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Io(t,e){return e<0?NB(t):OB(t)}function NB(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(jn&&n.nodeType==1&&r<sh(n)&&Wl(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Wl(a,-1))s=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(E_(n))break;{let a=n.previousSibling;for(;a&&Wl(a,-1);)s=n.parentNode,i=Nt(a),a=a.previousSibling;if(a)n=a,r=sh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Zg(t,n,r):s&&Zg(t,s,i)}function OB(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=sh(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Wl(a,1))i=n,o=++r;else break}else{if(E_(n))break;{let a=n.nextSibling;for(;a&&Wl(a,1);)i=a.parentNode,o=Nt(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=sh(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&Zg(t,i,o)}function E_(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function AB(t,e){for(;t&&e==t.childNodes.length&&!nu(t);)e=Nt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function RB(t,e){for(;t&&!e&&!nu(t);)e=Nt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Zg(t,e,n){if(e.nodeType!=3){let i,o;(o=AB(e,n))?(e=o,n=0):(i=RB(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Sf(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Ur(t)},50)}function Qx(t,e){let n=t.state.doc.resolve(e);if(!(wt||c_)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Yx(t,e,n){let r=t.state.selection;if(r instanceof re&&!r.empty||n.indexOf("s")>-1||Nn&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Xg(t.state,e);if(o&&o instanceof X)return gs(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof vn?de.near(o,e):de.findFrom(o,e);return a?gs(t,a):!1}return!1}function Xx(t,e){if(!(t.state.selection instanceof re))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function Zx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function PB(t){if(!zt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Zx(t,r,"true"),setTimeout(()=>Zx(t,r,"false"),20)}return!1}function MB(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function IB(t,e){let n=e.keyCode,r=MB(e);if(n==8||Nn&&n==72&&r=="c")return Xx(t,-1)||Io(t,-1);if(n==46&&!e.shiftKey||Nn&&n==68&&r=="c")return Xx(t,1)||Io(t,1);if(n==13||n==27)return!0;if(n==37||Nn&&n==66&&r=="c"){let s=n==37?Qx(t,t.state.selection.from)=="ltr"?-1:1:-1;return Jx(t,s,r)||Io(t,s)}else if(n==39||Nn&&n==70&&r=="c"){let s=n==39?Qx(t,t.state.selection.from)=="ltr"?1:-1:1;return Jx(t,s,r)||Io(t,s)}else{if(n==38||Nn&&n==80&&r=="c")return Yx(t,-1,r)||Io(t,-1);if(n==40||Nn&&n==78&&r=="c")return PB(t)||Yx(t,1,r)||Io(t,1);if(r==(Nn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function c0(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||wo.fromSchema(t.state.schema),a=A_(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=O_[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function C_(t,e,n,r,s){let i=s.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return a=new U(M.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)a=d;else{let f=s.marks(),{schema:h}=t.state,p=wo.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=o.appendChild(document.createElement("p"));m&&y.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=$B(n),ru&&zB(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Js.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!jB.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=BB(e1(a,+u[1],+u[2]),u[4]);else if(a=U.maxOpen(DB(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=e1(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const jB=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function DB(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&i.length&&__(l,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=N_(o[o.length-1],i.length));let u=T_(a,l);o.push(u),s=s.matchType(u.type),i=l}}),o)return M.from(o)}return t}function T_(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,M.from(t));return t}function __(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=__(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(M.from(T_(n,t,s+1))))}}function N_(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,N_(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(M.empty,!0);return t.copy(n.append(r))}function ey(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<r-1&&(a=ey(a,e,n,r,s+1,i)),s>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(M.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function e1(t,e,n){return e<t.openStart&&(t=new U(ey(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new U(ey(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const O_={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let t1=null;function A_(){return t1||(t1=document.implementation.createHTMLDocument("title"))}let zp=null;function LB(t){let e=window.trustedTypes;return e?(zp||(zp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),zp.createHTML(t)):t}function $B(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=A_().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&O_[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=LB(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function zB(t){let e=t.querySelectorAll(wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function BB(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=M.from(l.create(r[a+1],s)),i++,o++}return new U(s,i,o)}const Kt={},Gt={},FB={touchstart:!0,touchmove:!0};class UB{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function HB(t){for(let e in Kt){let n=Kt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{WB(t,r)&&!u0(t,r)&&(t.editable||!(r.type in Gt))&&n(t,r)},FB[e]?{passive:!0}:void 0)}zt&&t.dom.addEventListener("input",()=>null),ty(t)}function Ls(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function VB(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ty(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>u0(t,r))})}function u0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function WB(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function qB(t,e){!u0(t,e)&&Kt[e.type]&&(t.editable||!(e.type in Gt))&&Kt[e.type](t,e)}Gt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!P_(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(zr&&wt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ua&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,_i(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||IB(t,n)?n.preventDefault():Ls(t,"key")};Gt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Gt.keypress=(t,e)=>{let n=e;if(P_(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Nn&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof re)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function Ef(t){return{left:t.clientX,top:t.clientY}}function KB(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function d0(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,n,i.nodeAfter,i.before(o),s,!0):a(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function ma(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function GB(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&X.isSelectable(r)?(ma(t,new X(n)),!0):!1}function JB(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof X&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(X.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(ma(t,X.create(t.state.doc,s)),!0):!1}function QB(t,e,n,r,s){return d0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?JB(t,n):GB(t,n))}function YB(t,e,n,r){return d0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function XB(t,e,n,r){return d0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||ZB(t,n,r)}function ZB(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ma(t,re.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)ma(t,re.create(r,a+1,a+1+o.content.size));else if(X.isSelectable(o))ma(t,X.create(r,a));else continue;return!0}}function h0(t){return ih(t)}const R_=Nn?"metaKey":"ctrlKey";Kt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=h0(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&KB(n,t.input.lastClick)&&!n[R_]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords(Ef(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new eF(t,o,n,!!r)):(i=="doubleClick"?YB:XB)(t,o.pos,o.inside,n)?n.preventDefault():Ls(t,"pointer"))};class eF{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[R_],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,o=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof X&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&jn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ls(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ur(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ef(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ls(this.view,"pointer"):QB(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||zt&&this.mightDrag&&!this.mightDrag.node.isAtom||wt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ma(this.view,de.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Ls(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ls(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Kt.touchstart=t=>{t.input.lastTouch=Date.now(),h0(t),Ls(t,"pointer")};Kt.touchmove=t=>{t.input.lastTouch=Date.now(),Ls(t,"pointer")};Kt.contextmenu=t=>h0(t);function P_(t,e){return t.composing?!0:zt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const tF=zr?5e3:-1;Gt.compositionstart=Gt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof re&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||wt&&c_&&nF(t)))t.markCursor=t.state.storedMarks||n.marks(),ih(t,!0),t.markCursor=null;else if(ih(t,!e.selection.empty),jn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}M_(t,tF)};function nF(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Gt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,M_(t,20))};function M_(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ih(t),e))}function I_(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=sF());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function rF(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Jz(e.focusNode,e.focusOffset),r=Qz(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function sF(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ih(t,e=!1){if(!(zr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),I_(t),e||t.docView&&t.docView.dirty){let n=a0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function iF(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Mc=an&&Qs<15||Ua&&eB<604;Kt.copy=Gt.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=Mc?null:n.clipboardData,o=r.content(),{dom:a,text:l}=c0(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):iF(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function oF(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function aF(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ic(t,r.value,null,s,e):Ic(t,r.textContent,r.innerHTML,s,e)},50)}function Ic(t,e,n,r,s){let i=C_(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||U.empty)))return!0;if(!i)return!1;let o=oF(i),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function j_(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Gt.paste=(t,e)=>{let n=e;if(t.composing&&!zr)return;let r=Mc?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ic(t,j_(r),r.getData("text/html"),s,n)?n.preventDefault():aF(t,n)};class D_{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const lF=Nn?"altKey":"ctrlKey";function L_(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[lF]}Kt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(Ef(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof X?s.to-1:s.to))){if(r&&r.mightDrag)o=X.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=X.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=c0(t,a);(!n.dataTransfer.files.length||!wt||l_>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Mc?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Mc||n.dataTransfer.setData("text/plain",c),t.dragging=new D_(u,L_(t,n),o)};Kt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Gt.dragover=Gt.dragenter=(t,e)=>e.preventDefault();Gt.drop=(t,e)=>{try{cF(t,e,t.dragging)}finally{t.dragging=null}};function cF(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Ef(e));if(!r)return;let s=t.state.doc.resolve(r.pos),i=n&&n.slice;i?t.someProp("transformPasted",h=>{i=h(i,t,!1)}):i=C_(t,j_(e.dataTransfer),Mc?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&L_(t,e));if(t.someProp("handleDrop",h=>h(t,e,i||U.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?FT(t.state.doc,s.pos,i):s.pos;a==null&&(a=s.pos);let l=t.state.tr;if(o){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,d=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(d))return;let f=l.doc.resolve(c);if(u&&X.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new X(f));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,y,v)=>h=v),l.setSelection(l0(t,f,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Kt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ur(t)},20))};Kt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Kt.beforeinput=(t,e)=>{if(wt&&zr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,_i(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Gt)Kt[t]=Gt[t];function jc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class oh{constructor(e,n){this.toDOM=e,this.spec=n||Qi,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new Wt(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof oh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&jc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Xs{constructor(e,n){this.attrs=e,this.spec=n||Qi}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new Wt(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Xs&&jc(this.attrs,e.attrs)&&jc(this.spec,e.spec)}static is(e){return e.type instanceof Xs}destroy(){}}class f0{constructor(e,n){this.attrs=e,this.spec=n||Qi}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new Wt(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof f0&&jc(this.attrs,e.attrs)&&jc(this.spec,e.spec)}destroy(){}}class Wt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Wt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Wt(e,e,new oh(n,r))}static inline(e,n,r,s){return new Wt(e,n,new Xs(r,s))}static node(e,n,r,s){return new Wt(e,n,new f0(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xs}get widget(){return this.type instanceof oh}}const Uo=[],Qi={};class Be{constructor(e,n){this.local=e.length?e:Uo,this.children=n.length?n:Uo}static create(e,n){return n.length?ah(n,e,0,Qi):jt}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,s+a,i)}}map(e,n,r){return this==jt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Qi)}mapInner(e,n,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(n,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?uF(this.children,o||[],e,n,r,s,i):o?new Be(o.sort(Yi),Uo):jt}add(e,n){return n.length?this==jt?Be.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=z_(n,a,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,u,c+1):s.splice(i,0,l,l+a.nodeSize,ah(u,a,c+1,Qi)),i+=3}});let o=$_(i?B_(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Be(o.length?this.local.concat(o).sort(Yi):this.local,s||this.children)}remove(e){return e.length==0||this==jt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,a+1);c!=jt?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Be(s,r):jt}forChild(e,n){if(this==jt)return this;if(n.isLeaf)return Be.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof Xs){let c=Math.max(i,l.from)-i,u=Math.min(o,l.to)-i;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new Be(s.sort(Yi),Uo);return r?new Ss([a,r]):a}return r||jt}eq(e){if(this==e)return!0;if(!(e instanceof Be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return p0(this.localsInner(e))}localsInner(e){if(this==jt)return Uo;if(e.inlineContent||!this.local.some(Xs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Xs||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Be.empty=new Be([],[]);Be.removeOverlap=p0;const jt=Be.empty;class Ss{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,Qi));return Ss.from(r)}forChild(e,n){if(n.isLeaf)return Be.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=jt&&(i instanceof Ss?r=r.concat(i.members):r.push(i))}return Ss.from(r)}eq(e){if(!(e instanceof Ss)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?p0(r?n:n.sort(Yi)):Uo}static from(e){switch(e.length){case 0:return jt;case 1:return e[0];default:return new Ss(e.every(n=>n instanceof Be)?e:e.reduce((n,r)=>n.concat(r instanceof Be?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function uF(t,e,n,r,s,i,o){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,m)=>{let y=m-p-(h-f);for(let v=0;v<a.length;v+=3){let w=a[v+1];if(w<0||f>w+u-d)continue;let b=a[v]+u-d;h>=b?a[v+1]=f<=b?-2:-1:f>=u&&y&&(a[v]+=y,a[v+1]+=y)}d+=y}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-s;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+i,-1),h=f-s,{index:p,offset:m}=r.content.findIndex(d),y=r.maybeChild(p);if(y&&m==d&&m+y.nodeSize==h){let v=a[c+2].mapInner(n,y,u+1,t[c]+i+1,o);v!=jt?(a[c]=d,a[c+1]=h,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=dF(a,t,e,n,s,i,o),u=ah(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Be(e.sort(Yi),a)}function $_(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Wt(s.from+e,s.to+e,s.type))}return n}function dF(t,e,n,r,s,i,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,s,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function z_(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function B_(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function ah(t,e,n,r){let s=[],i=!1;e.forEach((a,l)=>{let c=z_(t,a,l+n);if(c){i=!0;let u=ah(c,a,n+l+1,r);u!=jt&&s.push(l,l+a.nodeSize,u)}});let o=$_(i?B_(t):t,-n).sort(Yi);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Be(o,s):jt}function Yi(t,e){return t.from-e.from||t.to-e.to}function p0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),n1(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),n1(e,s,r.copy(i.from,r.to)));break}}}return e}function n1(t,e,n){for(;e<t.length&&Yi(n,t[e])>0;)e++;t.splice(e,0,n)}function Bp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=jt&&e.push(r)}),t.cursorWrapper&&e.push(Be.create(t.state.doc,[t.cursorWrapper.deco])),Ss.from(e)}const hF={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},fF=an&&Qs<=11;class pF{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class mF{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pF,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);an&&Qs<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),fF&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hF)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Gx(this.view)){if(this.suppressingSelectionUpdates)return Ur(this.view);if(an&&Qs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&co(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Fa(i))n.add(i);for(let i=e.anchorNode;i;i=Fa(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Gx(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(jn&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||vF(e,d)!=h)&&f.remove()}}}else if((wt||zt)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Sf(r)&&(c=a0(e))&&c.eq(de.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ur(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),gF(e)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ur(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(an&&Qs<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?Nt(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?Nt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let r1=new WeakMap,s1=!1;function gF(t){if(!r1.has(t)&&(r1.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=jn,s1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),s1=!0}}function i1(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return co(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function yF(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return i1(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?i1(t,n):null}function vF(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function wF(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Sf(l)||c.push({node:l.focusNode,offset:l.focusOffset})),wt&&t.input.lastKeyCode===8)for(let y=i;y>s;y--){let v=r.childNodes[y-1],w=v.pmViewDesc;if(v.nodeName=="BR"&&!w){i=y;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||Js.fromSchema(t.state.schema),h=d.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:bF,context:h});if(c&&c[0].pos!=null){let y=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=y),p={anchor:y+o,head:v+o}}return{doc:m,sel:p,from:o,to:a}}function bF(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(zt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||zt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const xF=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function SF(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=a0(t,E);if(_&&!t.state.selection.eq(_)){if(wt&&zr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",N=>N(t,_i(13,"Enter"))))return;let A=t.state.tr.setSelection(_);E=="pointer"?A.setMeta("pointer",!0):E=="key"&&A.scrollIntoView(),i&&A.setMeta("composition",i),t.dispatch(A)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=wF(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=CF(d.content,c.doc.content,c.from,f,h);if(p&&t.input.domChangeCount++,(Ua&&t.input.lastIOSEnter>Date.now()-225||zr)&&s.some(E=>E.nodeType==1&&!xF.test(E.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",E=>E(t,_i(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof re&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=o1(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let _=t.state.tr.setSelection(E);i&&_.setMeta("composition",i),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof re&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),an&&Qs<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),y=c.doc.resolveNoCache(p.endB-c.from),v=u.resolve(p.start),w=m.sameParent(y)&&m.parent.inlineContent&&v.end()>=p.endA;if((Ua&&t.input.lastIOSEnter>Date.now()-225&&(!w||s.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!w&&m.pos<c.doc.content.size&&(!m.sameParent(y)||!m.parent.inlineContent)&&m.pos<y.pos&&!/\S/.test(c.doc.textBetween(m.pos,y.pos,"","")))&&t.someProp("handleKeyDown",E=>E(t,_i(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&EF(u,p.start,p.endA,m,y)&&t.someProp("handleKeyDown",E=>E(t,_i(8,"Backspace")))){zr&&wt&&t.domObserver.suppressSelectionUpdates();return}wt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),zr&&!w&&m.start()!=y.start()&&y.parentOffset==0&&m.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,y=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,_i(13,"Enter"))})},20));let b=p.start,S=p.endA,k=E=>{let _=E||t.state.tr.replace(b,S,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let A=o1(t,_.doc,c.sel);A&&!(wt&&t.composing&&A.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==b||A.head==_.mapping.map(S)-1)||an&&A.empty&&A.head==b)&&_.setSelection(A)}return i&&_.setMeta("composition",i),_.scrollIntoView()},C;if(w)if(m.pos==y.pos){an&&Qs<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ur(t),20));let E=k(t.state.tr.delete(b,S)),_=u.resolve(p.start).marksAcross(u.resolve(p.endA));_&&E.ensureMarks(_),t.dispatch(E)}else if(p.endA==p.endB&&(C=kF(m.parent.content.cut(m.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start())))){let E=k(t.state.tr);C.type=="add"?E.addMark(b,S,C.mark):E.removeMark(b,S,C.mark),t.dispatch(E)}else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){let E=m.parent.textBetween(m.parentOffset,y.parentOffset),_=()=>k(t.state.tr.insertText(E,b,S));t.someProp("handleTextInput",A=>A(t,b,S,E,_))||t.dispatch(_())}else t.dispatch(k());else t.dispatch(k())}function o1(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:l0(t,e.resolve(n.anchor),e.resolve(n.head))}function kF(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(M.from(c).eq(t))return{mark:a,type:o}}function EF(t,e,n,r,s){if(n-e<=s.pos-r.pos||Fp(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(Fp(i,!0,!0));return!o.parent.isTextblock||o.pos>n||Fp(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Fp(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function CF(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&t.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&a1(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&a1(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function a1(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class F_{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new UB,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(h1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=u1(this),c1(this),this.nodeViews=d1(this),this.docView=Ux(this.state.doc,l1(this),Bp(this),this.dom,this),this.domObserver=new mF(this,(r,s,i,o)=>SF(this,r,s,i,o)),this.domObserver.start(),HB(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ty(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(h1),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(I_(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=d1(this);_F(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&ty(this),this.editable=u1(this),c1(this);let l=Bp(this),c=l1(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&rB(this);if(o){this.domObserver.stop();let h=d&&(an||wt)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&TF(s.selection,e.selection);if(d){let p=wt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=rF(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Ux(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_B(this))?Ur(this,h):(S_(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&sB(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof X){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Dx(this,n.getBoundingClientRect(),e)}else Dx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new D_(e.slice,e.move,s<0?void 0:X.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=n?n(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(an){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&iB(this.dom),Ur(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return uB(this,e)}coordsAtPos(e,n=1){return p_(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return mB(this,n||this.state,e)}pasteHTML(e,n){return Ic(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ic(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return c0(this,e)}destroy(){this.docView&&(VB(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Bp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Kz())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return qB(this,e)}domSelectionRange(){let e=this.domSelection();return e?zt&&this.root.nodeType===11&&Xz(this.dom.ownerDocument)==this.dom&&yF(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}F_.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function l1(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Wt.node(0,t.state.doc.content.size,e)]}function c1(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Wt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function u1(t){return!t.someProp("editable",e=>e(t.state)===!1)}function TF(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function d1(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function _F(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function h1(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ri={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},lh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},NF=typeof navigator<"u"&&/Mac/.test(navigator.platform),OF=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ot=0;Ot<10;Ot++)ri[48+Ot]=ri[96+Ot]=String(Ot);for(var Ot=1;Ot<=24;Ot++)ri[Ot+111]="F"+Ot;for(var Ot=65;Ot<=90;Ot++)ri[Ot]=String.fromCharCode(Ot+32),lh[Ot]=String.fromCharCode(Ot);for(var Up in ri)lh.hasOwnProperty(Up)||(lh[Up]=ri[Up]);function AF(t){var e=NF&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||OF&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?lh:ri)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const RF=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),PF=typeof navigator<"u"&&/Win/.test(navigator.platform);function MF(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))RF?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function IF(t){let e=Object.create(null);for(let n in t)e[MF(n)]=t[n];return e}function Hp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function jF(t){return new Ve({props:{handleKeyDown:U_(t)}})}function U_(t){let e=IF(t);return function(n,r){let s=AF(r),i,o=e[Hp(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[Hp(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(PF&&r.ctrlKey&&r.altKey)&&(i=ri[r.keyCode])&&i!=s){let a=e[Hp(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var DF=Object.defineProperty,m0=(t,e)=>{for(var n in e)DF(t,n,{get:e[n],enumerable:!0})};function Cf(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var Tf=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const u=a(...c)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],a=!!t,l=t||s.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...p)=>{const m=this.buildProps(l,e),y=f(...p)(m);return o.push(y),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:Cf({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},H_={};m0(H_,{blur:()=>LF,clearContent:()=>$F,clearNodes:()=>zF,command:()=>BF,createParagraphNear:()=>FF,cut:()=>UF,deleteCurrentNode:()=>HF,deleteNode:()=>VF,deleteRange:()=>WF,deleteSelection:()=>qF,enter:()=>KF,exitCode:()=>GF,extendMarkRange:()=>JF,first:()=>QF,focus:()=>XF,forEach:()=>ZF,insertContent:()=>eU,insertContentAt:()=>rU,joinBackward:()=>oU,joinDown:()=>iU,joinForward:()=>aU,joinItemBackward:()=>lU,joinItemForward:()=>cU,joinTextblockBackward:()=>uU,joinTextblockForward:()=>dU,joinUp:()=>sU,keyboardShortcut:()=>fU,lift:()=>pU,liftEmptyBlock:()=>mU,liftListItem:()=>gU,newlineInCode:()=>yU,resetAttributes:()=>vU,scrollIntoView:()=>wU,selectAll:()=>bU,selectNodeBackward:()=>xU,selectNodeForward:()=>SU,selectParentNode:()=>kU,selectTextblockEnd:()=>EU,selectTextblockStart:()=>CU,setContent:()=>TU,setMark:()=>qU,setMeta:()=>KU,setNode:()=>GU,setNodeSelection:()=>JU,setTextDirection:()=>QU,setTextSelection:()=>YU,sinkListItem:()=>XU,splitBlock:()=>ZU,splitListItem:()=>e5,toggleList:()=>t5,toggleMark:()=>n5,toggleNode:()=>r5,toggleWrap:()=>s5,undoInputRule:()=>i5,unsetAllMarks:()=>o5,unsetMark:()=>a5,unsetTextDirection:()=>l5,updateAttributes:()=>c5,wrapIn:()=>u5,wrapInList:()=>d5});var LF=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),$F=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),zF=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=nl(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},BF=t=>e=>t(e),FF=()=>({state:t,dispatch:e})=>r_(t,e),UF=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new re(r.doc.resolve(Math.max(o-1,0)))),!0},HF=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function ct(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var VF=t=>({tr:e,state:n,dispatch:r})=>{const s=ct(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),c=i.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},WF=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},qF=()=>({state:t,dispatch:e})=>t0(t,e),KF=()=>({commands:t})=>t.keyboardShortcut("Enter"),GF=()=>({state:t,dispatch:e})=>Pz(t,e);function g0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ch(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:g0(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function V_(t,e,n={}){return t.find(r=>r.type===e&&ch(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function f1(t,e,n={}){return!!V_(t,e,n)}function y0(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!V_([...s.node.marks],e,n)))return;let o=s.index,a=t.start()+s.offset,l=o+1,c=a+s.node.nodeSize;for(;o>0&&f1([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&f1([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Zr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var JF=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=Zr(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const d=y0(l,i,e);if(d&&d.from<=c&&d.to>=u){const f=re.create(o,d.from,d.to);n.setSelection(f)}}return!0},QF=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function W_(t){return t instanceof re}function ji(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function q_(t,e=null){if(!e)return null;const n=de.atStart(t),r=de.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?re.create(t,ji(0,s,i),ji(t.content.size,s,i)):re.create(t,ji(e,s,i),ji(e,s,i))}function p1(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function uh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function YF(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var XF=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(uh()||p1())&&r.dom.focus(),YF()&&!uh()&&!p1()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!W_(n.state.selection))return o(),!0;const a=q_(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},ZF=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),eU=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),K_=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&K_(r)}return t};function Lu(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return K_(n)}function Dc(t,e,n){if(t instanceof Gs||t instanceof M)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return M.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Dc("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,a="";const l=new AT({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Js.fromSchema(l).parseSlice(Lu(t),n.parseOptions):Js.fromSchema(l).parse(Lu(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Js.fromSchema(e);return n.slice?i.parseSlice(Lu(t),n.parseOptions).content:i.parse(Lu(t),n.parseOptions)}return Dc("",e,n)}function tU(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof gt||s instanceof xt))return;const i=t.mapping.maps[r];let o=0;i.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(de.near(t.doc.resolve(o),n))}var nU=t=>!("type"in t),rU=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{i.emit("contentError",{editor:i,error:y,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Dc(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=Dc(e,i.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(y){return l(y),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,h=!0;if((nU(a)?a:[a]).forEach(y=>{y.check(),f=f?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),u===d&&h){const{parent:y}=r.doc.resolve(u);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(u-=1,d+=1)}let m;if(f){if(Array.isArray(e))m=e.map(y=>y.text||"").join("");else if(e instanceof M){let y="";e.forEach(v=>{v.text&&(y+=v.text)}),m=y}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,u,d)}else{m=a;const y=r.doc.resolve(u),v=y.node(),w=y.parentOffset===0,b=v.isText||v.isTextblock,S=v.content.size>0;w&&b&&S&&(u=Math.max(0,u-1)),r.replaceWith(u,d,m)}n.updateSelection&&tU(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:m})}return!0},sU=()=>({state:t,dispatch:e})=>Oz(t,e),iU=()=>({state:t,dispatch:e})=>Az(t,e),oU=()=>({state:t,dispatch:e})=>QT(t,e),aU=()=>({state:t,dispatch:e})=>e_(t,e),lU=()=>({state:t,dispatch:e,tr:n})=>{try{const r=wf(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},cU=()=>({state:t,dispatch:e,tr:n})=>{try{const r=wf(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},uU=()=>({state:t,dispatch:e})=>_z(t,e),dU=()=>({state:t,dispatch:e})=>Nz(t,e);function G_(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function hU(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))uh()||G_()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var fU=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=hU(t).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function si(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?ct(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(s,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=s-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>ch(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}var pU=(t,e={})=>({state:n,dispatch:r})=>{const s=ct(t,n.schema);return si(n,s,e)?Rz(n,r):!1},mU=()=>({state:t,dispatch:e})=>s_(t,e),gU=t=>({state:e,dispatch:n})=>{const r=ct(t,e.schema);return Hz(r)(e,n)},yU=()=>({state:t,dispatch:e})=>n_(t,e);function _f(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function m1(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var vU=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=_f(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=ct(t,r.schema)),a==="mark"&&(o=Zr(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{i&&i===u.type&&(l=!0,s&&n.setNodeMarkup(d,void 0,m1(u.attrs,e))),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&(l=!0,s&&n.addMark(d,d+u.nodeSize,o.create(m1(f.attrs,e))))})})}),l},wU=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),bU=()=>({tr:t,dispatch:e})=>{if(e){const n=new vn(t.doc);t.setSelection(n)}return!0},xU=()=>({state:t,dispatch:e})=>XT(t,e),SU=()=>({state:t,dispatch:e})=>t_(t,e),kU=()=>({state:t,dispatch:e})=>jz(t,e),EU=()=>({state:t,dispatch:e})=>$z(t,e),CU=()=>({state:t,dispatch:e})=>Lz(t,e);function ny(t,e,n={},r={}){return Dc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var TU=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if(r.preserveWhitespace!=="full"){const c=ny(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function J_(t,e){const n=Zr(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Q_(t,e){const n=new qT(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function _U(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function NU(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function OU(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Nf(t){return e=>OU(e.$from,t)}function Y(t,e,n){return t.config[e]===void 0&&t.parent?Y(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Y(t.parent,e,n):null}):t.config[e]}function v0(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Y(e,"addExtensions",n);return r?[e,...v0(r())]:e}).flat(10)}function w0(t,e){const n=wo.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function Y_(t){return typeof t=="function"}function ke(t,e=void 0,...n){return Y_(t)?e?t.bind(e)(...n):t(...n):t}function AU(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ha(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function X_(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ha(t),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=Y(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...i,...h}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Y(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...i,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function nt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=i}),r},{})}function dh(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>nt(n,r),{})}function RU(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function g1(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):RU(n.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function y1(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&AU(n)?!1:n!=null))}function v1(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function PU(t,e){var n;const r=X_(t),{nodeExtensions:s,markExtensions:i}=Ha(t),o=(n=s.find(c=>Y(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,w)=>{const b=Y(w,"extendNodeSchema",d);return{...v,...b?b(c):{}}},{}),h=y1({...f,content:ke(Y(c,"content",d)),marks:ke(Y(c,"marks",d)),group:ke(Y(c,"group",d)),inline:ke(Y(c,"inline",d)),atom:ke(Y(c,"atom",d)),selectable:ke(Y(c,"selectable",d)),draggable:ke(Y(c,"draggable",d)),code:ke(Y(c,"code",d)),whitespace:ke(Y(c,"whitespace",d)),linebreakReplacement:ke(Y(c,"linebreakReplacement",d)),defining:ke(Y(c,"defining",d)),isolating:ke(Y(c,"isolating",d)),attrs:Object.fromEntries(u.map(v1))}),p=ke(Y(c,"parseHTML",d));p&&(h.parseDOM=p.map(v=>g1(v,u)));const m=Y(c,"renderHTML",d);m&&(h.toDOM=v=>m({node:v,HTMLAttributes:dh(v,u)}));const y=Y(c,"renderText",d);return y&&(h.toText=y),[c.name,h]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,v)=>{const w=Y(v,"extendMarkSchema",d);return{...y,...w?w(c):{}}},{}),h=y1({...f,inclusive:ke(Y(c,"inclusive",d)),excludes:ke(Y(c,"excludes",d)),group:ke(Y(c,"group",d)),spanning:ke(Y(c,"spanning",d)),code:ke(Y(c,"code",d)),attrs:Object.fromEntries(u.map(v1))}),p=ke(Y(c,"parseHTML",d));p&&(h.parseDOM=p.map(y=>g1(y,u)));const m=Y(c,"renderHTML",d);return m&&(h.toDOM=y=>m({mark:y,HTMLAttributes:dh(y,u)})),[c.name,h]}));return new AT({topNode:o,nodes:a,marks:l})}function MU(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function hh(t){return t.sort((n,r)=>{const s=Y(n,"priority")||100,i=Y(r,"priority")||100;return s>i?-1:s<i?1:0})}function Z_(t){const e=hh(v0(t)),n=MU(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function eN(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,s,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=i);const h=o==null?void 0:o[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(r,c)-c,s-c))}),a}function IU(t,e){const n={from:0,to:t.content.size};return eN(t,n,e)}function tN(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function jU(t,e){const n=ct(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function nN(t,e){const n=_f(typeof e=="string"?e:e.name,t.schema);return n==="node"?jU(t,e):n==="mark"?J_(t,e):{}}function DU(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function LU(t){const e=DU(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function rN(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),LU(r)}function b0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=y0(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}var $U=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let i=r,o=null;for(;i>0&&o===null;){const a=s.node(i);(a==null?void 0:a.type.name)===e?o=a:i-=1}return[o,i]};function $u(t,e){return e.nodes[t]||e.marks[t]||null}function hd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var zU=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)==null?void 0:c.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-i))}),n};function ry(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?Zr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>ch(d.attrs,n,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,y)=>{if(!m.isText&&!m.marks.length)return;const v=Math.max(h,y),w=Math.min(p,y+m.nodeSize),b=w-v;o+=b,a.push(...m.marks.map(S=>({mark:S,from:v,to:w})))})}),o===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>ch(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function BU(t,e,n={}){if(!e)return si(t,null,n)||ry(t,null,n);const r=_f(e,t.schema);return r==="node"?si(t,e,n):r==="mark"?ry(t,e,n):!1}var FU=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const i=Nf(a=>a.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},UU=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function w1(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function b1(t,e){const{nodeExtensions:n}=Ha(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=ke(Y(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Of(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Of(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function sN(t){return t instanceof X}var iN=class oN{constructor(e){this.position=e}static fromJSON(e){return new oN(e.position)}toJSON(){return{position:this.position}}};function HU(t,e){const n=e.mapping.mapResult(t.position);return{position:new iN(n.pos),mapResult:n}}function VU(t){return new iN(t)}function WU(t,e,n){var r;const{selection:s}=e;let i=null;if(W_(s)&&(i=s.$cursor),i){const a=(r=t.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}var qU=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:a}=i,l=Zr(t,r.schema);if(s)if(o){const c=J_(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(p,m,l.create({...v.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return WU(r,n,l)},KU=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),GU=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=ct(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>Mx(i,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Mx(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},JU=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=ji(t,0,r.content.size),i=X.create(r,s);e.setSelection(i)}return!0},QU=(t,e)=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=i.from,a=i.to),s&&n.doc.nodesBetween(o,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},YU=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=re.atStart(r).from,a=re.atEnd(r).to,l=ji(s,o,a),c=ji(i,o,a),u=re.create(r,l,c);e.setSelection(u)}return!0},XU=t=>({state:e,dispatch:n})=>{const r=ct(t,e.schema);return qz(r)(e,n)};function x1(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var ZU=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,c=s.extensionManager.attributes,u=hd(c,a.node().type.name,a.node().attrs);if(i instanceof X&&i.node.isBlock)return!a.parentOffset||!Fr(o,a.pos)?!1:(r&&(t&&x1(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:_U(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=Fr(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Fr(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),r){if(p&&(i instanceof re&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),y=e.doc.resolve(m);a.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&x1(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return p},e5=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const a=ct(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let v=M.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-w;_>=l.depth-3;_-=1)v=M.from(l.node(_).copy(v));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...hd(f,l.node().type.name,l.node().attrs),...e},k=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;v=v.append(M.from(a.createAndFill(null,k)||void 0));const C=l.before(l.depth-(w-1));n.replace(C,l.after(-b),new U(v,4-w,0));let E=-1;n.doc.nodesBetween(C,n.doc.content.size,(_,A)=>{if(E>-1)return!1;_.isTextblock&&_.content.size===0&&(E=A+1)}),E>-1&&n.setSelection(re.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...hd(f,d.type.name,d.attrs),...e},m={...hd(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const y=h?[{type:a,attrs:p},{type:h,attrs:m}]:[{type:a,attrs:p}];if(!Fr(n.doc,l.pos,2))return!1;if(s){const{selection:v,storedMarks:w}=r,{splittableMarks:b}=i.extensionManager,S=w||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!S||!s)return!0;const k=S.filter(C=>b.includes(C.type.name));n.ensureMarks(k)}return!0},Vp=(t,e)=>{const n=Nf(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&ci(t.doc,n.pos)&&t.join(n.pos),!0},Wp=(t,e)=>{const n=Nf(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&ci(t.doc,r)&&t.join(r),!0},t5=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,h=ct(t,o.schema),p=ct(e,o.schema),{selection:m,storedMarks:y}=o,{$from:v,$to:w}=m,b=v.blockRange(w),S=y||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const k=Nf(C=>b1(C.type.name,d))(m);if(b.depth>=1&&k&&b.depth-k.depth<=1){if(k.node.type===h)return c.liftListItem(p);if(b1(k.node.type.name,d)&&h.validContent(k.node.content)&&a)return l().command(()=>(i.setNodeMarkup(k.pos,h),!0)).command(()=>Vp(i,h)).command(()=>Wp(i,h)).run()}return!n||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Vp(i,h)).command(()=>Wp(i,h)).run():l().command(()=>{const C=u().wrapInList(h,r),E=S.filter(_=>f.includes(_.type.name));return i.ensureMarks(E),C?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Vp(i,h)).command(()=>Wp(i,h)).run()},n5=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=Zr(t,r.schema);return ry(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},r5=(t,e,n={})=>({state:r,commands:s})=>{const i=ct(t,r.schema),o=ct(e,r.schema),a=si(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...n})},s5=(t,e={})=>({state:n,commands:r})=>{const s=ct(t,n.schema);return si(n,s,e)?r.lift(s):r.wrapIn(s,e)},i5=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},o5=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},a5=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Zr(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:f,to:h}=a;const p=(i=c.marks().find(y=>y.type===l))==null?void 0:i.attrs,m=y0(c,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},l5=t=>({tr:e,state:n,dispatch:r})=>{const{selection:s}=n;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),r&&e.doc.nodesBetween(i,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},c5=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=_f(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=ct(t,r.schema)),a==="mark"&&(o=Zr(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,h,p,m;n.selection.empty?r.doc.nodesBetween(u,d,(y,v)=>{i&&i===y.type&&(l=!0,p=Math.max(v,u),m=Math.min(v+y.nodeSize,d),f=v,h=y)}):r.doc.nodesBetween(u,d,(y,v)=>{v<u&&i&&i===y.type&&(l=!0,p=Math.max(v,u),m=Math.min(v+y.nodeSize,d),f=v,h=y),v>=u&&v<=d&&(i&&i===y.type&&(l=!0,s&&n.setNodeMarkup(v,void 0,{...y.attrs,...e})),o&&y.marks.length&&y.marks.forEach(w=>{if(o===w.type&&(l=!0,s)){const b=Math.max(v,u),S=Math.min(v+y.nodeSize,d);n.addMark(b,S,o.create({...w.attrs,...e}))}}))}),h&&(f!==void 0&&s&&n.setNodeMarkup(f,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(y=>{o===y.type&&s&&n.addMark(p,m,o.create({...y.attrs,...e}))}))}),l},u5=(t,e={})=>({state:n,dispatch:r})=>{const s=ct(t,n.schema);return zz(s,e)(n,r)},d5=(t,e={})=>({state:n,dispatch:r})=>{const s=ct(t,n.schema);return Bz(s,e)(n,r)},h5=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Af=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},f5=(t,e)=>{if(g0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function zu(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=zU(c)+i;return o.forEach(f=>{if(u)return;const h=f5(d,f.find);if(!h)return;const p=l.state.tr,m=Cf({state:l.state,transaction:p}),y={from:r-(h[0].length-i.length),to:s},{commands:v,chain:w,can:b}=new Tf({editor:n,state:m});f.handler({state:m,range:y,match:h,commands:v,chain:w,can:b})===null||!p.steps.length||(f.undoable&&p.setMeta(a,{transform:p,from:r,to:s,text:i}),l.dispatch(p),u=!0)}),u}function p5(t){const{editor:e,rules:n}=t,r=new Ve({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=w0(M.from(u),o.schema);const{from:d}=l,f=d+u.length;zu({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return zu({editor:e,from:i,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&zu({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?zu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function m5(t){return Object.prototype.toString.call(t).slice(8,-1)}function Bu(t){return m5(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function aN(t,e){const n={...t};return Bu(t)&&Bu(e)&&Object.keys(e).forEach(r=>{Bu(e[r])&&Bu(t[r])?n[r]=aN(t[r],e[r]):n[r]=e[r]}),n}var x0=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ke(Y(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ke(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>aN(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},bo=class lN extends x0{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new lN(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function g5(t){return typeof t=="number"}var y5=class{constructor(t){this.find=t.find,this.handler=t.handler}},v5=(t,e,n)=>{if(g0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function w5(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Tf({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(h,p)=>{var m,y,v,w,b;if((y=(m=h.type)==null?void 0:m.spec)!=null&&y.code||!(h.isText||h.isTextblock||h.isInline))return;const S=(b=(w=(v=h.content)==null?void 0:v.size)!=null?w:h.nodeSize)!=null?b:0,k=Math.max(r,p),C=Math.min(s,p+S);if(k>=C)return;const E=h.isText?h.text||"":h.textBetween(k-p,C-p,void 0,"");v5(E,i.find,o).forEach(A=>{if(A.index===void 0)return;const N=k+A.index+1,z=N+A[0].length,L={from:n.tr.mapping.map(N),to:n.tr.mapping.map(z)},q=i.handler({state:n,range:L,match:A,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(q)})}),d.every(h=>h!==null)}var Fu=null,b5=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function x5(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:h,pasteEvt:p})=>{const m=u.tr,y=Cf({state:u,transaction:m});if(!(!w5({editor:e,state:y,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(u=>new Ve({view(d){const f=p=>{var m;r=(m=d.dom.parentElement)!=null&&m.contains(p.target)?d.dom.parentElement:null,r&&(Fu=e)},h=()=>{Fu&&(Fu=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(i=r===d.dom.parentElement,a=f,!i){const h=Fu;h!=null&&h.isEditable&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)==null?void 0:h.getData("text/html");return o=f,s=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!s,y=p.getMeta("uiEvent")==="drop"&&!i,v=p.getMeta("applyPasteRules"),w=!!v;if(!m&&!y&&!w)return;if(w){let{text:k}=v;typeof k=="string"?k=k:k=w0(M.from(k),h.schema);const{from:C}=v,E=C+k.length,_=b5(k);return l({rule:u,state:h,from:C,to:{b:E},pasteEvt:_})}const b=f.doc.content.findDiffStart(h.doc.content),S=f.doc.content.findDiffEnd(h.doc.content);if(!(!g5(b)||!S||b===S.b))return l({rule:u,state:h,from:b,to:S,pasteEvt:o})}}))}var Rf=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Z_(t),this.schema=PU(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:$u(e.name,this.schema)},r=Y(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return hh([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:$u(r.name,this.schema)},i=[],o=Y(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&Y(r,"exitable",s)&&(a.ArrowRight=()=>bo.handleExit({editor:t,mark:r})),o){const f=Object.fromEntries(Object.entries(o()).map(([h,p])=>[h,()=>p({editor:t})]));a={...a,...f}}const l=jF(a);i.push(l);const c=Y(r,"addInputRules",s);if(w1(r,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const h=p5({editor:t,rules:f}),p=Array.isArray(h)?h:[h];i.push(...p)}}const u=Y(r,"addPasteRules",s);if(w1(r,t.options.enablePasteRules)&&u){const f=u();if(f&&f.length){const h=x5({editor:t,rules:f});i.push(...h)}}const d=Y(r,"addProseMirrorPlugins",s);if(d){const f=d();i.push(...f)}return i})}get attributes(){return X_(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ha(this.extensions);return Object.fromEntries(e.filter(n=>!!Y(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ct(n.name,this.schema)},i=Y(n,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const a=(l,c,u,d,f)=>{const h=dh(l,r);return o({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:h})};return[n.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return hh([...this.extensions].reverse()).reduceRight((r,s)=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:$u(s.name,this.schema)},o=Y(s,"dispatchTransaction",i);return o?a=>{o.call(i,{transaction:a,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ha(this.extensions);return Object.fromEntries(e.filter(n=>!!Y(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Zr(n.name,this.schema)},i=Y(n,"addMarkView",s);if(!i)return[];const o=(a,l,c)=>{const u=dh(a,r);return i()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:d=>{D5(a,t,d)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:$u(e.name,this.schema)};e.type==="mark"&&((n=ke(Y(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=Y(e,"onBeforeCreate",r),i=Y(e,"onCreate",r),o=Y(e,"onUpdate",r),a=Y(e,"onSelectionUpdate",r),l=Y(e,"onTransaction",r),c=Y(e,"onFocus",r),u=Y(e,"onBlur",r),d=Y(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}};Rf.resolve=Z_;Rf.sort=hh;Rf.flatten=v0;var S5={};m0(S5,{ClipboardTextSerializer:()=>uN,Commands:()=>dN,Delete:()=>hN,Drop:()=>fN,Editable:()=>pN,FocusEvents:()=>gN,Keymap:()=>yN,Paste:()=>vN,Tabindex:()=>wN,TextDirection:()=>bN,focusEventsPluginKey:()=>mN});var Ze=class cN extends x0{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new cN(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},uN=Ze.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ve({key:new ft("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=tN(n);return eN(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),dN=Ze.create({name:"commands",addCommands(){return{...H_}}}),hN=Ze.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const i=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=Q_(t.before,[t,...e]);rN(u).forEach(h=>{u.mapping.mapResult(h.oldRange.from).deletedAfter&&u.mapping.mapResult(h.oldRange.to).deletedBefore&&u.before.nodesBetween(h.oldRange.from,h.oldRange.to,(p,m)=>{const y=m+p.nodeSize-2,v=h.oldRange.from<=m&&y<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:m,to:y,newFrom:u.mapping.map(m),newTo:u.mapping.map(y),deletedRange:h.oldRange,newRange:h.newRange,partial:!v,editor:this.editor,transaction:t,combinedTransform:u})})});const f=u.mapping;u.steps.forEach((h,p)=>{var m,y;if(h instanceof er){const v=f.slice(p).map(h.from,-1),w=f.slice(p).map(h.to),b=f.invert().map(v,-1),S=f.invert().map(w),k=(m=u.doc.nodeAt(v-1))==null?void 0:m.marks.some(E=>E.eq(h.mark)),C=(y=u.doc.nodeAt(w))==null?void 0:y.marks.some(E=>E.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:b,to:S},newRange:{from:v,to:w},partial:!!(C||k),editor:this.editor,transaction:t,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),fN=Ze.create({name:"drop",addProseMirrorPlugins(){return[new Ve({key:new ft("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),pN=Ze.create({name:"editable",addProseMirrorPlugins(){return[new Ve({key:new ft("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mN=new ft("focusEvents"),gN=Ze.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ve({key:mN,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),yN=Ze.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,y=d.pos-d.parentOffset,v=m&&p.parent.childCount===1?y===d.pos:de.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return uh()||G_()?i:s},addProseMirrorPlugins(){return[new Ve({key:new ft("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),s=t.some(m=>m.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,l=de.atStart(e.doc).from,c=de.atEnd(e.doc).to;if(i||!(o===l&&a===c)||!Of(n.doc))return;const f=n.tr,h=Cf({state:n,transaction:f}),{commands:p}=new Tf({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),vN=Ze.create({name:"paste",addProseMirrorPlugins(){return[new Ve({key:new ft("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),wN=Ze.create({name:"tabindex",addProseMirrorPlugins(){return[new Ve({key:new ft("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),bN=Ze.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ha(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Ve({key:new ft("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),k5=class Ho{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Ho(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ho(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ho(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=this.pos+r+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const l=new Ho(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),e.push(new Ho(a,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(l=>n[l]===o.node.attrs[l])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},E5=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function C5(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var T5=class extends h5{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:HU,createMappablePosition:VU},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=q_(e,this.options.autofocus);this.editorState=sa.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=C5(E5,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=Y_(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[pN,uN.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),dN,gN,yN,wN,fN,vN,hN,bN.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Rf(r,this)}createCommandManager(){this.commandManager=new Tf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=ny(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=ny(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new F_(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return nN(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return BU(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return w0(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return IU(this.state.doc,{blockSeparator:e,textSerializers:{...tN(this.schema),...n}})}get isEmpty(){return Of(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new k5(e,this)}get $doc(){return this.$pos(0)}};function Va(t){return new Af({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ke(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(b0(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const f=n.from+l+o.length;i.addMark(n.from+l,f,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function xN(t){return new Af({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ke(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let a=n.to;const l=t.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;i.insert(c,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()},undoable:t.undoable})}function sy(t){return new Af({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=ke(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)},undoable:t.undoable})}function Wa(t){return new Af({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=ke(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&Zv(l,t.type,i);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(y=>h.includes(y.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&ci(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)},undoable:t.undoable})}var _5=t=>"touches"in t,N5=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,s,i,o;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t==null?void 0:t.options)!=null&&r.directions&&(this.directions=t.options.directions),(s=t.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(o=t.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),s=e.includes("left"),i=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),s&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,_5(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(r,s,n);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,s=this.startHeight;const i=t.includes("right"),o=t.includes("left"),a=t.includes("bottom"),l=t.includes("top");return i?r=this.startWidth+e:o&&(r=this.startWidth-e),a?s=this.startHeight+n:l&&(s=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(s=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,t):{width:r,height:s}}applyConstraints(t,e,n){var r,s,i,o;if(!n){let c=Math.max(this.minSize.width,t),u=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(s=this.maxSize)!=null&&s.height&&(u=Math.min(this.maxSize.height,u)),{width:c,height:u}}let a=t,l=e;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:s?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function O5(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof X){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var A5={};m0(A5,{createAtomBlockMarkdownSpec:()=>R5,createBlockMarkdownSpec:()=>P5,createInlineMarkdownSpec:()=>j5,parseAttributes:()=>S0,parseIndentedBlocks:()=>iy,renderNestedMarkdownContent:()=>E0,serializeAttributes:()=>k0});function S0(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(u=>u.trim().slice(1));e.class=c.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,u])=>{var d;const f=parseInt(((d=u.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),h=n[f];h&&(e[c]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function k0(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function R5(t){const{nodeName:e,name:n,parseAttributes:r=S0,serializeAttributes:s=k0,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,c=u=>{if(!a)return u;const d={};return a.forEach(f=>{f in u&&(d[f]=u[f])}),d};return{parseMarkdown:(u,d)=>{const f={...i,...u.attributes};return d.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(u){var d;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(d=u.match(f))==null?void 0:d.index;return h!==void 0?h:-1},tokenize(u,d,f){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=u.match(h);if(!p)return;const m=p[1]||"",y=r(m);if(!o.find(w=>!(w in y)))return{type:e,raw:p[0],attributes:y}}},renderMarkdown:u=>{const d=c(u.attrs||{}),f=s(d),h=f?` {${f}}`:"";return`:::${l}${h} :::`}}}function P5(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=S0,serializeAttributes:i=k0,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const f={};return l.forEach(h=>{h in d&&(f[h]=d[h])}),f};return{parseMarkdown:(d,f)=>{let h;if(r){const m=r(d);h=typeof m=="string"?[{type:"text",text:m}]:m}else a==="block"?h=f.parseChildren(d.tokens||[]):h=f.parseInline(d.tokens||[]);const p={...o,...d.attributes};return f.createNode(e,p,h)},markdownTokenizer:{name:e,level:"block",start(d){var f;const h=new RegExp(`^:::${c}`,"m"),p=(f=d.match(h))==null?void 0:f.index;return p!==void 0?p:-1},tokenize(d,f,h){var p;const m=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=d.match(m);if(!y)return;const[v,w=""]=y,b=s(w);let S=1;const k=v.length;let C="";const E=/^:::([\w-]*)(\s.*)?/gm,_=d.slice(k);for(E.lastIndex=0;;){const A=E.exec(_);if(A===null)break;const N=A.index,z=A[1];if(!((p=A[2])!=null&&p.endsWith(":::"))){if(z)S+=1;else if(S-=1,S===0){const L=_.slice(0,N);C=L.trim();const q=d.slice(0,k+N+A[0].length);let F=[];if(C)if(a==="block")for(F=h.blockTokens(L),F.forEach(Z=>{Z.text&&(!Z.tokens||Z.tokens.length===0)&&(Z.tokens=h.inlineTokens(Z.text))});F.length>0;){const Z=F[F.length-1];if(Z.type==="paragraph"&&(!Z.text||Z.text.trim()===""))F.pop();else break}else F=h.inlineTokens(C);return{type:e,raw:q,attributes:b,content:C,tokens:F}}}}}},renderMarkdown:(d,f)=>{const h=u(d.attrs||{}),p=i(h),m=p?` {${p}}`:"",y=f.renderChildren(d.content||[],`

`);return`:::${c}${m}

${y}

:::`}}}function M5(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,i,o]=r;e[s]=i||o,r=n.exec(t)}return e}function I5(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function j5(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=M5,serializeAttributes:i=I5,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,u=f=>{if(!l)return f;const h={};return l.forEach(p=>{const m=typeof p=="string"?p:p.name,y=typeof p=="string"?void 0:p.skipIfDefault;if(m in f){const v=f[m];if(y!==void 0&&v===y)return;h[m]=v}}),h},d=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,h)=>{const p={...o,...f.attributes};if(a)return h.createNode(e,p);const m=r?r(f):f.content||"";return m?h.createNode(e,p,[h.createTextNode(m)]):h.createNode(e,p,[])},markdownTokenizer:{name:e,level:"inline",start(f){const h=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),p=f.match(h),m=p==null?void 0:p.index;return m!==void 0?m:-1},tokenize(f,h,p){const m=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),y=f.match(m);if(!y)return;let v="",w="";if(a){const[,S]=y;w=S}else{const[,S,k]=y;w=S,v=k||""}const b=s(w.trim());return{type:e,raw:y[0],content:v.trim(),attributes:b}}},renderMarkdown:f=>{let h="";r?h=r(f):f.content&&f.content.length>0&&(h=f.content.filter(v=>v.type==="text").map(v=>v.text).join(""));const p=u(f.attrs||{}),m=i(p),y=m?` ${m}`:"";return a?`[${c}${y}]`:`[${c}${y}]${h}[/${c}]`}}}function iy(t,e,n){var r,s,i,o;const a=t.split(`
`),l=[];let c="",u=0;const d=e.baseIndentSize||2;for(;u<a.length;){const f=a[u],h=f.match(e.itemPattern);if(!h){if(l.length>0)break;if(f.trim()===""){u+=1,c=`${c}${f}
`;continue}else return}const p=e.extractItemData(h),{indentLevel:m,mainContent:y}=p;c=`${c}${f}
`;const v=[y];for(u+=1;u<a.length;){const k=a[u];if(k.trim()===""){const E=a.slice(u+1).findIndex(N=>N.trim()!=="");if(E===-1)break;if((((s=(r=a[u+1+E].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>m){v.push(k),c=`${c}${k}
`,u+=1;continue}else break}if((((o=(i=k.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>m)v.push(k),c=`${c}${k}
`,u+=1;else break}let w;const b=v.slice(1);if(b.length>0){const k=b.map(C=>C.slice(m+d)).join(`
`);k.trim()&&(e.customNestedParser?w=e.customNestedParser(k):w=n.blockTokens(k))}const S=e.createToken(p,w);l.push(S)}if(l.length!==0)return{items:l,raw:c}}function E0(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[i,...o]=t.content,a=e.renderChildren([i]),l=[`${s}${a}`];return o&&o.length>0&&o.forEach(c=>{const u=e.renderChildren([c]);if(u){const d=u.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(d)}}),l.join(`
`)}function D5(t,e,n={}){const{state:r}=e,{doc:s,tr:i}=r,o=t;s.descendants((a,l)=>{const c=i.mapping.map(l),u=i.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(h=>{if(h!==o)return!1;d=h}),!d)return;let f=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(f=!0)}),f){const h=t.type.create({...t.attrs,...n});i.removeMark(c,u,t.type),i.addMark(c,u,h)}}),i.docChanged&&e.view.dispatch(i)}var ln=class SN extends x0{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new SN(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function ho(t){return new y5({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=ke(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(b0(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:L5,getOwnPropertySymbols:$5}=Object,{hasOwnProperty:z5}=Object.prototype;function qp(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Uu(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);const{cache:i}=s,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);const l=t(n,r,s);return i.delete(n),i.delete(r),l}}function B5(t){return t!=null?t[Symbol.toStringTag]:void 0}function S1(t){return L5(t).concat($5(t))}const F5=Object.hasOwn||((t,e)=>z5.call(t,e));function xo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const U5="__v",H5="__o",V5="_owner",{getOwnPropertyDescriptor:k1,keys:E1}=Object;function W5(t,e){return t.byteLength===e.byteLength&&fh(new Uint8Array(t),new Uint8Array(e))}function q5(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function K5(t,e){return t.byteLength===e.byteLength&&fh(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function G5(t,e){return xo(t.getTime(),e.getTime())}function J5(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Q5(t,e){return t===e}function C1(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.entries();let o,a,l=0;for(;(o=i.next())&&!o.done;){const c=e.entries();let u=!1,d=0;for(;(a=c.next())&&!a.done;){if(s[d]){d++;continue}const f=o.value,h=a.value;if(n.equals(f[0],h[0],l,d,t,e,n)&&n.equals(f[1],h[1],f[0],h[0],t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}const Y5=xo;function X5(t,e,n){const r=E1(t);let s=r.length;if(E1(e).length!==s)return!1;for(;s-- >0;)if(!kN(t,e,n,r[s]))return!1;return!0}function yl(t,e,n){const r=S1(t);let s=r.length;if(S1(e).length!==s)return!1;let i,o,a;for(;s-- >0;)if(i=r[s],!kN(t,e,n,i)||(o=k1(t,i),a=k1(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Z5(t,e){return xo(t.valueOf(),e.valueOf())}function eH(t,e){return t.source===e.source&&t.flags===e.flags}function T1(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.values();let o,a;for(;(o=i.next())&&!o.done;){const l=e.values();let c=!1,u=0;for(;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function fh(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function tH(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function kN(t,e,n,r){return(r===V5||r===H5||r===U5)&&(t.$$typeof||e.$$typeof)?!0:F5(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const nH="[object ArrayBuffer]",rH="[object Arguments]",sH="[object Boolean]",iH="[object DataView]",oH="[object Date]",aH="[object Error]",lH="[object Map]",cH="[object Number]",uH="[object Object]",dH="[object RegExp]",hH="[object Set]",fH="[object String]",pH={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},mH="[object URL]",gH=Object.prototype.toString;function yH({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:h,unknownTagComparators:p}){return function(y,v,w){if(y===v)return!0;if(y==null||v==null)return!1;const b=typeof y;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?a(y,v,w):b==="function"?i(y,v,w):!1;const S=y.constructor;if(S!==v.constructor)return!1;if(S===Object)return l(y,v,w);if(Array.isArray(y))return e(y,v,w);if(S===Date)return r(y,v,w);if(S===RegExp)return u(y,v,w);if(S===Map)return o(y,v,w);if(S===Set)return d(y,v,w);const k=gH.call(y);if(k===oH)return r(y,v,w);if(k===dH)return u(y,v,w);if(k===lH)return o(y,v,w);if(k===hH)return d(y,v,w);if(k===uH)return typeof y.then!="function"&&typeof v.then!="function"&&l(y,v,w);if(k===mH)return h(y,v,w);if(k===aH)return s(y,v,w);if(k===rH)return l(y,v,w);if(pH[k])return f(y,v,w);if(k===nH)return t(y,v,w);if(k===iH)return n(y,v,w);if(k===sH||k===cH||k===fH)return c(y,v,w);if(p){let C=p[k];if(!C){const E=B5(y);E&&(C=p[E])}if(C)return C(y,v,w)}return!1}}function vH({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:W5,areArraysEqual:n?yl:q5,areDataViewsEqual:K5,areDatesEqual:G5,areErrorsEqual:J5,areFunctionsEqual:Q5,areMapsEqual:n?qp(C1,yl):C1,areNumbersEqual:Y5,areObjectsEqual:n?yl:X5,arePrimitiveWrappersEqual:Z5,areRegExpsEqual:eH,areSetsEqual:n?qp(T1,yl):T1,areTypedArraysEqual:n?qp(fh,yl):fh,areUrlsEqual:tH,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const s=Uu(r.areArraysEqual),i=Uu(r.areMapsEqual),o=Uu(r.areObjectsEqual),a=Uu(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:a})}return r}function wH(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function bH({circular:t,comparator:e,createState:n,equals:r,strict:s}){if(n)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:u}=n();return e(a,l,{cache:c,equals:r,meta:u,strict:s})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(a,l){return e(a,l,i)}}const xH=di();di({strict:!0});di({circular:!0});di({circular:!0,strict:!0});di({createInternalComparator:()=>xo});di({strict:!0,createInternalComparator:()=>xo});di({circular:!0,createInternalComparator:()=>xo});di({circular:!0,createInternalComparator:()=>xo,strict:!0});function di(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:s=!1}=t,i=vH(t),o=yH(i),a=n?n(o):wH(o);return bH({circular:e,comparator:o,createState:r,equals:a,strict:s})}var EN={exports:{}},CN={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=x,SH=Qv;function kH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var EH=typeof Object.is=="function"?Object.is:kH,CH=SH.useSyncExternalStore,TH=Pf.useRef,_H=Pf.useEffect,NH=Pf.useMemo,OH=Pf.useDebugValue;CN.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=TH(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=NH(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return d=p}return d=h}if(p=d,EH(u,h))return p;var m=r(h);return s!==void 0&&s(p,m)?(u=h,p):(u=h,d=m)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,s]);var a=CH(t,i[0],i[1]);return _H(function(){o.hasValue=!0,o.value=a},[a]),OH(a),a};EN.exports=CN;var AH=EN.exports,RH=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},PH=({contentComponent:t})=>{const e=Qv.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(e)})};function MH(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:wv.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var IH=class extends I.Component{constructor(t){var e;super(t),this.editorContentRef=I.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=MH(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return g.jsxs(g.Fragment,{children:[g.jsx("div",{ref:RH(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&g.jsx(PH,{contentComponent:t.contentComponent})]})}},jH=x.forwardRef((t,e)=>{const n=I.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return I.createElement(IH,{key:n,innerRef:e,...t})}),DH=I.memo(jH),LH=typeof window<"u"?x.useLayoutEffect:x.useEffect,$H=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function zH(t){var e;const[n]=x.useState(()=>new $H(t.editor)),r=AH.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:xH);return LH(()=>n.watch(t.editor),[t.editor,n]),x.useDebugValue(r),r}var BH=!1,oy=typeof window>"u",FH=oy||!!(typeof window<"u"&&window.next),UH=class TN{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?oy||FH?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...r)},onDelete:(...r)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...r)}};return new T5(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=n.extensions)==null?void 0:o[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?TN.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function HH(t={},e=[]){const n=x.useRef(t);n.current=t;const[r]=x.useState(()=>new UH(n)),s=Qv.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return x.useDebugValue(s),x.useEffect(r.onRender(e)),zH({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var VH=x.createContext({editor:null});VH.Consumer;var WH=x.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),qH=()=>x.useContext(WH);I.forwardRef((t,e)=>{const{onDragStart:n}=qH(),r=t.as||"div";return g.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});I.createContext({markViewContentRef:()=>{}});var ph=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},KH=/^\s*>\s$/,GH=ln.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return ph("blockquote",{...nt(this.options.HTMLAttributes,t),children:ph("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Wa({find:KH,type:this.type})]}}),JH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,QH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,YH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,XH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ZH=bo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return ph("strong",{...nt(this.options.HTMLAttributes,t),children:ph("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Va({find:JH,type:this.type}),Va({find:YH,type:this.type})]},addPasteRules(){return[ho({find:QH,type:this.type}),ho({find:XH,type:this.type})]}}),e6=/(^|[^`])`([^`]+)`(?!`)$/,t6=/(^|[^`])`([^`]+)`(?!`)/g,n6=bo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Va({find:e6,type:this.type})]},addPasteRules(){return[ho({find:t6,type:this.type})]}}),Kp=4,r6=/^```([a-z]+)?[\s\n]$/,s6=/^~~~([a-z]+)?[\s\n]$/,i6=ln.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Kp,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",nt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Kp,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=s,h=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(c,u,r.schema.text(h)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Kp,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=i,u=i.start(),d=i.end(),h=r.doc.textBetween(u,d,`
`,`
`).split(`
`);let p=0,m=0;const y=c-u;for(let C=0;C<h.length;C+=1){if(m+h[C].length>=y){p=C;break}m+=h[C].length+1}const w=((l=h[p].match(/^ */))==null?void 0:l[0])||"",b=Math.min(w.length,n);if(b===0)return!0;let S=u;for(let C=0;C<p;C+=1)S+=h[C].length+1;return a.delete(S,S+b),c-S<=b&&a.setSelection(re.create(a.doc,S)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=s,f=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(h=>{var p;const m=((p=h.match(/^ */))==null?void 0:p[0])||"",y=Math.min(m.length,n);return h.slice(y)}).join(`
`);return a.replaceWith(l,c,r.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(de.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[sy({find:r6,type:this.type,getAttributes:t=>({language:t[1]})}),sy({find:s6,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ve({key:new ft("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(re.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),o6=ln.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),a6=ln.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",nt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),l6=ln.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,nt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>sy({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),c6=ln.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",nt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!O5(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return sN(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(re.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(X.create(o.doc,l.pos)):o.setSelection(re.create(o.doc,l.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=u==null?void 0:u.create();d&&(o.insert(c,d),o.setSelection(re.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[xN({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),u6=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,d6=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,h6=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,f6=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,p6=bo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Va({find:u6,type:this.type}),Va({find:h6,type:this.type})]},addPasteRules(){return[ho({find:d6,type:this.type}),ho({find:f6,type:this.type})]}});const m6="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",g6="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",ay="numeric",ly="ascii",cy="alpha",ql="asciinumeric",Nl="alphanumeric",uy="domain",_N="emoji",y6="scheme",v6="slashscheme",Gp="whitespace";function w6(t,e){return t in e||(e[t]=[]),e[t]}function Di(t,e,n){e[ay]&&(e[ql]=!0,e[Nl]=!0),e[ly]&&(e[ql]=!0,e[cy]=!0),e[ql]&&(e[Nl]=!0),e[cy]&&(e[Nl]=!0),e[Nl]&&(e[uy]=!0),e[_N]&&(e[uy]=!0);for(const r in e){const s=w6(r,n);s.indexOf(t)<0&&s.push(t)}}function b6(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function tn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}tn.groups={};tn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||tn.groups;let s;return e&&e.j?s=e:(s=new tn(e),n&&r&&Di(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||tn.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new tn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new tn,i){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(b6(o.t,r),n);Di(i,l,r)}else n&&Di(i,n,r);o.t=i}return s.j[t]=o,o}};const ce=(t,e,n,r,s)=>t.ta(e,n,r,s),qe=(t,e,n,r,s)=>t.tr(e,n,r,s),_1=(t,e,n,r,s)=>t.ts(e,n,r,s),j=(t,e,n,r,s)=>t.tt(e,n,r,s),Ar="WORD",dy="UWORD",NN="ASCIINUMERICAL",ON="ALPHANUMERICAL",Lc="LOCALHOST",hy="TLD",fy="UTLD",fd="SCHEME",Vo="SLASH_SCHEME",C0="NUM",py="WS",T0="NL",Kl="OPENBRACE",Gl="CLOSEBRACE",mh="OPENBRACKET",gh="CLOSEBRACKET",yh="OPENPAREN",vh="CLOSEPAREN",wh="OPENANGLEBRACKET",bh="CLOSEANGLEBRACKET",xh="FULLWIDTHLEFTPAREN",Sh="FULLWIDTHRIGHTPAREN",kh="LEFTCORNERBRACKET",Eh="RIGHTCORNERBRACKET",Ch="LEFTWHITECORNERBRACKET",Th="RIGHTWHITECORNERBRACKET",_h="FULLWIDTHLESSTHAN",Nh="FULLWIDTHGREATERTHAN",Oh="AMPERSAND",Ah="APOSTROPHE",Rh="ASTERISK",ys="AT",Ph="BACKSLASH",Mh="BACKTICK",Ih="CARET",ks="COLON",_0="COMMA",jh="DOLLAR",cr="DOT",Dh="EQUALS",N0="EXCLAMATION",Cn="HYPHEN",Jl="PERCENT",Lh="PIPE",$h="PLUS",zh="POUND",Ql="QUERY",O0="QUOTE",AN="FULLWIDTHMIDDLEDOT",A0="SEMI",ur="SLASH",Yl="TILDE",Bh="UNDERSCORE",RN="EMOJI",Fh="SYM";var PN=Object.freeze({__proto__:null,ALPHANUMERICAL:ON,AMPERSAND:Oh,APOSTROPHE:Ah,ASCIINUMERICAL:NN,ASTERISK:Rh,AT:ys,BACKSLASH:Ph,BACKTICK:Mh,CARET:Ih,CLOSEANGLEBRACKET:bh,CLOSEBRACE:Gl,CLOSEBRACKET:gh,CLOSEPAREN:vh,COLON:ks,COMMA:_0,DOLLAR:jh,DOT:cr,EMOJI:RN,EQUALS:Dh,EXCLAMATION:N0,FULLWIDTHGREATERTHAN:Nh,FULLWIDTHLEFTPAREN:xh,FULLWIDTHLESSTHAN:_h,FULLWIDTHMIDDLEDOT:AN,FULLWIDTHRIGHTPAREN:Sh,HYPHEN:Cn,LEFTCORNERBRACKET:kh,LEFTWHITECORNERBRACKET:Ch,LOCALHOST:Lc,NL:T0,NUM:C0,OPENANGLEBRACKET:wh,OPENBRACE:Kl,OPENBRACKET:mh,OPENPAREN:yh,PERCENT:Jl,PIPE:Lh,PLUS:$h,POUND:zh,QUERY:Ql,QUOTE:O0,RIGHTCORNERBRACKET:Eh,RIGHTWHITECORNERBRACKET:Th,SCHEME:fd,SEMI:A0,SLASH:ur,SLASH_SCHEME:Vo,SYM:Fh,TILDE:Yl,TLD:hy,UNDERSCORE:Bh,UTLD:fy,UWORD:dy,WORD:Ar,WS:py});const _r=/[a-z]/,vl=new RegExp("\\p{L}","u"),Jp=new RegExp("\\p{Emoji}","u"),Nr=/\d/,Qp=/\s/,N1="\r",Yp=`
`,x6="",S6="",Xp="";let Hu=null,Vu=null;function k6(t=[]){const e={};tn.groups=e;const n=new tn;Hu==null&&(Hu=O1(m6)),Vu==null&&(Vu=O1(g6)),j(n,"'",Ah),j(n,"{",Kl),j(n,"}",Gl),j(n,"[",mh),j(n,"]",gh),j(n,"(",yh),j(n,")",vh),j(n,"<",wh),j(n,">",bh),j(n,"",xh),j(n,"",Sh),j(n,"",kh),j(n,"",Eh),j(n,"",Ch),j(n,"",Th),j(n,"",_h),j(n,"",Nh),j(n,"&",Oh),j(n,"*",Rh),j(n,"@",ys),j(n,"`",Mh),j(n,"^",Ih),j(n,":",ks),j(n,",",_0),j(n,"$",jh),j(n,".",cr),j(n,"=",Dh),j(n,"!",N0),j(n,"-",Cn),j(n,"%",Jl),j(n,"|",Lh),j(n,"+",$h),j(n,"#",zh),j(n,"?",Ql),j(n,'"',O0),j(n,"/",ur),j(n,";",A0),j(n,"~",Yl),j(n,"_",Bh),j(n,"\\",Ph),j(n,"",AN);const r=qe(n,Nr,C0,{[ay]:!0});qe(r,Nr,r);const s=qe(r,_r,NN,{[ql]:!0}),i=qe(r,vl,ON,{[Nl]:!0}),o=qe(n,_r,Ar,{[ly]:!0});qe(o,Nr,s),qe(o,_r,o),qe(s,Nr,s),qe(s,_r,s);const a=qe(n,vl,dy,{[cy]:!0});qe(a,_r),qe(a,Nr,i),qe(a,vl,a),qe(i,Nr,i),qe(i,_r),qe(i,vl,i);const l=j(n,Yp,T0,{[Gp]:!0}),c=j(n,N1,py,{[Gp]:!0}),u=qe(n,Qp,py,{[Gp]:!0});j(n,Xp,u),j(c,Yp,l),j(c,Xp,u),qe(c,Qp,u),j(u,N1),j(u,Yp),qe(u,Qp,u),j(u,Xp,u);const d=qe(n,Jp,RN,{[_N]:!0});j(d,"#"),qe(d,Jp,d),j(d,x6,d);const f=j(d,S6);j(f,"#"),qe(f,Jp,d);const h=[[_r,o],[Nr,s]],p=[[_r,null],[vl,a],[Nr,i]];for(let m=0;m<Hu.length;m++)ls(n,Hu[m],hy,Ar,h);for(let m=0;m<Vu.length;m++)ls(n,Vu[m],fy,dy,p);Di(hy,{tld:!0,ascii:!0},e),Di(fy,{utld:!0,alpha:!0},e),ls(n,"file",fd,Ar,h),ls(n,"mailto",fd,Ar,h),ls(n,"http",Vo,Ar,h),ls(n,"https",Vo,Ar,h),ls(n,"ftp",Vo,Ar,h),ls(n,"ftps",Vo,Ar,h),Di(fd,{scheme:!0,ascii:!0},e),Di(Vo,{slashscheme:!0,ascii:!0},e),t=t.sort((m,y)=>m[0]>y[0]?1:-1);for(let m=0;m<t.length;m++){const y=t[m][0],w=t[m][1]?{[y6]:!0}:{[v6]:!0};y.indexOf("-")>=0?w[uy]=!0:_r.test(y)?Nr.test(y)?w[ql]=!0:w[ly]=!0:w[ay]=!0,_1(n,y,y,w)}return _1(n,"localhost",Lc,{ascii:!0}),n.jd=new tn(Fh),{start:n,tokens:Object.assign({groups:e},PN)}}function MN(t,e){const n=E6(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=t,l=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=n[o].length,f++),c+=n[o].length,i+=n[o].length,o++;i-=d,o-=f,c-=d,s.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function E6(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function ls(t,e,n,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new tn(r),i.jr=s.slice(),t.j[l]=i),t=i}return i=new tn(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function O1(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const $c={defaultProtocol:"http",events:null,format:A1,formatHref:A1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function R0(t,e=null){let n=Object.assign({},$c);t&&(n=Object.assign(n,t instanceof R0?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}R0.prototype={o:$c,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:$c[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function A1(t){return t}function IN(t,e){this.t="token",this.v=t,this.tk=e}IN.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=$c.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:s,attributes:o,content:i,eventListeners:d}}};function Mf(t,e){class n extends IN{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const R1=Mf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),P1=Mf("text"),C6=Mf("nl"),Wu=Mf("url",{isLink:!0,toHref(t=$c.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Lc&&t[1].t===ks}}),En=t=>new tn(t);function T6({groups:t}){const e=t.domain.concat([Oh,Rh,ys,Ph,Mh,Ih,jh,Dh,Cn,C0,Jl,Lh,$h,zh,ur,Fh,Yl,Bh]),n=[Ah,ks,_0,cr,N0,Jl,Ql,O0,A0,wh,bh,Kl,Gl,gh,mh,yh,vh,xh,Sh,kh,Eh,Ch,Th,_h,Nh],r=[Oh,Ah,Rh,Ph,Mh,Ih,jh,Dh,Cn,Kl,Gl,Jl,Lh,$h,zh,Ql,ur,Fh,Yl,Bh],s=En(),i=j(s,Yl);ce(i,r,i),ce(i,t.domain,i);const o=En(),a=En(),l=En();ce(s,t.domain,o),ce(s,t.scheme,a),ce(s,t.slashscheme,l),ce(o,r,i),ce(o,t.domain,o);const c=j(o,ys);j(i,ys,c),j(a,ys,c),j(l,ys,c);const u=j(i,cr);ce(u,r,i),ce(u,t.domain,i);const d=En();ce(c,t.domain,d),ce(d,t.domain,d);const f=j(d,cr);ce(f,t.domain,d);const h=En(R1);ce(f,t.tld,h),ce(f,t.utld,h),j(c,Lc,h);const p=j(d,Cn);j(p,Cn,p),ce(p,t.domain,d),ce(h,t.domain,d),j(h,cr,f),j(h,Cn,p);const m=j(h,ks);ce(m,t.numeric,R1);const y=j(o,Cn),v=j(o,cr);j(y,Cn,y),ce(y,t.domain,o),ce(v,r,i),ce(v,t.domain,o);const w=En(Wu);ce(v,t.tld,w),ce(v,t.utld,w),ce(w,t.domain,o),ce(w,r,i),j(w,cr,v),j(w,Cn,y),j(w,ys,c);const b=j(w,ks),S=En(Wu);ce(b,t.numeric,S);const k=En(Wu),C=En();ce(k,e,k),ce(k,n,C),ce(C,e,k),ce(C,n,C),j(w,ur,k),j(S,ur,k);const E=j(a,ks),_=j(l,ks),A=j(_,ur),N=j(A,ur);ce(a,t.domain,o),j(a,cr,v),j(a,Cn,y),ce(l,t.domain,o),j(l,cr,v),j(l,Cn,y),ce(E,t.domain,k),j(E,ur,k),j(E,Ql,k),ce(N,t.domain,k),ce(N,e,k),j(N,ur,k);const z=[[Kl,Gl],[mh,gh],[yh,vh],[wh,bh],[xh,Sh],[kh,Eh],[Ch,Th],[_h,Nh]];for(let L=0;L<z.length;L++){const[q,F]=z[L],Z=j(k,q);j(C,q,Z),j(Z,F,k);const W=En(Wu);ce(Z,e,W);const G=En();ce(Z,n),ce(W,e,W),ce(W,n,G),ce(G,e,W),ce(G,n,G),j(W,F,k),j(G,F,k)}return j(s,Lc,w),j(s,T0,C6),{start:s,tokens:PN}}function _6(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=t,l=null,c=null,u=0,d=null,f=-1;for(;s<r&&!(l=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,s++,u++;if(f<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(Zp(P1,e,o)),o=[]),s-=f,u-=f;const h=d.t,p=n.slice(s-u,s);i.push(Zp(h,e,p))}}return o.length>0&&i.push(Zp(P1,e,o)),i}function Zp(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const N6=typeof console<"u"&&console&&console.warn||(()=>{}),O6="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Me={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function A6(){return tn.groups={},Me.scanner=null,Me.parser=null,Me.tokenQueue=[],Me.pluginQueue=[],Me.customSchemes=[],Me.initialized=!1,Me}function M1(t,e=!1){if(Me.initialized&&N6(`linkifyjs: already initialized - will not register custom scheme "${t}" ${O6}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Me.customSchemes.push([t,e])}function R6(){Me.scanner=k6(Me.customSchemes);for(let t=0;t<Me.tokenQueue.length;t++)Me.tokenQueue[t][1]({scanner:Me.scanner});Me.parser=T6(Me.scanner.tokens);for(let t=0;t<Me.pluginQueue.length;t++)Me.pluginQueue[t][1]({scanner:Me.scanner,parser:Me.parser});return Me.initialized=!0,Me}function P0(t){return Me.initialized||R6(),_6(Me.parser.start,t,MN(Me.scanner.start,t))}P0.scan=MN;function jN(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new R0(n),s=P0(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var M0="[\0- -\u2029]",P6=new RegExp(M0),M6=new RegExp(`${M0}$`),I6=new RegExp(M0,"g");function j6(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function D6(t){return new Ve({key:new ft("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=Q_(n.doc,[...e]);if(rN(a).forEach(({newRange:c})=>{const u=NU(r.doc,c,h=>h.isTextblock);let d,f;if(u.length>1)d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const h=r.doc.textBetween(c.from,c.to," "," ");if(!M6.test(h))return;d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&f){const h=f.split(P6).filter(Boolean);if(h.length<=0)return!1;const p=h[h.length-1],m=d.pos+f.lastIndexOf(p);if(!p)return!1;const y=P0(p).map(v=>v.toObject(t.defaultProtocol));if(!j6(y))return!1;y.filter(v=>v.isLink).map(v=>({...v,from:m+v.start+1,to:m+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{b0(v.from,v.to,r.doc).some(w=>w.mark.type===t.type)||o.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function L6(t){return new Ve({key:new ft("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;a=f.find(h=>h.nodeName==="A")}if(!a)return o;const l=nN(e.state,t.type.name),c=(s=a==null?void 0:a.href)!=null?s:l.href,u=(i=a==null?void 0:a.target)!=null?i:l.target;a&&c&&(window.open(c,u),o=!0)}return o}}})}function $6(t){return new Ve({key:new ft("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=jN(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||s!==void 0&&!s(c.href)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function bi(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(I6,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var DN=bo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){M1(t);return}M1(t.scheme,t.optionalSlashes)})},onDestroy(){A6()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!bi(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!bi(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!bi(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",nt(this.options.HTMLAttributes,t),0]:["a",nt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!bi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!bi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ho({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=jN(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!bi(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(D6({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!bi(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(L6({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push($6({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),z6=DN,B6=Object.defineProperty,F6=(t,e)=>{for(var n in e)B6(t,n,{get:e[n],enumerable:!0})},U6="listItem",I1="textStyle",j1=/^\s*([-+*])\s$/,LN=ln.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(U6,this.editor.getAttributes(I1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Wa({find:j1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wa({find:j1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(I1),editor:this.editor})),[t]}}),$N=ln.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>E0(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),H6={};F6(H6,{findListItemPos:()=>iu,getNextListDepth:()=>I0,handleBackspace:()=>my,handleDelete:()=>gy,hasListBefore:()=>zN,hasListItemAfter:()=>V6,hasListItemBefore:()=>BN,listItemHasSubList:()=>FN,nextListIsDeeper:()=>UN,nextListIsHigher:()=>HN});var iu=(t,e)=>{const{$from:n}=e.selection,r=ct(t,e.schema);let s=null,i=n.depth,o=n.pos,a=null;for(;i>0&&a===null;)s=n.node(i),s.type===r?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},I0=(t,e)=>{const n=iu(t,e);if(!n)return!1;const[,r]=$U(e,t,n.$pos.pos+4);return r},zN=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),i=t.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},BN=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},FN=(t,e,n)=>{if(!n)return!1;const r=ct(t,e.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},my=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!si(t.state,e)&&zN(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,h)=>{f.type.name===e&&c.push({node:f,pos:h})});const u=c.at(-1);if(!u)return!1;const d=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!si(t.state,e)||!UU(t.state))return!1;const r=iu(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=FN(e,t.state,i);return BN(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},UN=(t,e)=>{const n=I0(t,e),r=iu(t,e);return!r||!n?!1:n>r.depth},HN=(t,e)=>{const n=I0(t,e),r=iu(t,e);return!r||!n?!1:n<r.depth},gy=(t,e)=>{if(!si(t.state,e)||!FU(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:UN(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():HN(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},V6=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},VN=Ze.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&gy(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&gy(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&my(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&my(t,n,r)&&(e=!0)}),e}}}}),D1=/^(\s*)(\d+)\.\s+(.*)$/,W6=/^\s/;function q6(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],i=s.match(D1);if(!i)break;const[,o,a,l]=i,c=o.length;let u=l,d=n+1;const f=[s];for(;d<t.length;){const h=t[d];if(h.match(D1))break;if(h.trim()==="")f.push(h),u+=`
`,d+=1;else if(h.match(W6))f.push(h),u+=`
${h.slice(c+2)}`,d+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:f.join(`
`)}),r=d,n=d}return[e,r]}function WN(t,e,n){var r;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const h=n.blockTokens(u);c.push(...h)}let d=i+1;const f=[];for(;d<t.length&&t[d].indent>e;)f.push(t[d]),d+=1;if(f.length>0){const h=Math.min(...f.map(m=>m.indent)),p=WN(f,h,n);c.push({type:"list",ordered:!0,start:f[0].number,items:p,raw:f.map(m=>m.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:c}),i=d}else i+=1}return s}function K6(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var G6="listItem",L1="textStyle",$1=/^(\d+)\.\s$/,qN=ln.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",nt(this.options.HTMLAttributes,n),0]:["ol",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?K6(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[i,o]=q6(s);if(i.length===0)return;const a=WN(i,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(G6,this.editor.getAttributes(L1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Wa({find:$1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wa({find:$1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(L1)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),J6=/^\s*(\[([( |x])?\])\s$/,Q6=ln.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",nt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return E0(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var d,f;a.ariaLabel=((f=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:f.call(d,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:d}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const h=n();if(typeof h!="number")return!1;const p=f.doc.nodeAt(h);return f.setNodeMarkup(h,void 0,{...p==null?void 0:p.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,d])=>{s.setAttribute(u,d)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(e).forEach(([u,d])=>{s.setAttribute(u,d)}),{dom:s,contentDOM:l,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[Wa({find:J6,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Y6=ln.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",nt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=i=>{const o=iy(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=iy(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ze.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(LN.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push($N.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(VN.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(qN.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Q6.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Y6.configure(this.options.taskList)),t}});var X6=ln.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",nt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Z6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,eV=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,tV=bo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Va({find:Z6,type:this.type})]},addPasteRules(){return[ho({find:eV,type:this.type})]}}),nV=ln.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),KN=bo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",nt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),rV=KN;function sV(t={}){return new Ve({view(e){return new iV(e,t)}})}class iV{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=d?p.bottom:p.top;d&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:p.left,right:p.right,top:m-y,bottom:m+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,h=d.height/l.offsetHeight;c=d.left-l.scrollLeft*f,u=d.top-l.scrollTop*h}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=FT(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ye extends de{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ye.valid(r)?new Ye(r):de.near(r)}content(){return U.empty}eq(e){return e instanceof Ye&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ye(e.resolve(n.pos))}getBookmark(){return new j0(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!oV(e)||!aV(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ye.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let l=e.doc.resolve(s);if(Ye.valid(l))return l}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!X.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=e.doc.resolve(s);if(Ye.valid(a))return a}return null}}}Ye.prototype.visible=!1;Ye.findFrom=Ye.findGapCursorFrom;de.jsonID("gapcursor",Ye);class j0{constructor(e){this.pos=e}map(e){return new j0(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ye.valid(n)?new Ye(n):de.near(n)}}function GN(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function oV(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||GN(s.type))return!0;if(s.inlineContent)return!1}}return!0}function aV(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||GN(s.type))return!0;if(s.inlineContent)return!1}}return!0}function lV(){return new Ve({props:{decorations:hV,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ye.valid(n)?new Ye(n):null},handleClick:uV,handleKeyDown:cV,handleDOMEvents:{beforeinput:dV}}})}const cV=U_({ArrowLeft:qu("horiz",-1),ArrowRight:qu("horiz",1),ArrowUp:qu("vert",-1),ArrowDown:qu("vert",1)});function qu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof re){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Ye.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new Ye(c))),!0):!1}}function uV(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ye.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&X.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ye(r))),!0)}function dV(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ye))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=M.empty;for(let o=r.length-1;o>=0;o--)s=M.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new U(s,0,0));return i.setSelection(re.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function hV(t){if(!(t.selection instanceof Ye))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Be.create(t.doc,[Wt.widget(t.selection.head,e,{key:"gapcursor"})])}var Uh=200,St=function(){};St.prototype.append=function(e){return e.length?(e=St.from(e),!this.length&&e||e.length<Uh&&this.leafAppend(e)||this.length<Uh&&e.leafPrepend(this)||this.appendInner(e)):this};St.prototype.prepend=function(e){return e.length?St.from(e).append(this):this};St.prototype.appendInner=function(e){return new fV(this,e)};St.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?St.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};St.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};St.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};St.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};St.from=function(e){return e instanceof St?e:e&&e.length?new JN(e):St.empty};var JN=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Uh)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Uh)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(St);St.empty=new JN([]);var fV=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(St);const pV=500;class Zn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,u.push(d);return}if(s){u.push(new cs(d.map));let h=d.step.map(s.slice(i)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new cs(p,void 0,void 0,c.length+u.length))),i--,p&&s.appendMap(p,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,l=new Zn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new cs(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(o++,n=void 0),s||(l=f)}let c=o-r.depth;return c>gV&&(a=mV(a,c),o-=c),new Zn(a.append(i),o)}remapping(e,n){let r=new Rc;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Zn(this.items.append(e.map(n=>new cs(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=n;this.items.forEach(f=>{let h=i.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=i.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),y=f.selection&&f.selection.map(i.slice(l+1,h));y&&a++,r.push(new cs(p,m,y))}else r.push(new cs(p))},s);let c=[];for(let f=n;f<o;f++)c.push(new cs(i.maps[f]));let u=this.items.slice(0,s).append(c).append(r),d=new Zn(u,a);return d.emptyItemCount()>pV&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&i++;let d=new cs(c.invert(),l,u),f,h=s.length-1;(f=s.length&&s[h].merge(d))?s[h]=f:s.push(d)}}else o.map&&r--},this.items.length,0),new Zn(St.from(s.reverse()),i)}}Zn.empty=new Zn(St.empty,0);function mV(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}let cs=class QN{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new QN(n.getMap().invert(),n,this.selection)}}};class vs{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const gV=20;function yV(t,e,n,r){let s=n.getMeta(Xi),i;if(s)return s.historyState;n.getMeta(bV)&&(t=new vs(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Xi))return o.getMeta(Xi).redo?new vs(t.done.addTransform(n,void 0,r,pd(e)),t.undone,z1(n.mapping.maps),t.prevTime,t.prevComposition):new vs(t.done,t.undone.addTransform(n,void 0,r,pd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!vV(n,t.prevRanges)),c=o?em(t.prevRanges,n.mapping):z1(n.mapping.maps);return new vs(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,pd(e)),Zn.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new vs(t.done.rebased(n,i),t.undone.rebased(n,i),em(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new vs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),em(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function vV(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function z1(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function em(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function wV(t,e,n){let r=pd(e),s=Xi.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new vs(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(Xi,{redo:n,historyState:l})}let tm=!1,B1=null;function pd(t){let e=t.plugins;if(B1!=e){tm=!1,B1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){tm=!0;break}}return tm}const Xi=new ft("history"),bV=new ft("closeHistory");function xV(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ve({key:Xi,state:{init(){return new vs(Zn.empty,Zn.empty,null,0,-1)},apply(e,n,r){return yV(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?XN:r=="historyRedo"?ZN:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function YN(t,e){return(n,r)=>{let s=Xi.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=wV(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const XN=YN(!1,!0),ZN=YN(!0,!0);Ze.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Ve({key:new ft("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var SV=Ze.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[sV(this.options)]}});Ze.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ve({key:new ft("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,i=[];if(!n||!r)return Be.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(s>=c&&s<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(s>=c&&s<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(Wt.node(c,c+l.nodeSize,{class:this.options.className}))}),Be.create(t,i)}}})]}});var kV=Ze.create({name:"gapCursor",addProseMirrorPlugins(){return[lV()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ke(Y(t,"allowGapCursor",n)))!=null?e:null}}});Ze.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ve({key:new ft("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const i=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&Of(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];i&&u.push(this.options.emptyEditorClass);const d=Wt.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),Be.create(t,s)}}})]}});Ze.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Ve({key:new ft("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||sN(n.selection)||t.view.dragging?null:Be.create(n.doc,[Wt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function F1({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var EV=Ze.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new ft(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Ve({key:e,appendTransaction:(s,i,o)=>{const{doc:a,tr:l,schema:c}=o,u=e.getState(o),d=a.content.size,f=c.nodes[n];if(u)return l.insert(d,f.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!F1({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!F1({node:o,types:r})}}})]}}),CV=Ze.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>XN(t,e),redo:()=>({state:t,dispatch:e})=>ZN(t,e)}},addProseMirrorPlugins(){return[xV(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),TV=Ze.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(ZH.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(GH.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(LN.configure(this.options.bulletList)),this.options.code!==!1&&s.push(n6.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(i6.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(o6.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(SV.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(kV.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(a6.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(l6.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(CV.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(c6.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(p6.configure(this.options.italic)),this.options.listItem!==!1&&s.push($N.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(VN.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(DN.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(qN.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(X6.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(tV.configure(this.options.strike)),this.options.text!==!1&&s.push(nV.configure(this.options.text)),this.options.underline!==!1&&s.push(KN.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(EV.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),_V=TV,NV=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,OV=ln.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",nt(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,s,i,o;const a=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",l=(s=(r=t.attrs)==null?void 0:r.alt)!=null?s:"",c=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:i,HTMLAttributes:o,editor:a})=>{const l=document.createElement("img");Object.entries(o).forEach(([d,f])=>{if(f!=null)switch(d){case"width":case"height":break;default:l.setAttribute(d,f);break}}),l.src=o.src;const c=new N5({element:l,editor:a,node:s,getPos:i,onResize:(d,f)=>{l.style.width=`${d}px`,l.style.height=`${f}px`},onCommit:(d,f)=>{const h=i();h!==void 0&&this.editor.chain().setNodeSelection(h).updateAttributes(this.name,{width:d,height:f}).run()},onUpdate:(d,f,h)=>d.type===s.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),u=c.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",l.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},c}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[xN({find:NV,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),AV=OV,RV=Ze.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).some(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),PV=RV,MV="Separator",U1="horizontal",IV=["horizontal","vertical"],eO=x.forwardRef((t,e)=>{const{decorative:n,orientation:r=U1,...s}=t,i=jV(r)?r:U1,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return g.jsx(Ae.div,{"data-orientation":i,...a,...s,ref:e})});eO.displayName=MV;function jV(t){return IV.includes(t)}var tO=eO;const Ol=x.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>g.jsx(tO,{ref:s,decorative:n,orientation:e,className:He("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Ol.displayName=tO.displayName;function nO({content:t,onChange:e}){const n=x.useRef(null),r=HH({extensions:[_V.configure({paragraph:{HTMLAttributes:{class:"mb-4"}},bulletList:{keepMarks:!0,keepAttributes:!1,HTMLAttributes:{class:"list-disc"}},orderedList:{keepMarks:!0,keepAttributes:!1,HTMLAttributes:{class:"list-decimal"}},listItem:{HTMLAttributes:{class:"ml-0"}}}),rV,PV.configure({types:["heading","paragraph"]}),AV.configure({HTMLAttributes:{class:"max-w-full h-auto rounded-lg my-4"}}),z6.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary underline"}})],content:t,onUpdate:({editor:o})=>{e(o.getHTML())},editorProps:{attributes:{class:"prose prose-lg max-w-none focus:outline-none min-h-[400px] p-6 [&_p]:min-h-[1.5em]"}}});x.useEffect(()=>{r&&t!==r.getHTML()&&r.commands.setContent(t)},[t,r]);const s=async o=>{var l;const a=(l=o.target.files)==null?void 0:l[0];if(!(!a||!r)){try{const c=`${Date.now()}_${a.name}`,u=await st.uploadImage(a,c);r.chain().focus().setImage({src:u}).run(),De.success("Image uploaded successfully")}catch(c){console.error("Image upload error:",c),De.error(c.message||"Failed to upload image")}n.current&&(n.current.value="")}},i=()=>{if(!r)return;const o=window.prompt("Enter URL:");o&&r.chain().focus().setLink({href:o}).run()};return r?g.jsxs("div",{className:"border border-border rounded-lg overflow-hidden bg-card",children:[g.jsxs("div",{className:"flex flex-wrap gap-1 p-2 border-b border-border bg-muted/30",children:[g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleBold().run(),className:r.isActive("bold")?"bg-accent":"",title:"Bold",children:g.jsx(WD,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleItalic().run(),className:r.isActive("italic")?"bg-accent":"",title:"Italic",children:g.jsx(tL,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleUnderline().run(),className:r.isActive("underline")?"bg-accent":"",title:"Underline",children:g.jsx(hL,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleStrike().run(),className:r.isActive("strike")?"bg-accent":"",title:"Strikethrough",children:g.jsx(uL,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleCode().run(),className:r.isActive("code")?"bg-accent":"",title:"Code",children:g.jsx(JD,{className:"w-4 h-4"})}),g.jsx(Ol,{orientation:"vertical",className:"h-8 mx-1"}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleHeading({level:2}).run(),className:r.isActive("heading",{level:2})?"bg-accent":"",title:"Heading 2",children:g.jsx(YD,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleHeading({level:3}).run(),className:r.isActive("heading",{level:3})?"bg-accent":"",title:"Heading 3",children:g.jsx(XD,{className:"w-4 h-4"})}),g.jsx(Ol,{orientation:"vertical",className:"h-8 mx-1"}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().setTextAlign("left").run(),className:r.isActive({textAlign:"left"})?"bg-accent":"",title:"Align Left",children:g.jsx(UD,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().setTextAlign("center").run(),className:r.isActive({textAlign:"center"})?"bg-accent":"",title:"Align Center",children:g.jsx(BD,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().setTextAlign("right").run(),className:r.isActive({textAlign:"right"})?"bg-accent":"",title:"Align Right",children:g.jsx(HD,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().setTextAlign("justify").run(),className:r.isActive({textAlign:"justify"})?"bg-accent":"",title:"Justify",children:g.jsx(FD,{className:"w-4 h-4"})}),g.jsx(Ol,{orientation:"vertical",className:"h-8 mx-1"}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleBulletList().run(),className:r.isActive("bulletList")?"bg-accent":"",title:"Bullet List",children:g.jsx(sL,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleOrderedList().run(),className:r.isActive("orderedList")?"bg-accent":"",title:"Numbered List",children:g.jsx(rL,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleBlockquote().run(),className:r.isActive("blockquote")?"bg-accent":"",title:"Quote",children:g.jsx(aL,{className:"w-4 h-4"})}),g.jsx(Ol,{orientation:"vertical",className:"h-8 mx-1"}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:i,className:r.isActive("link")?"bg-accent":"",title:"Add Link",children:g.jsx(nL,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var o;return(o=n.current)==null?void 0:o.click()},title:"Insert Image",children:g.jsx(eL,{className:"w-4 h-4"})}),g.jsx("div",{className:"flex-1"}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().undo().run(),disabled:!r.can().undo(),title:"Undo",children:g.jsx(fL,{className:"w-4 h-4"})}),g.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().redo().run(),disabled:!r.can().redo(),title:"Redo",children:g.jsx(lL,{className:"w-4 h-4"})})]}),g.jsx("div",{className:"bg-white dark:bg-gray-950",children:g.jsx(DH,{editor:r})}),g.jsx("input",{ref:n,type:"file",accept:"image/*",className:"hidden",onChange:s})]}):null}const D0=x.forwardRef(({className:t,...e},n)=>g.jsx("textarea",{className:He("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));D0.displayName="Textarea";function rO(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var If="Switch",[DV,EW]=eu(If),[LV,$V]=DV(If),sO=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,h]=x.useState(null),p=Xe(e,b=>h(b)),m=x.useRef(!1),y=f?u||!!f.closest("form"):!0,[v,w]=Yd({prop:s,defaultProp:i??!1,onChange:c,caller:If});return g.jsxs(LV,{scope:n,checked:v,disabled:a,children:[g.jsx(Ae.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":lO(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:Te(t.onClick,b=>{w(S=>!S),y&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),y&&g.jsx(aO,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});sO.displayName=If;var iO="SwitchThumb",oO=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=$V(iO,n);return g.jsx(Ae.span,{"data-state":lO(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});oO.displayName=iO;var zV="SwitchBubbleInput",aO=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=x.useRef(null),a=Xe(o,i),l=rO(n),c=BC(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&h){const p=new Event("click",{bubbles:r});h.call(u,n),u.dispatchEvent(p)}},[l,n,r]),g.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aO.displayName=zV;function lO(t){return t?"checked":"unchecked"}var cO=sO,BV=oO;const zc=x.forwardRef(({className:t,...e},n)=>g.jsx(cO,{className:He("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:g.jsx(BV,{className:He("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zc.displayName=cO.displayName;function H1(t,[e,n]){return Math.min(n,Math.max(e,t))}function FV(t){const e=t+"CollectionProvider",[n,r]=eu(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:y,children:v}=m,w=I.useRef(null),b=I.useRef(new Map).current;return g.jsx(s,{scope:y,itemMap:b,collectionRef:w,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=Cc(a),c=I.forwardRef((m,y)=>{const{scope:v,children:w}=m,b=i(a,v),S=Xe(y,b.collectionRef);return g.jsx(l,{ref:S,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Cc(u),h=I.forwardRef((m,y)=>{const{scope:v,children:w,...b}=m,S=I.useRef(null),k=Xe(y,S),C=i(u,v);return I.useEffect(()=>(C.itemMap.set(S,{ref:S,...b}),()=>void C.itemMap.delete(S))),g.jsx(f,{[d]:"",ref:k,children:w})});h.displayName=u;function p(m){const y=i(t+"CollectionConsumer",m);return I.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((C,E)=>b.indexOf(C.ref.current)-b.indexOf(E.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},p,r]}var UV=x.createContext(void 0);function HV(t){const e=x.useContext(UV);return t||e||"ltr"}var nm=0;function VV(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??V1()),document.body.insertAdjacentElement("beforeend",t[1]??V1()),nm++,()=>{nm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),nm--}},[])}function V1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var rm="focusScope.autoFocusOnMount",sm="focusScope.autoFocusOnUnmount",W1={bubbles:!1,cancelable:!0},WV="FocusScope",uO=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=x.useState(null),c=io(s),u=io(i),d=x.useRef(null),f=Xe(e,m=>l(m)),h=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let m=function(b){if(h.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:hs(d.current,{select:!0})},y=function(b){if(h.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||hs(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&hs(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",y);const w=new MutationObserver(v);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",y),w.disconnect()}}},[r,a,h.paused]),x.useEffect(()=>{if(a){K1.add(h);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(rm,W1);a.addEventListener(rm,c),a.dispatchEvent(v),v.defaultPrevented||(qV(YV(dO(a)),{select:!0}),document.activeElement===m&&hs(a))}return()=>{a.removeEventListener(rm,c),setTimeout(()=>{const v=new CustomEvent(sm,W1);a.addEventListener(sm,u),a.dispatchEvent(v),v.defaultPrevented||hs(m??document.body,{select:!0}),a.removeEventListener(sm,u),K1.remove(h)},0)}}},[a,c,u,h]);const p=x.useCallback(m=>{if(!n&&!r||h.paused)return;const y=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(y&&v){const w=m.currentTarget,[b,S]=KV(w);b&&S?!m.shiftKey&&v===S?(m.preventDefault(),n&&hs(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&hs(S,{select:!0})):v===w&&m.preventDefault()}},[n,r,h.paused]);return g.jsx(Ae.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});uO.displayName=WV;function qV(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(hs(r,{select:e}),document.activeElement!==n)return}function KV(t){const e=dO(t),n=q1(e,t),r=q1(e.reverse(),t);return[n,r]}function dO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function q1(t,e){for(const n of t)if(!GV(n,{upTo:e}))return n}function GV(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function JV(t){return t instanceof HTMLInputElement&&"select"in t}function hs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&JV(t)&&e&&t.select()}}var K1=QV();function QV(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=G1(t,e),t.unshift(e)},remove(e){var n;t=G1(t,e),(n=t[0])==null||n.resume()}}}function G1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function YV(t){return t.filter(e=>e.tagName!=="A")}var XV=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},jo=new WeakMap,Ku=new WeakMap,Gu={},im=0,hO=function(t){return t&&(t.host||hO(t.parentNode))},ZV=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=hO(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},e8=function(t,e,n,r){var s=ZV(e,Array.isArray(t)?t:[t]);Gu[n]||(Gu[n]=new WeakMap);var i=Gu[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(jo.get(f)||0)+1,y=(i.get(f)||0)+1;jo.set(f,m),i.set(f,y),o.push(f),m===1&&p&&Ku.set(f,!0),y===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),im++,function(){o.forEach(function(d){var f=jo.get(d)-1,h=i.get(d)-1;jo.set(d,f),i.set(d,h),f||(Ku.has(d)||d.removeAttribute(r),Ku.delete(d)),h||d.removeAttribute(n)}),im--,im||(jo=new WeakMap,jo=new WeakMap,Ku=new WeakMap,Gu={})}},t8=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=XV(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),e8(r,s,n,"aria-hidden")):function(){return null}},md="right-scroll-bar-position",gd="width-before-scroll-bar",n8="with-scroll-bars-hidden",r8="--removed-body-scroll-bar-size";function om(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function s8(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var i8=typeof window<"u"?x.useLayoutEffect:x.useEffect,J1=new WeakMap;function o8(t,e){var n=s8(null,function(r){return t.forEach(function(s){return om(s,r)})});return i8(function(){var r=J1.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||om(a,null)}),i.forEach(function(a){s.has(a)||om(a,o)})}J1.set(n,t)},[t]),n}function a8(t){return t}function l8(t,e){e===void 0&&(e=a8);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function c8(t){t===void 0&&(t={});var e=l8(null);return e.options=gr({async:!0,ssr:!1},t),e}var fO=function(t){var e=t.sideCar,n=Xa(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,gr({},n))};fO.isSideCarExport=!0;function u8(t,e){return t.useMedium(e),fO}var pO=c8(),am=function(){},jf=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:am,onWheelCapture:am,onTouchMoveCapture:am}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noRelative,p=t.noIsolation,m=t.inert,y=t.allowPinchZoom,v=t.as,w=v===void 0?"div":v,b=t.gapMode,S=Xa(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,C=o8([n,e]),E=gr(gr({},S),s);return x.createElement(x.Fragment,null,u&&x.createElement(k,{sideCar:pO,removeScrollBar:c,shards:d,noRelative:h,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?x.cloneElement(x.Children.only(a),gr(gr({},E),{ref:C})):x.createElement(w,gr({},E,{className:l,ref:C}),a))});jf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jf.classNames={fullWidth:gd,zeroRight:md};var d8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function h8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=d8();return e&&t.setAttribute("nonce",e),t}function f8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function p8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var m8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=h8())&&(f8(e,n),p8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},g8=function(){var t=m8();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},mO=function(){var t=g8(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},y8={left:0,top:0,right:0,gap:0},lm=function(t){return parseInt(t||"",10)||0},v8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[lm(n),lm(r),lm(s)]},w8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return y8;var e=v8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},b8=mO(),ga="data-scroll-locked",x8=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(n8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ga,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(md,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(md," .").concat(md,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gd," .").concat(gd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ga,`] {
    `).concat(r8,": ").concat(a,`px;
  }
`)},Q1=function(){var t=parseInt(document.body.getAttribute(ga)||"0",10);return isFinite(t)?t:0},S8=function(){x.useEffect(function(){return document.body.setAttribute(ga,(Q1()+1).toString()),function(){var t=Q1()-1;t<=0?document.body.removeAttribute(ga):document.body.setAttribute(ga,t.toString())}},[])},k8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;S8();var i=x.useMemo(function(){return w8(s)},[s]);return x.createElement(b8,{styles:x8(i,!e,s,n?"":"!important")})},yy=!1;if(typeof window<"u")try{var Ju=Object.defineProperty({},"passive",{get:function(){return yy=!0,!0}});window.addEventListener("test",Ju,Ju),window.removeEventListener("test",Ju,Ju)}catch{yy=!1}var Do=yy?{passive:!1}:!1,E8=function(t){return t.tagName==="TEXTAREA"},gO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!E8(t)&&n[e]==="visible")},C8=function(t){return gO(t,"overflowY")},T8=function(t){return gO(t,"overflowX")},Y1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=yO(t,r);if(s){var i=vO(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},_8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},N8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},yO=function(t,e){return t==="v"?C8(e):T8(e)},vO=function(t,e){return t==="v"?_8(e):N8(e)},O8=function(t,e){return t==="h"&&e==="rtl"?-1:1},A8=function(t,e,n,r,s){var i=O8(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var h=vO(t,a),p=h[0],m=h[1],y=h[2],v=m-y-i*p;(p||v)&&yO(t,a)&&(d+=v,f+=p);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Qu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},X1=function(t){return[t.deltaX,t.deltaY]},Z1=function(t){return t&&"current"in t?t.current:t},R8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},P8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},M8=0,Lo=[];function I8(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),s=x.useState(M8++)[0],i=x.useState(mO)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=r2([t.lockRef.current],(t.shards||[]).map(Z1),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=Qu(m),w=n.current,b="deltaX"in m?m.deltaX:w[0]-v[0],S="deltaY"in m?m.deltaY:w[1]-v[1],k,C=m.target,E=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var _=Y1(E,C);if(!_)return!0;if(_?k=E:(k=E==="v"?"h":"v",_=Y1(E,C)),!_)return!1;if(!r.current&&"changedTouches"in m&&(b||S)&&(r.current=k),!k)return!0;var A=r.current||k;return A8(A,y,m,A==="h"?b:S)},[]),l=x.useCallback(function(m){var y=m;if(!(!Lo.length||Lo[Lo.length-1]!==i)){var v="deltaY"in y?X1(y):Qu(y),w=e.current.filter(function(k){return k.name===y.type&&(k.target===y.target||y.target===k.shadowParent)&&R8(k.delta,v)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var b=(o.current.shards||[]).map(Z1).filter(Boolean).filter(function(k){return k.contains(y.target)}),S=b.length>0?a(y,b[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(m,y,v,w){var b={name:m,delta:y,target:v,should:w,shadowParent:j8(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=x.useCallback(function(m){n.current=Qu(m),r.current=void 0},[]),d=x.useCallback(function(m){c(m.type,X1(m),m.target,a(m,t.lockRef.current))},[]),f=x.useCallback(function(m){c(m.type,Qu(m),m.target,a(m,t.lockRef.current))},[]);x.useEffect(function(){return Lo.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Do),document.addEventListener("touchmove",l,Do),document.addEventListener("touchstart",u,Do),function(){Lo=Lo.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Do),document.removeEventListener("touchmove",l,Do),document.removeEventListener("touchstart",u,Do)}},[]);var h=t.removeScrollBar,p=t.inert;return x.createElement(x.Fragment,null,p?x.createElement(i,{styles:P8(s)}):null,h?x.createElement(k8,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function j8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const D8=u8(pO,I8);var wO=x.forwardRef(function(t,e){return x.createElement(jf,gr({},t,{ref:e,sideCar:D8}))});wO.classNames=jf.classNames;var L8=[" ","Enter","ArrowUp","ArrowDown"],$8=[" ","Enter"],fo="Select",[Df,Lf,z8]=FV(fo),[rl,CW]=eu(fo,[z8,pf]),$f=pf(),[B8,hi]=rl(fo),[F8,U8]=rl(fo),bO=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h,form:p}=t,m=$f(e),[y,v]=x.useState(null),[w,b]=x.useState(null),[S,k]=x.useState(!1),C=HV(c),[E,_]=Yd({prop:r,defaultProp:s??!1,onChange:i,caller:fo}),[A,N]=Yd({prop:o,defaultProp:a,onChange:l,caller:fo}),z=x.useRef(null),L=y?p||!!y.closest("form"):!0,[q,F]=x.useState(new Set),Z=Array.from(q).map(W=>W.props.value).join(";");return g.jsx(QC,{...m,children:g.jsxs(B8,{required:h,scope:e,trigger:y,onTriggerChange:v,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:uf(),value:A,onValueChange:N,open:E,onOpenChange:_,dir:C,triggerPointerDownPosRef:z,disabled:f,children:[g.jsx(Df.Provider,{scope:e,children:g.jsx(F8,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(W=>{F(G=>new Set(G).add(W))},[]),onNativeOptionRemove:x.useCallback(W=>{F(G=>{const O=new Set(G);return O.delete(W),O})},[]),children:n})}),L?g.jsxs(VO,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:A,onChange:W=>N(W.target.value),disabled:f,form:p,children:[A===void 0?g.jsx("option",{value:""}):null,Array.from(q)]},Z):null]})})};bO.displayName=fo;var xO="SelectTrigger",SO=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=$f(n),o=hi(xO,n),a=o.disabled||r,l=Xe(e,o.onTriggerChange),c=Lf(n),u=x.useRef("touch"),[d,f,h]=qO(m=>{const y=c().filter(b=>!b.disabled),v=y.find(b=>b.value===o.value),w=KO(y,m,v);w!==void 0&&o.onValueChange(w.value)}),p=m=>{a||(o.onOpenChange(!0),h()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return g.jsx(YC,{asChild:!0,...i,children:g.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":WO(o.value)?"":void 0,...s,ref:l,onClick:Te(s.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&p(m)}),onPointerDown:Te(s.onPointerDown,m=>{u.current=m.pointerType;const y=m.target;y.hasPointerCapture(m.pointerId)&&y.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(p(m),m.preventDefault())}),onKeyDown:Te(s.onKeyDown,m=>{const y=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(y&&m.key===" ")&&L8.includes(m.key)&&(p(),m.preventDefault())})})})});SO.displayName=xO;var kO="SelectValue",EO=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=hi(kO,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=Xe(e,l.onValueNodeChange);return $t(()=>{c(u)},[c,u]),g.jsx(Ae.span,{...a,ref:d,style:{pointerEvents:"none"},children:WO(l.value)?g.jsx(g.Fragment,{children:o}):i})});EO.displayName=kO;var H8="SelectIcon",CO=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return g.jsx(Ae.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});CO.displayName=H8;var V8="SelectPortal",TO=t=>g.jsx(eT,{asChild:!0,...t});TO.displayName=V8;var po="SelectContent",_O=x.forwardRef((t,e)=>{const n=hi(po,t.__scopeSelect),[r,s]=x.useState();if($t(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Ja.createPortal(g.jsx(NO,{scope:t.__scopeSelect,children:g.jsx(Df.Slot,{scope:t.__scopeSelect,children:g.jsx("div",{children:t.children})})}),i):null}return g.jsx(OO,{...t,ref:e})});_O.displayName=po;var Wn=10,[NO,fi]=rl(po),W8="SelectContentImpl",q8=Cc("SelectContent.RemoveScroll"),OO=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:y,...v}=t,w=hi(po,n),[b,S]=x.useState(null),[k,C]=x.useState(null),E=Xe(e,B=>S(B)),[_,A]=x.useState(null),[N,z]=x.useState(null),L=Lf(n),[q,F]=x.useState(!1),Z=x.useRef(!1);x.useEffect(()=>{if(b)return t8(b)},[b]),VV();const W=x.useCallback(B=>{const[we,...We]=L().map(ve=>ve.ref.current),[be]=We.slice(-1),ge=document.activeElement;for(const ve of B)if(ve===ge||(ve==null||ve.scrollIntoView({block:"nearest"}),ve===we&&k&&(k.scrollTop=0),ve===be&&k&&(k.scrollTop=k.scrollHeight),ve==null||ve.focus(),document.activeElement!==ge))return},[L,k]),G=x.useCallback(()=>W([_,b]),[W,_,b]);x.useEffect(()=>{q&&G()},[q,G]);const{onOpenChange:O,triggerPointerDownPosRef:R}=w;x.useEffect(()=>{if(b){let B={x:0,y:0};const we=be=>{var ge,ve;B={x:Math.abs(Math.round(be.pageX)-(((ge=R.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(be.pageY)-(((ve=R.current)==null?void 0:ve.y)??0))}},We=be=>{B.x<=10&&B.y<=10?be.preventDefault():b.contains(be.target)||O(!1),document.removeEventListener("pointermove",we),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",We,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",We,{capture:!0})}}},[b,O,R]),x.useEffect(()=>{const B=()=>O(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[O]);const[P,K]=qO(B=>{const we=L().filter(ge=>!ge.disabled),We=we.find(ge=>ge.ref.current===document.activeElement),be=KO(we,B,We);be&&setTimeout(()=>be.ref.current.focus())}),J=x.useCallback((B,we,We)=>{const be=!Z.current&&!We;(w.value!==void 0&&w.value===we||be)&&(A(B),be&&(Z.current=!0))},[w.value]),ie=x.useCallback(()=>b==null?void 0:b.focus(),[b]),$=x.useCallback((B,we,We)=>{const be=!Z.current&&!We;(w.value!==void 0&&w.value===we||be)&&z(B)},[w.value]),ae=r==="popper"?vy:AO,xe=ae===vy?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:y}:{};return g.jsx(NO,{scope:n,content:b,viewport:k,onViewportChange:C,itemRefCallback:J,selectedItem:_,onItemLeave:ie,itemTextRefCallback:$,focusSelectedItem:G,selectedItemText:N,position:r,isPositioned:q,searchRef:P,children:g.jsx(wO,{as:q8,allowPinchZoom:!0,children:g.jsx(uO,{asChild:!0,trapped:w.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:Te(s,B=>{var we;(we=w.trigger)==null||we.focus({preventScroll:!0}),B.preventDefault()}),children:g.jsx(zv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:g.jsx(ae,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:B=>B.preventDefault(),...v,...xe,onPlaced:()=>F(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Te(v.onKeyDown,B=>{const we=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!we&&B.key.length===1&&K(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let be=L().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(B.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const ge=B.target,ve=be.indexOf(ge);be=be.slice(ve+1)}setTimeout(()=>W(be)),B.preventDefault()}})})})})})})});OO.displayName=W8;var K8="SelectItemAlignedPosition",AO=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=hi(po,n),o=fi(po,n),[a,l]=x.useState(null),[c,u]=x.useState(null),d=Xe(e,E=>u(E)),f=Lf(n),h=x.useRef(!1),p=x.useRef(!0),{viewport:m,selectedItem:y,selectedItemText:v,focusSelectedItem:w}=o,b=x.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&m&&y&&v){const E=i.trigger.getBoundingClientRect(),_=c.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),N=v.getBoundingClientRect();if(i.dir!=="rtl"){const ge=N.left-_.left,ve=A.left-ge,Pt=E.left-ve,Sn=E.width+Pt,pi=Math.max(Sn,_.width),es=window.innerWidth-Wn,mi=H1(ve,[Wn,Math.max(Wn,es-pi)]);a.style.minWidth=Sn+"px",a.style.left=mi+"px"}else{const ge=_.right-N.right,ve=window.innerWidth-A.right-ge,Pt=window.innerWidth-E.right-ve,Sn=E.width+Pt,pi=Math.max(Sn,_.width),es=window.innerWidth-Wn,mi=H1(ve,[Wn,Math.max(Wn,es-pi)]);a.style.minWidth=Sn+"px",a.style.right=mi+"px"}const z=f(),L=window.innerHeight-Wn*2,q=m.scrollHeight,F=window.getComputedStyle(c),Z=parseInt(F.borderTopWidth,10),W=parseInt(F.paddingTop,10),G=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),R=Z+W+q+O+G,P=Math.min(y.offsetHeight*5,R),K=window.getComputedStyle(m),J=parseInt(K.paddingTop,10),ie=parseInt(K.paddingBottom,10),$=E.top+E.height/2-Wn,ae=L-$,xe=y.offsetHeight/2,B=y.offsetTop+xe,we=Z+W+B,We=R-we;if(we<=$){const ge=z.length>0&&y===z[z.length-1].ref.current;a.style.bottom="0px";const ve=c.clientHeight-m.offsetTop-m.offsetHeight,Pt=Math.max(ae,xe+(ge?ie:0)+ve+G),Sn=we+Pt;a.style.height=Sn+"px"}else{const ge=z.length>0&&y===z[0].ref.current;a.style.top="0px";const Pt=Math.max($,Z+m.offsetTop+(ge?J:0)+xe)+We;a.style.height=Pt+"px",m.scrollTop=we-$+m.offsetTop}a.style.margin=`${Wn}px 0`,a.style.minHeight=P+"px",a.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,i.trigger,i.valueNode,a,c,m,y,v,i.dir,r]);$t(()=>b(),[b]);const[S,k]=x.useState();$t(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const C=x.useCallback(E=>{E&&p.current===!0&&(b(),w==null||w(),p.current=!1)},[b,w]);return g.jsx(J8,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:C,children:g.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:g.jsx(Ae.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AO.displayName=K8;var G8="SelectPopperPosition",vy=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Wn,...i}=t,o=$f(n);return g.jsx(XC,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vy.displayName=G8;var[J8,L0]=rl(po,{}),wy="SelectViewport",RO=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=fi(wy,n),o=L0(wy,n),a=Xe(e,i.onViewportChange),l=x.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),g.jsx(Df.Slot,{scope:n,children:g.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Te(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const h=Math.abs(l.current-u.scrollTop);if(h>0){const p=window.innerHeight-Wn*2,m=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(m,y);if(v<p){const w=v+h,b=Math.min(p,w),S=w-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});RO.displayName=wy;var PO="SelectGroup",[Q8,Y8]=rl(PO),X8=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=uf();return g.jsx(Q8,{scope:n,id:s,children:g.jsx(Ae.div,{role:"group","aria-labelledby":s,...r,ref:e})})});X8.displayName=PO;var MO="SelectLabel",IO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Y8(MO,n);return g.jsx(Ae.div,{id:s.id,...r,ref:e})});IO.displayName=MO;var Hh="SelectItem",[Z8,jO]=rl(Hh),DO=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=hi(Hh,n),l=fi(Hh,n),c=a.value===r,[u,d]=x.useState(i??""),[f,h]=x.useState(!1),p=Xe(e,w=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,w,r,s)}),m=uf(),y=x.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(Z8,{scope:n,value:r,disabled:s,textId:m,isSelected:c,onItemTextChange:x.useCallback(w=>{d(b=>b||((w==null?void 0:w.textContent)??"").trim())},[]),children:g.jsx(Df.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:g.jsx(Ae.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:p,onFocus:Te(o.onFocus,()=>h(!0)),onBlur:Te(o.onBlur,()=>h(!1)),onClick:Te(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:Te(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:Te(o.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:Te(o.onPointerMove,w=>{var b;y.current=w.pointerType,s?(b=l.onItemLeave)==null||b.call(l):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(o.onPointerLeave,w=>{var b;w.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:Te(o.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||($8.includes(w.key)&&v(),w.key===" "&&w.preventDefault())})})})})});DO.displayName=Hh;var Al="SelectItemText",LO=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=hi(Al,n),a=fi(Al,n),l=jO(Al,n),c=U8(Al,n),[u,d]=x.useState(null),f=Xe(e,v=>d(v),l.onItemTextChange,v=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,v,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=x.useMemo(()=>g.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:y}=c;return $t(()=>(m(p),()=>y(p)),[m,y,p]),g.jsxs(g.Fragment,{children:[g.jsx(Ae.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ja.createPortal(i.children,o.valueNode):null]})});LO.displayName=Al;var $O="SelectItemIndicator",zO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return jO($O,n).isSelected?g.jsx(Ae.span,{"aria-hidden":!0,...r,ref:e}):null});zO.displayName=$O;var by="SelectScrollUpButton",BO=x.forwardRef((t,e)=>{const n=fi(by,t.__scopeSelect),r=L0(by,t.__scopeSelect),[s,i]=x.useState(!1),o=Xe(e,r.onScrollButtonChange);return $t(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?g.jsx(UO,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});BO.displayName=by;var xy="SelectScrollDownButton",FO=x.forwardRef((t,e)=>{const n=fi(xy,t.__scopeSelect),r=L0(xy,t.__scopeSelect),[s,i]=x.useState(!1),o=Xe(e,r.onScrollButtonChange);return $t(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?g.jsx(UO,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});FO.displayName=xy;var UO=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=fi("SelectScrollButton",n),o=x.useRef(null),a=Lf(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),$t(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),g.jsx(Ae.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Te(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Te(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Te(s.onPointerLeave,()=>{l()})})}),eW="SelectSeparator",HO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return g.jsx(Ae.div,{"aria-hidden":!0,...r,ref:e})});HO.displayName=eW;var Sy="SelectArrow",tW=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=$f(n),i=hi(Sy,n),o=fi(Sy,n);return i.open&&o.position==="popper"?g.jsx(ZC,{...s,...r,ref:e}):null});tW.displayName=Sy;var nW="SelectBubbleInput",VO=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=x.useRef(null),i=Xe(r,s),o=rO(e);return x.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),g.jsx(Ae.select,{...n,style:{...nT,...n.style},ref:i,defaultValue:e})});VO.displayName=nW;function WO(t){return t===""||t===void 0}function qO(t){const e=io(t),n=x.useRef(""),r=x.useRef(0),s=x.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function KO(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=rW(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function rW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var sW=bO,GO=SO,iW=EO,oW=CO,aW=TO,JO=_O,lW=RO,QO=IO,YO=DO,cW=LO,uW=zO,XO=BO,ZO=FO,eA=HO;const tA=sW,nA=iW,$0=x.forwardRef(({className:t,children:e,...n},r)=>g.jsxs(GO,{ref:r,className:He("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,g.jsx(oW,{asChild:!0,children:g.jsx(dC,{className:"h-4 w-4 opacity-50"})})]}));$0.displayName=GO.displayName;const rA=x.forwardRef(({className:t,...e},n)=>g.jsx(XO,{ref:n,className:He("flex cursor-default items-center justify-center py-1",t),...e,children:g.jsx(GD,{className:"h-4 w-4"})}));rA.displayName=XO.displayName;const sA=x.forwardRef(({className:t,...e},n)=>g.jsx(ZO,{ref:n,className:He("flex cursor-default items-center justify-center py-1",t),...e,children:g.jsx(dC,{className:"h-4 w-4"})}));sA.displayName=ZO.displayName;const z0=x.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>g.jsx(aW,{children:g.jsxs(JO,{ref:s,className:He("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[g.jsx(rA,{}),g.jsx(lW,{className:He("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx(sA,{})]})}));z0.displayName=JO.displayName;const dW=x.forwardRef(({className:t,...e},n)=>g.jsx(QO,{ref:n,className:He("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));dW.displayName=QO.displayName;const Bc=x.forwardRef(({className:t,children:e,...n},r)=>g.jsxs(YO,{ref:r,className:He("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(uW,{children:g.jsx(KD,{className:"h-4 w-4"})})}),g.jsx(cW,{children:e})]}));Bc.displayName=YO.displayName;const hW=x.forwardRef(({className:t,...e},n)=>g.jsx(eA,{ref:n,className:He("-mx-1 my-1 h-px bg-muted",t),...e}));hW.displayName=eA.displayName;function fW(){const t=vo(),{user:e}=Zc(),[n,r]=x.useState(!1),s=x.useRef(null),[i,o]=x.useState(""),[a,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(!1),[h,p]=x.useState(!1),[m,y]=x.useState(""),[v,w]=x.useState(""),[b,S]=x.useState(""),[k,C]=x.useState(""),[E,_]=x.useState([]),[A,N]=x.useState(""),[z,L]=x.useState([]),{data:q}=Mn({queryKey:["categories"],queryFn:()=>st.getCategories()}),{data:F}=Mn({queryKey:["userSeries",e==null?void 0:e.id],queryFn:()=>st.getSeries(e==null?void 0:e.id)}),Z=async P=>{var J;const K=(J=P.target.files)==null?void 0:J[0];if(K)try{r(!0);const ie=`covers/${Date.now()}_${K.name}`,$=await st.uploadImage(K,ie);w($),De.success("Cover image uploaded")}catch(ie){console.error("Cover upload error:",ie),De.error(ie.message||"Failed to upload cover image")}finally{r(!1)}},W=()=>{A.trim()&&!z.includes(A.trim())&&(L([...z,A.trim()]),N(""))},G=P=>{L(z.filter(K=>K!==P))},O=P=>{_(K=>K.includes(P)?K.filter(J=>J!==P):[...K,P])},R=async P=>{if(P.preventDefault(),!e){De.error("You must be logged in");return}if(!i.trim()||!a.trim()){De.error("Title and content are required");return}r(!0);try{await st.createPost(e.id,{title:i.trim(),content:a,excerpt:c.trim(),published:d,featured:h,scheduled_at:m||void 0,cover_image:v||void 0,series_id:b||void 0,series_order:k?parseInt(k):void 0,category_ids:E,tag_names:z}),De.success(d?"Teaching published!":"Draft saved!"),t("/admin")}catch(K){console.error("Create post error:",K),De.error(K.message||"Failed to create teaching"),r(!1)}};return g.jsx("div",{className:"min-h-screen bg-background",children:g.jsxs("div",{className:"container mx-auto px-4 py-16 max-w-4xl",children:[g.jsx("h1",{className:"text-4xl font-bold text-foreground mb-8",children:"Write New Teaching"}),g.jsxs("form",{onSubmit:R,className:"space-y-8",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"title",children:"Title *"}),g.jsx(Vt,{id:"title",type:"text",value:i,onChange:P=>o(P.target.value),required:!0,disabled:n,placeholder:"Enter teaching title",className:"text-lg"})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Cover Image"})}),g.jsxs(at,{className:"space-y-4",children:[v?g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:v,alt:"Cover",className:"w-full h-48 object-cover rounded-lg"}),g.jsx(se,{type:"button",variant:"destructive",size:"sm",onClick:()=>w(""),className:"absolute top-2 right-2",children:"Remove"})]}):g.jsxs(se,{type:"button",variant:"outline",onClick:()=>{var P;return(P=s.current)==null?void 0:P.click()},disabled:n,children:[g.jsx(pC,{className:"w-4 h-4 mr-2"}),"Upload Cover Image"]}),g.jsx("input",{ref:s,type:"file",accept:"image/*",className:"hidden",onChange:Z})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{children:"Content *"}),g.jsx(nO,{content:a,onChange:l})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"excerpt",children:"Excerpt"}),g.jsx(D0,{id:"excerpt",value:c,onChange:P=>u(P.target.value),disabled:n,placeholder:"Brief summary (optional)",rows:3})]}),q&&q.length>0&&g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Categories"})}),g.jsx(at,{children:g.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(P=>g.jsx(se,{type:"button",variant:E.includes(P.id)?"default":"outline",size:"sm",onClick:()=>O(P.id),children:P.name},P.id))})})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Tags"})}),g.jsxs(at,{className:"space-y-4",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Vt,{type:"text",value:A,onChange:P=>N(P.target.value),onKeyPress:P=>P.key==="Enter"&&(P.preventDefault(),W()),placeholder:"Add a tag"}),g.jsx(se,{type:"button",onClick:W,size:"icon",children:g.jsx(hC,{className:"w-4 h-4"})})]}),z.length>0&&g.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(P=>g.jsxs(se,{type:"button",variant:"secondary",size:"sm",onClick:()=>G(P),children:[P," "]},P))})]})]}),F&&F.length>0&&g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Series"})}),g.jsxs(at,{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"series",children:"Select Series"}),g.jsxs(tA,{value:b,onValueChange:S,children:[g.jsx($0,{children:g.jsx(nA,{placeholder:"None"})}),g.jsxs(z0,{children:[g.jsx(Bc,{value:"",children:"None"}),F.map(P=>g.jsx(Bc,{value:P.id,children:P.title},P.id))]})]})]}),b&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"seriesOrder",children:"Part Number"}),g.jsx(Vt,{id:"seriesOrder",type:"number",min:"1",value:k,onChange:P=>C(P.target.value),placeholder:"1"})]})]})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Publishing Options"})}),g.jsxs(at,{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Qe,{htmlFor:"published",children:"Publish immediately"}),g.jsx(zc,{id:"published",checked:d,onCheckedChange:f,disabled:n})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Qe,{htmlFor:"featured",children:"Mark as featured"}),g.jsx(zc,{id:"featured",checked:h,onCheckedChange:p,disabled:n})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"scheduledAt",children:"Schedule for later (optional)"}),g.jsx(Vt,{id:"scheduledAt",type:"datetime-local",value:m,onChange:P=>y(P.target.value),disabled:n})]})]})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs(se,{type:"submit",disabled:n,className:"flex-1",children:[n&&g.jsx(Kr,{className:"mr-2 h-4 w-4 animate-spin"}),g.jsx(fC,{className:"mr-2 h-4 w-4"}),d?"Publish":"Save Draft"]}),g.jsx(se,{type:"button",variant:"outline",onClick:()=>t("/admin"),disabled:n,children:"Cancel"})]})]})]})})}function pW(){const{id:t}=AE(),e=vo(),{user:n}=Zc(),[r,s]=x.useState(!1),i=x.useRef(null),[o,a]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState(""),[f,h]=x.useState(!1),[p,m]=x.useState(!1),[y,v]=x.useState(""),[w,b]=x.useState(""),[S,k]=x.useState(""),[C,E]=x.useState(""),[_,A]=x.useState([]),[N,z]=x.useState(""),[L,q]=x.useState([]),{data:F,isLoading:Z}=Mn({queryKey:["post",t],queryFn:()=>st.getPostById(t),enabled:!!t}),{data:W}=Mn({queryKey:["categories"],queryFn:()=>st.getCategories()}),{data:G}=Mn({queryKey:["userSeries",n==null?void 0:n.id],queryFn:()=>st.getSeries(n==null?void 0:n.id)});x.useEffect(()=>{var $,ae,xe;F&&(a(F.title),c(F.content),d(F.excerpt||""),h(F.published),m(F.featured||!1),v(F.scheduled_at||""),b(F.cover_image||""),k(F.series_id||""),E((($=F.series_order)==null?void 0:$.toString())||""),A(((ae=F.categories)==null?void 0:ae.map(B=>B.id))||[]),q(((xe=F.tags)==null?void 0:xe.map(B=>B.name))||[]))},[F]);const O=async $=>{var xe;const ae=(xe=$.target.files)==null?void 0:xe[0];if(ae)try{s(!0);const B=`covers/${Date.now()}_${ae.name}`,we=await st.uploadImage(ae,B);b(we),De.success("Cover image uploaded")}catch(B){console.error("Cover upload error:",B),De.error(B.message||"Failed to upload cover image")}finally{s(!1)}},R=()=>{N.trim()&&!L.includes(N.trim())&&(q([...L,N.trim()]),z(""))},P=$=>{q(L.filter(ae=>ae!==$))},K=$=>{A(ae=>ae.includes($)?ae.filter(xe=>xe!==$):[...ae,$])},J=async $=>{if($.preventDefault(),!n||!t){De.error("Invalid request");return}if(!o.trim()||!l.trim()){De.error("Title and content are required");return}s(!0);try{await st.updatePost(t,{title:o.trim(),content:l,excerpt:u.trim(),published:f,featured:p,scheduled_at:y||void 0,cover_image:w||void 0,series_id:S||void 0,series_order:C?parseInt(C):void 0,category_ids:_,tag_names:L}),De.success("Teaching updated!"),e("/admin")}catch(ae){console.error("Update post error:",ae),De.error(ae.message||"Failed to update teaching"),s(!1)}},ie=async()=>{if(!(!t||!confirm("Are you sure you want to delete this teaching?"))){s(!0);try{await st.deletePost(t),De.success("Teaching deleted"),e("/admin")}catch($){console.error("Delete post error:",$),De.error($.message||"Failed to delete teaching"),s(!1)}}};return Z?g.jsx("div",{className:"min-h-screen flex items-center justify-center",children:g.jsx(Kr,{className:"w-8 h-8 animate-spin text-primary"})}):F?g.jsx("div",{className:"min-h-screen bg-background",children:g.jsxs("div",{className:"container mx-auto px-4 py-16 max-w-4xl",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Edit Teaching"}),g.jsxs(se,{type:"button",variant:"destructive",onClick:ie,disabled:r,children:[g.jsx(dL,{className:"w-4 h-4 mr-2"}),"Delete"]})]}),g.jsxs("form",{onSubmit:J,className:"space-y-8",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"title",children:"Title *"}),g.jsx(Vt,{id:"title",type:"text",value:o,onChange:$=>a($.target.value),required:!0,disabled:r,className:"text-lg"})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Cover Image"})}),g.jsxs(at,{className:"space-y-4",children:[w?g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:w,alt:"Cover",className:"w-full h-48 object-cover rounded-lg"}),g.jsx(se,{type:"button",variant:"destructive",size:"sm",onClick:()=>b(""),className:"absolute top-2 right-2",children:"Remove"})]}):g.jsxs(se,{type:"button",variant:"outline",onClick:()=>{var $;return($=i.current)==null?void 0:$.click()},disabled:r,children:[g.jsx(pC,{className:"w-4 h-4 mr-2"}),"Upload Cover Image"]}),g.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:O})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{children:"Content *"}),g.jsx(nO,{content:l,onChange:c})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"excerpt",children:"Excerpt"}),g.jsx(D0,{id:"excerpt",value:u,onChange:$=>d($.target.value),disabled:r,rows:3})]}),W&&W.length>0&&g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Categories"})}),g.jsx(at,{children:g.jsx("div",{className:"flex flex-wrap gap-2",children:W.map($=>g.jsx(se,{type:"button",variant:_.includes($.id)?"default":"outline",size:"sm",onClick:()=>K($.id),children:$.name},$.id))})})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Tags"})}),g.jsxs(at,{className:"space-y-4",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Vt,{type:"text",value:N,onChange:$=>z($.target.value),onKeyPress:$=>$.key==="Enter"&&($.preventDefault(),R()),placeholder:"Add a tag"}),g.jsx(se,{type:"button",onClick:R,size:"icon",children:g.jsx(hC,{className:"w-4 h-4"})})]}),L.length>0&&g.jsx("div",{className:"flex flex-wrap gap-2",children:L.map($=>g.jsxs(se,{type:"button",variant:"secondary",size:"sm",onClick:()=>P($),children:[$," "]},$))})]})]}),G&&G.length>0&&g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Series"})}),g.jsxs(at,{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"series",children:"Select Series"}),g.jsxs(tA,{value:S,onValueChange:k,children:[g.jsx($0,{children:g.jsx(nA,{placeholder:"None"})}),g.jsxs(z0,{children:[g.jsx(Bc,{value:"",children:"None"}),G.map($=>g.jsx(Bc,{value:$.id,children:$.title},$.id))]})]})]}),S&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"seriesOrder",children:"Part Number"}),g.jsx(Vt,{id:"seriesOrder",type:"number",min:"1",value:C,onChange:$=>E($.target.value),placeholder:"1"})]})]})]}),g.jsxs(ot,{className:"border-border/60",children:[g.jsx(yt,{children:g.jsx(vt,{className:"text-lg",children:"Publishing Options"})}),g.jsxs(at,{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Qe,{htmlFor:"published",children:"Published"}),g.jsx(zc,{id:"published",checked:f,onCheckedChange:h,disabled:r})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Qe,{htmlFor:"featured",children:"Featured"}),g.jsx(zc,{id:"featured",checked:p,onCheckedChange:m,disabled:r})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qe,{htmlFor:"scheduledAt",children:"Schedule for later"}),g.jsx(Vt,{id:"scheduledAt",type:"datetime-local",value:y,onChange:$=>v($.target.value),disabled:r})]})]})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs(se,{type:"submit",disabled:r,className:"flex-1",children:[r&&g.jsx(Kr,{className:"mr-2 h-4 w-4 animate-spin"}),g.jsx(fC,{className:"mr-2 h-4 w-4"}),"Update"]}),g.jsx(se,{type:"button",variant:"outline",onClick:()=>e("/admin"),disabled:r,children:"Cancel"})]})]})]})}):g.jsx("div",{className:"min-h-screen flex items-center justify-center",children:g.jsx("p",{className:"text-muted-foreground",children:"Teaching not found"})})}const mW=new hI({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});function cm({children:t}){const{user:e,loading:n}=Zc();return n?g.jsx("div",{className:"min-h-screen flex items-center justify-center",children:g.jsx(Kr,{className:"w-8 h-8 animate-spin text-primary"})}):e?g.jsx(g.Fragment,{children:t}):g.jsx(Ev,{to:"/login",replace:!0})}function gW(){return g.jsxs("div",{className:"flex flex-col min-h-screen overflow-x-hidden w-full",children:[g.jsx(t$,{}),g.jsx(yW,{}),g.jsx("main",{className:"flex-1",children:g.jsxs(AM,{children:[g.jsx(ar,{path:"/",element:g.jsx(f4,{})}),g.jsx(ar,{path:"/post/:id",element:g.jsx(p4,{})}),g.jsx(ar,{path:"/about",element:g.jsx(m4,{})}),g.jsx(ar,{path:"/contact",element:g.jsx(g4,{})}),g.jsx(ar,{path:"/login",element:g.jsx(x4,{})}),g.jsx(ar,{path:"/secret-login",element:g.jsx(Ev,{to:"/login",replace:!0})}),g.jsx(ar,{path:"/admin",element:g.jsx(cm,{children:g.jsx(S4,{})})}),g.jsx(ar,{path:"/admin/write",element:g.jsx(cm,{children:g.jsx(fW,{})})}),g.jsx(ar,{path:"/admin/edit/:id",element:g.jsx(cm,{children:g.jsx(pW,{})})})]})}),g.jsx(n$,{})]})}function yW(){const t=Ov();return x.useEffect(()=>{const e=ue.channel("public:posts").on("postgres_changes",{event:"*",schema:"public",table:"posts"},n=>{const r=n==null?void 0:n.new;n==null||n.old,r&&(t.setQueryData(["post",r.id],s=>({...s||{},...r||{}})),t.invalidateQueries({queryKey:["posts"]}))}).subscribe();return()=>{try{e.unsubscribe()}catch{}}},[t]),null}function vW(){return g.jsx(fI,{client:mW,children:g.jsxs($M,{children:[g.jsx(gW,{}),g.jsx(YI,{position:"top-center",richColors:!0})]})})}function wW(){document.addEventListener("pointerdown",r=>{var u,d;const s=(d=(u=r.target).closest)==null?void 0:d.call(u,".ripple.interactive");if(!s)return;const i=s.getBoundingClientRect(),o=Math.max(i.width,i.height)*1.2,a=r.clientX-i.left-o/2,l=r.clientY-i.top-o/2,c=document.createElement("span");c.className="ripple-effect",c.style.width=c.style.height=`${o}px`,c.style.left=`${a}px`,c.style.top=`${l}px`,s.appendChild(c),setTimeout(()=>{c.remove()},700)});const t=new Set,e=new IntersectionObserver(r=>{r.forEach(s=>{s.isIntersecting&&(s.target.classList.add("is-visible"),t.delete(s.target))})},{threshold:.12});return document.querySelectorAll(".reveal, .reveal-img").forEach((r,s)=>{r.style.setProperty("--order",String(s)),t.add(r),e.observe(r)}),("ontouchstart"in window||navigator.maxTouchPoints>0)&&document.querySelectorAll(".interactive").forEach(r=>r.classList.add("touch-press")),()=>{e.disconnect()}}kE(document.getElementById("root")).render(g.jsx(vW,{}));if(typeof window<"u")try{wW()}catch{}
